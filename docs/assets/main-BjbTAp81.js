var mv=Object.defineProperty;var gv=(e,t,n)=>t in e?mv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Vn=(e,t,n)=>gv(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Xc(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Mt={},gr=[],on=()=>{},Np=()=>!1,Aa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Yc=e=>e.startsWith("onUpdate:"),le=Object.assign,Zc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},yv=Object.prototype.hasOwnProperty,Dt=(e,t)=>yv.call(e,t),ft=Array.isArray,yr=e=>zi(e)==="[object Map]",Ia=e=>zi(e)==="[object Set]",tf=e=>zi(e)==="[object Date]",_t=e=>typeof e=="function",Jt=e=>typeof e=="string",Sn=e=>typeof e=="symbol",Lt=e=>e!==null&&typeof e=="object",Mp=e=>(Lt(e)||_t(e))&&_t(e.then)&&_t(e.catch),Lp=Object.prototype.toString,zi=e=>Lp.call(e),_v=e=>zi(e).slice(8,-1),Fp=e=>zi(e)==="[object Object]",tu=e=>Jt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,oi=Xc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sa=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},vv=/-(\w)/g,en=Sa(e=>e.replace(vv,(t,n)=>n?n.toUpperCase():"")),wv=/\B([A-Z])/g,Ts=Sa(e=>e.replace(wv,"-$1").toLowerCase()),Ra=Sa(e=>e.charAt(0).toUpperCase()+e.slice(1)),Rl=Sa(e=>e?`on${Ra(e)}`:""),as=(e,t)=>!Object.is(e,t),No=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Up=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Qo=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Ev=e=>{const t=Jt(e)?Number(e):NaN;return isNaN(t)?e:t};let ef;const Ca=()=>ef||(ef=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ki(e){if(ft(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],r=Jt(s)?Iv(s):Ki(s);if(r)for(const i in r)t[i]=r[i]}return t}else if(Jt(e)||Lt(e))return e}const Tv=/;(?![^(]*\))/g,bv=/:([^]+)/,Av=/\/\*[^]*?\*\//g;function Iv(e){const t={};return e.replace(Av,"").split(Tv).forEach(n=>{if(n){const s=n.split(bv);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function an(e){let t="";if(Jt(e))t=e;else if(ft(e))for(let n=0;n<e.length;n++){const s=an(e[n]);s&&(t+=s+" ")}else if(Lt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Sv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Rv=Xc(Sv);function Bp(e){return!!e||e===""}function Cv(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Pa(e[s],t[s]);return n}function Pa(e,t){if(e===t)return!0;let n=tf(e),s=tf(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Sn(e),s=Sn(t),n||s)return e===t;if(n=ft(e),s=ft(t),n||s)return n&&s?Cv(e,t):!1;if(n=Lt(e),s=Lt(t),n||s){if(!n||!s)return!1;const r=Object.keys(e).length,i=Object.keys(t).length;if(r!==i)return!1;for(const o in e){const l=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(l&&!c||!l&&c||!Pa(e[o],t[o]))return!1}}return String(e)===String(t)}function Pv(e,t){return e.findIndex(n=>Pa(n,t))}const $p=e=>!!(e&&e.__v_isRef===!0),Et=e=>Jt(e)?e:e==null?"":ft(e)||Lt(e)&&(e.toString===Lp||!_t(e.toString))?$p(e)?Et(e.value):JSON.stringify(e,jp,2):String(e),jp=(e,t)=>$p(t)?jp(e,t.value):yr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,r],i)=>(n[Cl(s,i)+" =>"]=r,n),{})}:Ia(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Cl(n))}:Sn(t)?Cl(t):Lt(t)&&!ft(t)&&!Fp(t)?String(t):t,Cl=(e,t="")=>{var n;return Sn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};function xv(e){return e==null?"initial":typeof e=="string"?e===""?" ":e:String(e)}/**
* @vue/reactivity v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Me;class Vv{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Me,!t&&Me&&(this.index=(Me.scopes||(Me.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Me;try{return Me=this,t()}finally{Me=n}}}on(){++this._on===1&&(this.prevScope=Me,Me=this)}off(){this._on>0&&--this._on===0&&(Me=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function kv(){return Me}let Ft;const Pl=new WeakSet;class qp{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Me&&Me.active&&Me.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Pl.has(this)&&(Pl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,nf(this),Kp(this);const t=Ft,n=ln;Ft=this,ln=!0;try{return this.fn()}finally{Gp(this),Ft=t,ln=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)su(t);this.deps=this.depsTail=void 0,nf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Pl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){sc(this)&&this.run()}get dirty(){return sc(this)}}let Hp=0,ai,li;function zp(e,t=!1){if(e.flags|=8,t){e.next=li,li=e;return}e.next=ai,ai=e}function eu(){Hp++}function nu(){if(--Hp>0)return;if(li){let t=li;for(li=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ai;){let t=ai;for(ai=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Kp(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Gp(e){let t,n=e.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),su(s),Dv(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}e.deps=t,e.depsTail=n}function sc(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Wp(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Wp(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ai)||(e.globalVersion=Ai,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!sc(e))))return;e.flags|=2;const t=e.dep,n=Ft,s=ln;Ft=e,ln=!0;try{Kp(e);const r=e.fn(e._value);(t.version===0||as(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Ft=n,ln=s,Gp(e),e.flags&=-3}}function su(e,t=!1){const{dep:n,prevSub:s,nextSub:r}=e;if(s&&(s.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)su(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Dv(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ln=!0;const Qp=[];function Bn(){Qp.push(ln),ln=!1}function $n(){const e=Qp.pop();ln=e===void 0?!0:e}function nf(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ft;Ft=void 0;try{t()}finally{Ft=n}}}let Ai=0;class Ov{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ru{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ft||!ln||Ft===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ft)n=this.activeLink=new Ov(Ft,this),Ft.deps?(n.prevDep=Ft.depsTail,Ft.depsTail.nextDep=n,Ft.depsTail=n):Ft.deps=Ft.depsTail=n,Jp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Ft.depsTail,n.nextDep=void 0,Ft.depsTail.nextDep=n,Ft.depsTail=n,Ft.deps===n&&(Ft.deps=s)}return n}trigger(t){this.version++,Ai++,this.notify(t)}notify(t){eu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{nu()}}}function Jp(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Jp(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const rc=new WeakMap,zs=Symbol(""),ic=Symbol(""),Ii=Symbol("");function be(e,t,n){if(ln&&Ft){let s=rc.get(e);s||rc.set(e,s=new Map);let r=s.get(n);r||(s.set(n,r=new ru),r.map=s,r.key=n),r.track()}}function Fn(e,t,n,s,r,i){const o=rc.get(e);if(!o){Ai++;return}const l=c=>{c&&c.trigger()};if(eu(),t==="clear")o.forEach(l);else{const c=ft(e),u=c&&tu(n);if(c&&n==="length"){const h=Number(s);o.forEach((d,m)=>{(m==="length"||m===Ii||!Sn(m)&&m>=h)&&l(d)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(Ii)),t){case"add":c?u&&l(o.get("length")):(l(o.get(zs)),yr(e)&&l(o.get(ic)));break;case"delete":c||(l(o.get(zs)),yr(e)&&l(o.get(ic)));break;case"set":yr(e)&&l(o.get(zs));break}}nu()}function lr(e){const t=Vt(e);return t===e?t:(be(t,"iterate",Ii),tn(e)?t:t.map(pe))}function xa(e){return be(e=Vt(e),"iterate",Ii),e}const Nv={__proto__:null,[Symbol.iterator](){return xl(this,Symbol.iterator,pe)},concat(...e){return lr(this).concat(...e.map(t=>ft(t)?lr(t):t))},entries(){return xl(this,"entries",e=>(e[1]=pe(e[1]),e))},every(e,t){return kn(this,"every",e,t,void 0,arguments)},filter(e,t){return kn(this,"filter",e,t,n=>n.map(pe),arguments)},find(e,t){return kn(this,"find",e,t,pe,arguments)},findIndex(e,t){return kn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return kn(this,"findLast",e,t,pe,arguments)},findLastIndex(e,t){return kn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return kn(this,"forEach",e,t,void 0,arguments)},includes(...e){return Vl(this,"includes",e)},indexOf(...e){return Vl(this,"indexOf",e)},join(e){return lr(this).join(e)},lastIndexOf(...e){return Vl(this,"lastIndexOf",e)},map(e,t){return kn(this,"map",e,t,void 0,arguments)},pop(){return Jr(this,"pop")},push(...e){return Jr(this,"push",e)},reduce(e,...t){return sf(this,"reduce",e,t)},reduceRight(e,...t){return sf(this,"reduceRight",e,t)},shift(){return Jr(this,"shift")},some(e,t){return kn(this,"some",e,t,void 0,arguments)},splice(...e){return Jr(this,"splice",e)},toReversed(){return lr(this).toReversed()},toSorted(e){return lr(this).toSorted(e)},toSpliced(...e){return lr(this).toSpliced(...e)},unshift(...e){return Jr(this,"unshift",e)},values(){return xl(this,"values",pe)}};function xl(e,t,n){const s=xa(e),r=s[t]();return s!==e&&!tn(e)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const Mv=Array.prototype;function kn(e,t,n,s,r,i){const o=xa(e),l=o!==e&&!tn(e),c=o[t];if(c!==Mv[t]){const d=c.apply(e,i);return l?pe(d):d}let u=n;o!==e&&(l?u=function(d,m){return n.call(this,pe(d),m,e)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,e)}));const h=c.call(o,u,s);return l&&r?r(h):h}function sf(e,t,n,s){const r=xa(e);let i=n;return r!==e&&(tn(e)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,e)}):i=function(o,l,c){return n.call(this,o,pe(l),c,e)}),r[t](i,...s)}function Vl(e,t,n){const s=Vt(e);be(s,"iterate",Ii);const r=s[t](...n);return(r===-1||r===!1)&&au(n[0])?(n[0]=Vt(n[0]),s[t](...n)):r}function Jr(e,t,n=[]){Bn(),eu();const s=Vt(e)[t].apply(e,n);return nu(),$n(),s}const Lv=Xc("__proto__,__v_isRef,__isVue"),Xp=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Sn));function Fv(e){Sn(e)||(e=String(e));const t=Vt(this);return be(t,"has",e),t.hasOwnProperty(e)}class Yp{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Wv:nm:i?em:tm).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=ft(t);if(!r){let c;if(o&&(c=Nv[n]))return c;if(n==="hasOwnProperty")return Fv}const l=Reflect.get(t,n,Ce(t)?t:s);return(Sn(n)?Xp.has(n):Lv(n))||(r||be(t,"get",n),i)?l:Ce(l)?o&&tu(n)?l:l.value:Lt(l)?r?rm(l):Va(l):l}}class Zp extends Yp{constructor(t=!1){super(!1,t)}set(t,n,s,r){let i=t[n];if(!this._isShallow){const c=ds(i);if(!tn(s)&&!ds(s)&&(i=Vt(i),s=Vt(s)),!ft(t)&&Ce(i)&&!Ce(s))return c||(i.value=s),!0}const o=ft(t)&&tu(n)?Number(n)<t.length:Dt(t,n),l=Reflect.set(t,n,s,Ce(t)?t:r);return t===Vt(r)&&(o?as(s,i)&&Fn(t,"set",n,s):Fn(t,"add",n,s)),l}deleteProperty(t,n){const s=Dt(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&s&&Fn(t,"delete",n,void 0),r}has(t,n){const s=Reflect.has(t,n);return(!Sn(n)||!Xp.has(n))&&be(t,"has",n),s}ownKeys(t){return be(t,"iterate",ft(t)?"length":zs),Reflect.ownKeys(t)}}class Uv extends Yp{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Bv=new Zp,$v=new Uv,jv=new Zp(!0);const oc=e=>e,Io=e=>Reflect.getPrototypeOf(e);function qv(e,t,n){return function(...s){const r=this.__v_raw,i=Vt(r),o=yr(i),l=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,u=r[e](...s),h=n?oc:t?Jo:pe;return!t&&be(i,"iterate",c?ic:zs),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:l?[h(d[0]),h(d[1])]:h(d),done:m}},[Symbol.iterator](){return this}}}}function So(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Hv(e,t){const n={get(r){const i=this.__v_raw,o=Vt(i),l=Vt(r);e||(as(r,l)&&be(o,"get",r),be(o,"get",l));const{has:c}=Io(o),u=t?oc:e?Jo:pe;if(c.call(o,r))return u(i.get(r));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!e&&be(Vt(r),"iterate",zs),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=Vt(i),l=Vt(r);return e||(as(r,l)&&be(o,"has",r),be(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=Vt(l),u=t?oc:e?Jo:pe;return!e&&be(c,"iterate",zs),l.forEach((h,d)=>r.call(i,u(h),u(d),o))}};return le(n,e?{add:So("add"),set:So("set"),delete:So("delete"),clear:So("clear")}:{add(r){!t&&!tn(r)&&!ds(r)&&(r=Vt(r));const i=Vt(this);return Io(i).has.call(i,r)||(i.add(r),Fn(i,"add",r,r)),this},set(r,i){!t&&!tn(i)&&!ds(i)&&(i=Vt(i));const o=Vt(this),{has:l,get:c}=Io(o);let u=l.call(o,r);u||(r=Vt(r),u=l.call(o,r));const h=c.call(o,r);return o.set(r,i),u?as(i,h)&&Fn(o,"set",r,i):Fn(o,"add",r,i),this},delete(r){const i=Vt(this),{has:o,get:l}=Io(i);let c=o.call(i,r);c||(r=Vt(r),c=o.call(i,r)),l&&l.call(i,r);const u=i.delete(r);return c&&Fn(i,"delete",r,void 0),u},clear(){const r=Vt(this),i=r.size!==0,o=r.clear();return i&&Fn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=qv(r,e,t)}),n}function iu(e,t){const n=Hv(e,t);return(s,r,i)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(Dt(n,r)&&r in s?n:s,r,i)}const zv={get:iu(!1,!1)},Kv={get:iu(!1,!0)},Gv={get:iu(!0,!1)};const tm=new WeakMap,em=new WeakMap,nm=new WeakMap,Wv=new WeakMap;function Qv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jv(e){return e.__v_skip||!Object.isExtensible(e)?0:Qv(_v(e))}function Va(e){return ds(e)?e:ou(e,!1,Bv,zv,tm)}function sm(e){return ou(e,!1,jv,Kv,em)}function rm(e){return ou(e,!0,$v,Gv,nm)}function ou(e,t,n,s,r){if(!Lt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Jv(e);if(i===0)return e;const o=r.get(e);if(o)return o;const l=new Proxy(e,i===2?s:n);return r.set(e,l),l}function _r(e){return ds(e)?_r(e.__v_raw):!!(e&&e.__v_isReactive)}function ds(e){return!!(e&&e.__v_isReadonly)}function tn(e){return!!(e&&e.__v_isShallow)}function au(e){return e?!!e.__v_raw:!1}function Vt(e){const t=e&&e.__v_raw;return t?Vt(t):e}function Xv(e){return!Dt(e,"__v_skip")&&Object.isExtensible(e)&&Up(e,"__v_skip",!0),e}const pe=e=>Lt(e)?Va(e):e,Jo=e=>Lt(e)?rm(e):e;function Ce(e){return e?e.__v_isRef===!0:!1}function ne(e){return im(e,!1)}function Yv(e){return im(e,!0)}function im(e,t){return Ce(e)?e:new Zv(e,t)}class Zv{constructor(t,n){this.dep=new ru,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Vt(t),this._value=n?t:pe(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||tn(t)||ds(t);t=s?t:Vt(t),as(t,n)&&(this._rawValue=t,this._value=s?t:pe(t),this.dep.trigger())}}function Ks(e){return Ce(e)?e.value:e}const t0={get:(e,t,n)=>t==="__v_raw"?e:Ks(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const r=e[t];return Ce(r)&&!Ce(n)?(r.value=n,!0):Reflect.set(e,t,n,s)}};function om(e){return _r(e)?e:new Proxy(e,t0)}class e0{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ru(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ai-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ft!==this)return zp(this,!0),!0}get value(){const t=this.dep.track();return Wp(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function n0(e,t,n=!1){let s,r;return _t(e)?s=e:(s=e.get,r=e.set),new e0(s,r,n)}const Ro={},Xo=new WeakMap;let Ns;function s0(e,t=!1,n=Ns){if(n){let s=Xo.get(n);s||Xo.set(n,s=[]),s.push(e)}}function r0(e,t,n=Mt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,u=H=>r?H:tn(H)||r===!1||r===0?Un(H,1):Un(H);let h,d,m,y,T=!1,C=!1;if(Ce(e)?(d=()=>e.value,T=tn(e)):_r(e)?(d=()=>u(e),T=!0):ft(e)?(C=!0,T=e.some(H=>_r(H)||tn(H)),d=()=>e.map(H=>{if(Ce(H))return H.value;if(_r(H))return u(H);if(_t(H))return c?c(H,2):H()})):_t(e)?t?d=c?()=>c(e,2):e:d=()=>{if(m){Bn();try{m()}finally{$n()}}const H=Ns;Ns=h;try{return c?c(e,3,[y]):e(y)}finally{Ns=H}}:d=on,t&&r){const H=d,nt=r===!0?1/0:r;d=()=>Un(H(),nt)}const x=kv(),M=()=>{h.stop(),x&&x.active&&Zc(x.effects,h)};if(i&&t){const H=t;t=(...nt)=>{H(...nt),M()}}let N=C?new Array(e.length).fill(Ro):Ro;const B=H=>{if(!(!(h.flags&1)||!h.dirty&&!H))if(t){const nt=h.run();if(r||T||(C?nt.some((st,S)=>as(st,N[S])):as(nt,N))){m&&m();const st=Ns;Ns=h;try{const S=[nt,N===Ro?void 0:C&&N[0]===Ro?[]:N,y];N=nt,c?c(t,3,S):t(...S)}finally{Ns=st}}}else h.run()};return l&&l(B),h=new qp(d),h.scheduler=o?()=>o(B,!1):B,y=H=>s0(H,!1,h),m=h.onStop=()=>{const H=Xo.get(h);if(H){if(c)c(H,4);else for(const nt of H)nt();Xo.delete(h)}},t?s?B(!0):N=h.run():o?o(B.bind(null,!0),!0):h.run(),M.pause=h.pause.bind(h),M.resume=h.resume.bind(h),M.stop=M,M}function Un(e,t=1/0,n){if(t<=0||!Lt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ce(e))Un(e.value,t,n);else if(ft(e))for(let s=0;s<e.length;s++)Un(e[s],t,n);else if(Ia(e)||yr(e))e.forEach(s=>{Un(s,t,n)});else if(Fp(e)){for(const s in e)Un(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Un(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Gi(e,t,n,s){try{return s?e(...s):e()}catch(r){ka(r,t,n)}}function cn(e,t,n,s){if(_t(e)){const r=Gi(e,t,n,s);return r&&Mp(r)&&r.catch(i=>{ka(i,t,n)}),r}if(ft(e)){const r=[];for(let i=0;i<e.length;i++)r.push(cn(e[i],t,n,s));return r}}function ka(e,t,n,s=!0){const r=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Mt;if(t){let l=t.parent;const c=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,c,u)===!1)return}l=l.parent}if(i){Bn(),Gi(i,null,10,[e,c,u]),$n();return}}i0(e,n,r,s,o)}function i0(e,t,n,s=!0,r=!1){if(r)throw e;console.error(e)}const De=[];let gn=-1;const vr=[];let ns=null,cr=0;const am=Promise.resolve();let Yo=null;function lu(e){const t=Yo||am;return e?t.then(this?e.bind(this):e):t}function o0(e){let t=gn+1,n=De.length;for(;t<n;){const s=t+n>>>1,r=De[s],i=Si(r);i<e||i===e&&r.flags&2?t=s+1:n=s}return t}function cu(e){if(!(e.flags&1)){const t=Si(e),n=De[De.length-1];!n||!(e.flags&2)&&t>=Si(n)?De.push(e):De.splice(o0(t),0,e),e.flags|=1,lm()}}function lm(){Yo||(Yo=am.then(hm))}function cm(e){ft(e)?vr.push(...e):ns&&e.id===-1?ns.splice(cr+1,0,e):e.flags&1||(vr.push(e),e.flags|=1),lm()}function rf(e,t,n=gn+1){for(;n<De.length;n++){const s=De[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;De.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function um(e){if(vr.length){const t=[...new Set(vr)].sort((n,s)=>Si(n)-Si(s));if(vr.length=0,ns){ns.push(...t);return}for(ns=t,cr=0;cr<ns.length;cr++){const n=ns[cr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ns=null,cr=0}}const Si=e=>e.id==null?e.flags&2?-1:1/0:e.id;function hm(e){try{for(gn=0;gn<De.length;gn++){const t=De[gn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Gi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;gn<De.length;gn++){const t=De[gn];t&&(t.flags&=-2)}gn=-1,De.length=0,um(),Yo=null,(De.length||vr.length)&&hm()}}let ze=null,fm=null;function Zo(e){const t=ze;return ze=e,fm=e&&e.type.__scopeId||null,t}function Da(e,t=ze,n){if(!t||e._n)return e;const s=(...r)=>{s._d&&vf(-1);const i=Zo(t);let o;try{o=e(...r)}finally{Zo(i),s._d&&vf(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function uu(e,t){if(ze===null)return e;const n=Ua(ze),s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,o,l,c=Mt]=t[r];i&&(_t(i)&&(i={mounted:i,updated:i}),i.deep&&Un(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return e}function Vs(e,t,n,s){const r=e.dirs,i=t&&t.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(Bn(),cn(c,n,8,[e.el,l,e,t]),$n())}}const dm=Symbol("_vte"),pm=e=>e.__isTeleport,ci=e=>e&&(e.disabled||e.disabled===""),of=e=>e&&(e.defer||e.defer===""),af=e=>typeof SVGElement<"u"&&e instanceof SVGElement,lf=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,ac=(e,t)=>{const n=e&&e.to;return Jt(n)?t?t(n):null:n},mm={name:"Teleport",__isTeleport:!0,process(e,t,n,s,r,i,o,l,c,u){const{mc:h,pc:d,pbc:m,o:{insert:y,querySelector:T,createText:C,createComment:x}}=u,M=ci(t.props);let{shapeFlag:N,children:B,dynamicChildren:H}=t;if(e==null){const nt=t.el=C(""),st=t.anchor=C("");y(nt,n,s),y(st,n,s);const S=(_,b)=>{N&16&&(r&&r.isCE&&(r.ce._teleportTarget=_),h(B,_,b,r,i,o,l,c))},v=()=>{const _=t.target=ac(t.props,T),b=gm(_,t,C,y);_&&(o!=="svg"&&af(_)?o="svg":o!=="mathml"&&lf(_)&&(o="mathml"),M||(S(_,b),Mo(t,!1)))};M&&(S(n,st),Mo(t,!0)),of(t.props)?(t.el.__isMounted=!1,ke(()=>{v(),delete t.el.__isMounted},i)):v()}else{if(of(t.props)&&e.el.__isMounted===!1){ke(()=>{mm.process(e,t,n,s,r,i,o,l,c,u)},i);return}t.el=e.el,t.targetStart=e.targetStart;const nt=t.anchor=e.anchor,st=t.target=e.target,S=t.targetAnchor=e.targetAnchor,v=ci(e.props),_=v?n:st,b=v?nt:S;if(o==="svg"||af(st)?o="svg":(o==="mathml"||lf(st))&&(o="mathml"),H?(m(e.dynamicChildren,H,_,r,i,o,l),du(e,t,!0)):c||d(e,t,_,b,r,i,o,l,!1),M)v?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Co(t,n,nt,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const R=t.target=ac(t.props,T);R&&Co(t,R,null,u,0)}else v&&Co(t,st,S,u,1);Mo(t,M)}},remove(e,t,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:l,anchor:c,targetStart:u,targetAnchor:h,target:d,props:m}=e;if(d&&(r(u),r(h)),i&&r(c),o&16){const y=i||!ci(m);for(let T=0;T<l.length;T++){const C=l[T];s(C,t,n,y,!!C.dynamicChildren)}}},move:Co,hydrate:a0};function Co(e,t,n,{o:{insert:s},m:r},i=2){i===0&&s(e.targetAnchor,t,n);const{el:o,anchor:l,shapeFlag:c,children:u,props:h}=e,d=i===2;if(d&&s(o,t,n),(!d||ci(h))&&c&16)for(let m=0;m<u.length;m++)r(u[m],t,n,2);d&&s(l,t,n)}function a0(e,t,n,s,r,i,{o:{nextSibling:o,parentNode:l,querySelector:c,insert:u,createText:h}},d){const m=t.target=ac(t.props,c);if(m){const y=ci(t.props),T=m._lpa||m.firstChild;if(t.shapeFlag&16)if(y)t.anchor=d(o(e),t,l(e),n,s,r,i),t.targetStart=T,t.targetAnchor=T&&o(T);else{t.anchor=o(e);let C=T;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")t.targetStart=C;else if(C.data==="teleport anchor"){t.targetAnchor=C,m._lpa=t.targetAnchor&&o(t.targetAnchor);break}}C=o(C)}t.targetAnchor||gm(m,t,h,u),d(T&&o(T),t,m,n,s,r,i)}Mo(t,y)}return t.anchor&&o(t.anchor)}const l0=mm;function Mo(e,t){const n=e.ctx;if(n&&n.ut){let s,r;for(t?(s=e.el,r=e.anchor):(s=e.targetStart,r=e.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function gm(e,t,n,s){const r=t.targetStart=n(""),i=t.targetAnchor=n("");return r[dm]=i,e&&(s(r,e),s(i,e)),i}const Ln=Symbol("_leaveCb"),Po=Symbol("_enterCb");function c0(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Wn(()=>{e.isMounted=!0}),Im(()=>{e.isUnmounting=!0}),e}const Ye=[Function,Array],ym={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ye,onEnter:Ye,onAfterEnter:Ye,onEnterCancelled:Ye,onBeforeLeave:Ye,onLeave:Ye,onAfterLeave:Ye,onLeaveCancelled:Ye,onBeforeAppear:Ye,onAppear:Ye,onAfterAppear:Ye,onAppearCancelled:Ye},_m=e=>{const t=e.subTree;return t.component?_m(t.component):t},u0={name:"BaseTransition",props:ym,setup(e,{slots:t}){const n=mu(),s=c0();return()=>{const r=t.default&&Em(t.default(),!0);if(!r||!r.length)return;const i=vm(r),o=Vt(e),{mode:l}=o;if(s.isLeaving)return kl(i);const c=cf(i);if(!c)return kl(i);let u=lc(c,o,s,n,d=>u=d);c.type!==Oe&&Ri(c,u);let h=n.subTree&&cf(n.subTree);if(h&&h.type!==Oe&&!Ls(c,h)&&_m(n).type!==Oe){let d=lc(h,o,s,n);if(Ri(h,d),l==="out-in"&&c.type!==Oe)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},kl(i);l==="in-out"&&c.type!==Oe?d.delayLeave=(m,y,T)=>{const C=wm(s,h);C[String(h.key)]=h,m[Ln]=()=>{y(),m[Ln]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{T(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function vm(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Oe){t=n;break}}return t}const h0=u0;function wm(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function lc(e,t,n,s,r){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:m,onLeave:y,onAfterLeave:T,onLeaveCancelled:C,onBeforeAppear:x,onAppear:M,onAfterAppear:N,onAppearCancelled:B}=t,H=String(e.key),nt=wm(n,e),st=(_,b)=>{_&&cn(_,s,9,b)},S=(_,b)=>{const R=b[1];st(_,b),ft(_)?_.every(A=>A.length<=1)&&R():_.length<=1&&R()},v={mode:o,persisted:l,beforeEnter(_){let b=c;if(!n.isMounted)if(i)b=x||c;else return;_[Ln]&&_[Ln](!0);const R=nt[H];R&&Ls(e,R)&&R.el[Ln]&&R.el[Ln](),st(b,[_])},enter(_){let b=u,R=h,A=d;if(!n.isMounted)if(i)b=M||u,R=N||h,A=B||d;else return;let w=!1;const Z=_[Po]=Y=>{w||(w=!0,Y?st(A,[_]):st(R,[_]),v.delayedLeave&&v.delayedLeave(),_[Po]=void 0)};b?S(b,[_,Z]):Z()},leave(_,b){const R=String(e.key);if(_[Po]&&_[Po](!0),n.isUnmounting)return b();st(m,[_]);let A=!1;const w=_[Ln]=Z=>{A||(A=!0,b(),Z?st(C,[_]):st(T,[_]),_[Ln]=void 0,nt[R]===e&&delete nt[R])};nt[R]=e,y?S(y,[_,w]):w()},clone(_){const b=lc(_,t,n,s,r);return r&&r(b),b}};return v}function kl(e){if(Oa(e))return e=ps(e),e.children=null,e}function cf(e){if(!Oa(e))return pm(e.type)&&e.children?vm(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&_t(n.default))return n.default()}}function Ri(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ri(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Em(e,t=!1,n){let s=[],r=0;for(let i=0;i<e.length;i++){let o=e[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ae?(o.patchFlag&128&&r++,s=s.concat(Em(o.children,t,l))):(t||o.type!==Oe)&&s.push(l!=null?ps(o,{key:l}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Qe(e,t){return _t(e)?le({name:e.name},t,{setup:e}):e}function Tm(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ui(e,t,n,s,r=!1){if(ft(e)){e.forEach((T,C)=>ui(T,t&&(ft(t)?t[C]:t),n,s,r));return}if(hi(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ui(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?Ua(s.component):s.el,o=r?null:i,{i:l,r:c}=e,u=t&&t.r,h=l.refs===Mt?l.refs={}:l.refs,d=l.setupState,m=Vt(d),y=d===Mt?Np:T=>Dt(m,T);if(u!=null&&u!==c){if(Jt(u))h[u]=null,y(u)&&(d[u]=null);else if(Ce(u)){u.value=null;const T=t;T.k&&(h[T.k]=null)}}if(_t(c))Gi(c,l,12,[o,h]);else{const T=Jt(c),C=Ce(c);if(T||C){const x=()=>{if(e.f){const M=T?y(c)?d[c]:h[c]:c.value;if(r)ft(M)&&Zc(M,i);else if(ft(M))M.includes(i)||M.push(i);else if(T)h[c]=[i],y(c)&&(d[c]=h[c]);else{const N=[i];c.value=N,e.k&&(h[e.k]=N)}}else T?(h[c]=o,y(c)&&(d[c]=o)):C&&(c.value=o,e.k&&(h[e.k]=o))};o?(x.id=-1,ke(x,n)):x()}}}Ca().requestIdleCallback;Ca().cancelIdleCallback;const hi=e=>!!e.type.__asyncLoader,Oa=e=>e.type.__isKeepAlive;function f0(e,t){bm(e,"a",t)}function d0(e,t){bm(e,"da",t)}function bm(e,t,n=Se){const s=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Na(t,s,n),n){let r=n.parent;for(;r&&r.parent;)Oa(r.parent.vnode)&&p0(s,t,n,r),r=r.parent}}function p0(e,t,n,s){const r=Na(t,e,s,!0);Wi(()=>{Zc(s[t],r)},n)}function Na(e,t,n=Se,s=!1){if(n){const r=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{Bn();const l=Ji(n),c=cn(t,n,e,o);return l(),$n(),c});return s?r.unshift(i):r.push(i),i}}const Gn=e=>(t,n=Se)=>{(!Pi||e==="sp")&&Na(e,(...s)=>t(...s),n)},m0=Gn("bm"),Wn=Gn("m"),Am=Gn("bu"),g0=Gn("u"),Im=Gn("bum"),Wi=Gn("um"),y0=Gn("sp"),_0=Gn("rtg"),v0=Gn("rtc");function w0(e,t=Se){Na("ec",e,t)}const E0="components";function Sm(e,t){return b0(E0,e,!0,t)||e}const T0=Symbol.for("v-ndc");function b0(e,t,n=!0,s=!1){const r=ze||Se;if(r){const i=r.type;{const l=cw(i,!1);if(l&&(l===t||l===en(t)||l===Ra(en(t))))return i}const o=uf(r[e]||i[e],t)||uf(r.appContext[e],t);return!o&&s?i:o}}function uf(e,t){return e&&(e[t]||e[en(t)]||e[Ra(en(t))])}function Qi(e,t,n,s){let r;const i=n,o=ft(e);if(o||Jt(e)){const l=o&&_r(e);let c=!1,u=!1;l&&(c=!tn(e),u=ds(e),e=xa(e)),r=new Array(e.length);for(let h=0,d=e.length;h<d;h++)r[h]=t(c?u?Jo(pe(e[h])):pe(e[h]):e[h],h,void 0,i)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,i)}else if(Lt(e))if(e[Symbol.iterator])r=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);r=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];r[c]=t(e[h],h,c,i)}}else r=[];return r}const cc=e=>e?zm(e)?Ua(e):cc(e.parent):null,fi=le(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>cc(e.parent),$root:e=>cc(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Cm(e),$forceUpdate:e=>e.f||(e.f=()=>{cu(e.update)}),$nextTick:e=>e.n||(e.n=lu.bind(e.proxy)),$watch:e=>H0.bind(e)}),Dl=(e,t)=>e!==Mt&&!e.__isScriptSetup&&Dt(e,t),A0={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=e;let u;if(t[0]!=="$"){const y=o[t];if(y!==void 0)switch(y){case 1:return s[t];case 2:return r[t];case 4:return n[t];case 3:return i[t]}else{if(Dl(s,t))return o[t]=1,s[t];if(r!==Mt&&Dt(r,t))return o[t]=2,r[t];if((u=e.propsOptions[0])&&Dt(u,t))return o[t]=3,i[t];if(n!==Mt&&Dt(n,t))return o[t]=4,n[t];uc&&(o[t]=0)}}const h=fi[t];let d,m;if(h)return t==="$attrs"&&be(e.attrs,"get",""),h(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(n!==Mt&&Dt(n,t))return o[t]=4,n[t];if(m=c.config.globalProperties,Dt(m,t))return m[t]},set({_:e},t,n){const{data:s,setupState:r,ctx:i}=e;return Dl(r,t)?(r[t]=n,!0):s!==Mt&&Dt(s,t)?(s[t]=n,!0):Dt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:r,propsOptions:i,type:o}},l){let c,u;return!!(n[l]||e!==Mt&&l[0]!=="$"&&Dt(e,l)||Dl(t,l)||(c=i[0])&&Dt(c,l)||Dt(s,l)||Dt(fi,l)||Dt(r.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Dt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function hf(e){return ft(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let uc=!0;function I0(e){const t=Cm(e),n=e.proxy,s=e.ctx;uc=!1,t.beforeCreate&&ff(t.beforeCreate,e,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:d,mounted:m,beforeUpdate:y,updated:T,activated:C,deactivated:x,beforeDestroy:M,beforeUnmount:N,destroyed:B,unmounted:H,render:nt,renderTracked:st,renderTriggered:S,errorCaptured:v,serverPrefetch:_,expose:b,inheritAttrs:R,components:A,directives:w,filters:Z}=t;if(u&&S0(u,s,null),o)for(const ot in o){const dt=o[ot];_t(dt)&&(s[ot]=dt.bind(n))}if(r){const ot=r.call(n,n);Lt(ot)&&(e.data=Va(ot))}if(uc=!0,i)for(const ot in i){const dt=i[ot],te=_t(dt)?dt.bind(n,n):_t(dt.get)?dt.get.bind(n,n):on,jt=!_t(dt)&&_t(dt.set)?dt.set.bind(n):on,Pe=Qt({get:te,set:jt});Object.defineProperty(s,ot,{enumerable:!0,configurable:!0,get:()=>Pe.value,set:Ht=>Pe.value=Ht})}if(l)for(const ot in l)Rm(l[ot],s,n,ot);if(c){const ot=_t(c)?c.call(n):c;Reflect.ownKeys(ot).forEach(dt=>{Lo(dt,ot[dt])})}h&&ff(h,e,"c");function bt(ot,dt){ft(dt)?dt.forEach(te=>ot(te.bind(n))):dt&&ot(dt.bind(n))}if(bt(m0,d),bt(Wn,m),bt(Am,y),bt(g0,T),bt(f0,C),bt(d0,x),bt(w0,v),bt(v0,st),bt(_0,S),bt(Im,N),bt(Wi,H),bt(y0,_),ft(b))if(b.length){const ot=e.exposed||(e.exposed={});b.forEach(dt=>{Object.defineProperty(ot,dt,{get:()=>n[dt],set:te=>n[dt]=te,enumerable:!0})})}else e.exposed||(e.exposed={});nt&&e.render===on&&(e.render=nt),R!=null&&(e.inheritAttrs=R),A&&(e.components=A),w&&(e.directives=w),_&&Tm(e)}function S0(e,t,n=on){ft(e)&&(e=hc(e));for(const s in e){const r=e[s];let i;Lt(r)?"default"in r?i=vn(r.from||s,r.default,!0):i=vn(r.from||s):i=vn(r),Ce(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[s]=i}}function ff(e,t,n){cn(ft(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Rm(e,t,n,s){let r=s.includes(".")?Bm(n,s):()=>n[s];if(Jt(e)){const i=t[e];_t(i)&&ls(r,i)}else if(_t(e))ls(r,e.bind(n));else if(Lt(e))if(ft(e))e.forEach(i=>Rm(i,t,n,s));else{const i=_t(e.handler)?e.handler.bind(n):t[e.handler];_t(i)&&ls(r,i,e)}}function Cm(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,l=i.get(t);let c;return l?c=l:!r.length&&!n&&!s?c=t:(c={},r.length&&r.forEach(u=>ta(c,u,o,!0)),ta(c,t,o)),Lt(t)&&i.set(t,c),c}function ta(e,t,n,s=!1){const{mixins:r,extends:i}=t;i&&ta(e,i,n,!0),r&&r.forEach(o=>ta(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const l=R0[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const R0={data:df,props:pf,emits:pf,methods:ei,computed:ei,beforeCreate:Ve,created:Ve,beforeMount:Ve,mounted:Ve,beforeUpdate:Ve,updated:Ve,beforeDestroy:Ve,beforeUnmount:Ve,destroyed:Ve,unmounted:Ve,activated:Ve,deactivated:Ve,errorCaptured:Ve,serverPrefetch:Ve,components:ei,directives:ei,watch:P0,provide:df,inject:C0};function df(e,t){return t?e?function(){return le(_t(e)?e.call(this,this):e,_t(t)?t.call(this,this):t)}:t:e}function C0(e,t){return ei(hc(e),hc(t))}function hc(e){if(ft(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ve(e,t){return e?[...new Set([].concat(e,t))]:t}function ei(e,t){return e?le(Object.create(null),e,t):t}function pf(e,t){return e?ft(e)&&ft(t)?[...new Set([...e,...t])]:le(Object.create(null),hf(e),hf(t??{})):t}function P0(e,t){if(!e)return t;if(!t)return e;const n=le(Object.create(null),e);for(const s in t)n[s]=Ve(e[s],t[s]);return n}function Pm(){return{app:null,config:{isNativeTag:Np,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let x0=0;function V0(e,t){return function(s,r=null){_t(s)||(s=le({},s)),r!=null&&!Lt(r)&&(r=null);const i=Pm(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:x0++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:hw,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&_t(h.install)?(o.add(h),h.install(u,...d)):_t(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,m){if(!c){const y=u._ceVNode||qt(s,r);return y.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),e(y,h,m),c=!0,u._container=h,h.__vue_app__=u,Ua(y.component)}},onUnmount(h){l.push(h)},unmount(){c&&(cn(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=wr;wr=u;try{return h()}finally{wr=d}}};return u}}let wr=null;function Lo(e,t){if(Se){let n=Se.provides;const s=Se.parent&&Se.parent.provides;s===n&&(n=Se.provides=Object.create(s)),n[e]=t}}function vn(e,t,n=!1){const s=mu();if(s||wr){let r=wr?wr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&_t(t)?t.call(s&&s.proxy):t}}const xm={},Vm=()=>Object.create(xm),km=e=>Object.getPrototypeOf(e)===xm;function k0(e,t,n,s=!1){const r={},i=Vm();e.propsDefaults=Object.create(null),Dm(e,t,r,i);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=s?r:sm(r):e.type.props?e.props=r:e.props=i,e.attrs=i}function D0(e,t,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=e,l=Vt(r),[c]=e.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let d=0;d<h.length;d++){let m=h[d];if(Ma(e.emitsOptions,m))continue;const y=t[m];if(c)if(Dt(i,m))y!==i[m]&&(i[m]=y,u=!0);else{const T=en(m);r[T]=fc(c,l,T,y,e,!1)}else y!==i[m]&&(i[m]=y,u=!0)}}}else{Dm(e,t,r,i)&&(u=!0);let h;for(const d in l)(!t||!Dt(t,d)&&((h=Ts(d))===d||!Dt(t,h)))&&(c?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=fc(c,l,d,void 0,e,!0)):delete r[d]);if(i!==l)for(const d in i)(!t||!Dt(t,d))&&(delete i[d],u=!0)}u&&Fn(e.attrs,"set","")}function Dm(e,t,n,s){const[r,i]=e.propsOptions;let o=!1,l;if(t)for(let c in t){if(oi(c))continue;const u=t[c];let h;r&&Dt(r,h=en(c))?!i||!i.includes(h)?n[h]=u:(l||(l={}))[h]=u:Ma(e.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=Vt(n),u=l||Mt;for(let h=0;h<i.length;h++){const d=i[h];n[d]=fc(r,c,d,u[d],e,!Dt(u,d))}}return o}function fc(e,t,n,s,r,i){const o=e[n];if(o!=null){const l=Dt(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&_t(c)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=Ji(r);s=u[n]=c.call(null,t),h()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===Ts(n))&&(s=!0))}return s}const O0=new WeakMap;function Om(e,t,n=!1){const s=n?O0:t.propsCache,r=s.get(e);if(r)return r;const i=e.props,o={},l=[];let c=!1;if(!_t(e)){const h=d=>{c=!0;const[m,y]=Om(d,t,!0);le(o,m),y&&l.push(...y)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!i&&!c)return Lt(e)&&s.set(e,gr),gr;if(ft(i))for(let h=0;h<i.length;h++){const d=en(i[h]);mf(d)&&(o[d]=Mt)}else if(i)for(const h in i){const d=en(h);if(mf(d)){const m=i[h],y=o[d]=ft(m)||_t(m)?{type:m}:le({},m),T=y.type;let C=!1,x=!0;if(ft(T))for(let M=0;M<T.length;++M){const N=T[M],B=_t(N)&&N.name;if(B==="Boolean"){C=!0;break}else B==="String"&&(x=!1)}else C=_t(T)&&T.name==="Boolean";y[0]=C,y[1]=x,(C||Dt(y,"default"))&&l.push(d)}}const u=[o,l];return Lt(e)&&s.set(e,u),u}function mf(e){return e[0]!=="$"&&!oi(e)}const hu=e=>e==="_"||e==="_ctx"||e==="$stable",fu=e=>ft(e)?e.map(_n):[_n(e)],N0=(e,t,n)=>{if(t._n)return t;const s=Da((...r)=>fu(t(...r)),n);return s._c=!1,s},Nm=(e,t,n)=>{const s=e._ctx;for(const r in e){if(hu(r))continue;const i=e[r];if(_t(i))t[r]=N0(r,i,s);else if(i!=null){const o=fu(i);t[r]=()=>o}}},Mm=(e,t)=>{const n=fu(t);e.slots.default=()=>n},Lm=(e,t,n)=>{for(const s in t)(n||!hu(s))&&(e[s]=t[s])},M0=(e,t,n)=>{const s=e.slots=Vm();if(e.vnode.shapeFlag&32){const r=t._;r?(Lm(s,t,n),n&&Up(s,"_",r,!0)):Nm(t,s)}else t&&Mm(e,t)},L0=(e,t,n)=>{const{vnode:s,slots:r}=e;let i=!0,o=Mt;if(s.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Lm(r,t,n):(i=!t.$stable,Nm(t,r)),o=t}else t&&(Mm(e,t),o={default:1});if(i)for(const l in r)!hu(l)&&o[l]==null&&delete r[l]},ke=X0;function F0(e){return U0(e)}function U0(e,t){const n=Ca();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:d,nextSibling:m,setScopeId:y=on,insertStaticContent:T}=e,C=(E,I,V,F=null,j=null,U=null,Q=void 0,G=null,K=!!I.dynamicChildren)=>{if(E===I)return;E&&!Ls(E,I)&&(F=L(E),Ht(E,j,U,!0),E=null),I.patchFlag===-2&&(K=!1,I.dynamicChildren=null);const{type:z,ref:lt,shapeFlag:X}=I;switch(z){case La:x(E,I,V,F);break;case Oe:M(E,I,V,F);break;case di:E==null&&N(I,V,F,Q);break;case Ae:A(E,I,V,F,j,U,Q,G,K);break;default:X&1?nt(E,I,V,F,j,U,Q,G,K):X&6?w(E,I,V,F,j,U,Q,G,K):(X&64||X&128)&&z.process(E,I,V,F,j,U,Q,G,K,rt)}lt!=null&&j?ui(lt,E&&E.ref,U,I||E,!I):lt==null&&E&&E.ref!=null&&ui(E.ref,null,U,E,!0)},x=(E,I,V,F)=>{if(E==null)s(I.el=l(I.children),V,F);else{const j=I.el=E.el;I.children!==E.children&&u(j,I.children)}},M=(E,I,V,F)=>{E==null?s(I.el=c(I.children||""),V,F):I.el=E.el},N=(E,I,V,F)=>{[E.el,E.anchor]=T(E.children,I,V,F,E.el,E.anchor)},B=({el:E,anchor:I},V,F)=>{let j;for(;E&&E!==I;)j=m(E),s(E,V,F),E=j;s(I,V,F)},H=({el:E,anchor:I})=>{let V;for(;E&&E!==I;)V=m(E),r(E),E=V;r(I)},nt=(E,I,V,F,j,U,Q,G,K)=>{I.type==="svg"?Q="svg":I.type==="math"&&(Q="mathml"),E==null?st(I,V,F,j,U,Q,G,K):_(E,I,j,U,Q,G,K)},st=(E,I,V,F,j,U,Q,G)=>{let K,z;const{props:lt,shapeFlag:X,transition:at,dirs:mt}=E;if(K=E.el=o(E.type,U,lt&&lt.is,lt),X&8?h(K,E.children):X&16&&v(E.children,K,null,F,j,Ol(E,U),Q,G),mt&&Vs(E,null,F,"created"),S(K,E,E.scopeId,Q,F),lt){for(const wt in lt)wt!=="value"&&!oi(wt)&&i(K,wt,null,lt[wt],U,F);"value"in lt&&i(K,"value",null,lt.value,U),(z=lt.onVnodeBeforeMount)&&dn(z,F,E)}mt&&Vs(E,null,F,"beforeMount");const ut=B0(j,at);ut&&at.beforeEnter(K),s(K,I,V),((z=lt&&lt.onVnodeMounted)||ut||mt)&&ke(()=>{z&&dn(z,F,E),ut&&at.enter(K),mt&&Vs(E,null,F,"mounted")},j)},S=(E,I,V,F,j)=>{if(V&&y(E,V),F)for(let U=0;U<F.length;U++)y(E,F[U]);if(j){let U=j.subTree;if(I===U||jm(U.type)&&(U.ssContent===I||U.ssFallback===I)){const Q=j.vnode;S(E,Q,Q.scopeId,Q.slotScopeIds,j.parent)}}},v=(E,I,V,F,j,U,Q,G,K=0)=>{for(let z=K;z<E.length;z++){const lt=E[z]=G?ss(E[z]):_n(E[z]);C(null,lt,I,V,F,j,U,Q,G)}},_=(E,I,V,F,j,U,Q)=>{const G=I.el=E.el;let{patchFlag:K,dynamicChildren:z,dirs:lt}=I;K|=E.patchFlag&16;const X=E.props||Mt,at=I.props||Mt;let mt;if(V&&ks(V,!1),(mt=at.onVnodeBeforeUpdate)&&dn(mt,V,I,E),lt&&Vs(I,E,V,"beforeUpdate"),V&&ks(V,!0),(X.innerHTML&&at.innerHTML==null||X.textContent&&at.textContent==null)&&h(G,""),z?b(E.dynamicChildren,z,G,V,F,Ol(I,j),U):Q||dt(E,I,G,null,V,F,Ol(I,j),U,!1),K>0){if(K&16)R(G,X,at,V,j);else if(K&2&&X.class!==at.class&&i(G,"class",null,at.class,j),K&4&&i(G,"style",X.style,at.style,j),K&8){const ut=I.dynamicProps;for(let wt=0;wt<ut.length;wt++){const St=ut[wt],ce=X[St],ue=at[St];(ue!==ce||St==="value")&&i(G,St,ce,ue,j,V)}}K&1&&E.children!==I.children&&h(G,I.children)}else!Q&&z==null&&R(G,X,at,V,j);((mt=at.onVnodeUpdated)||lt)&&ke(()=>{mt&&dn(mt,V,I,E),lt&&Vs(I,E,V,"updated")},F)},b=(E,I,V,F,j,U,Q)=>{for(let G=0;G<I.length;G++){const K=E[G],z=I[G],lt=K.el&&(K.type===Ae||!Ls(K,z)||K.shapeFlag&198)?d(K.el):V;C(K,z,lt,null,F,j,U,Q,!0)}},R=(E,I,V,F,j)=>{if(I!==V){if(I!==Mt)for(const U in I)!oi(U)&&!(U in V)&&i(E,U,I[U],null,j,F);for(const U in V){if(oi(U))continue;const Q=V[U],G=I[U];Q!==G&&U!=="value"&&i(E,U,G,Q,j,F)}"value"in V&&i(E,"value",I.value,V.value,j)}},A=(E,I,V,F,j,U,Q,G,K)=>{const z=I.el=E?E.el:l(""),lt=I.anchor=E?E.anchor:l("");let{patchFlag:X,dynamicChildren:at,slotScopeIds:mt}=I;mt&&(G=G?G.concat(mt):mt),E==null?(s(z,V,F),s(lt,V,F),v(I.children||[],V,lt,j,U,Q,G,K)):X>0&&X&64&&at&&E.dynamicChildren?(b(E.dynamicChildren,at,V,j,U,Q,G),(I.key!=null||j&&I===j.subTree)&&du(E,I,!0)):dt(E,I,V,lt,j,U,Q,G,K)},w=(E,I,V,F,j,U,Q,G,K)=>{I.slotScopeIds=G,E==null?I.shapeFlag&512?j.ctx.activate(I,V,F,Q,K):Z(I,V,F,j,U,Q,K):Y(E,I,K)},Z=(E,I,V,F,j,U,Q)=>{const G=E.component=rw(E,F,j);if(Oa(E)&&(G.ctx.renderer=rt),iw(G,!1,Q),G.asyncDep){if(j&&j.registerDep(G,bt,Q),!E.el){const K=G.subTree=qt(Oe);M(null,K,I,V),E.placeholder=K.el}}else bt(G,E,I,V,j,U,Q)},Y=(E,I,V)=>{const F=I.component=E.component;if(Q0(E,I,V))if(F.asyncDep&&!F.asyncResolved){ot(F,I,V);return}else F.next=I,F.update();else I.el=E.el,F.vnode=I},bt=(E,I,V,F,j,U,Q)=>{const G=()=>{if(E.isMounted){let{next:X,bu:at,u:mt,parent:ut,vnode:wt}=E;{const ye=Fm(E);if(ye){X&&(X.el=wt.el,ot(E,X,Q)),ye.asyncDep.then(()=>{E.isUnmounted||G()});return}}let St=X,ce;ks(E,!1),X?(X.el=wt.el,ot(E,X,Q)):X=wt,at&&No(at),(ce=X.props&&X.props.onVnodeBeforeUpdate)&&dn(ce,ut,X,wt),ks(E,!0);const ue=yf(E),Je=E.subTree;E.subTree=ue,C(Je,ue,d(Je.el),L(Je),E,j,U),X.el=ue.el,St===null&&J0(E,ue.el),mt&&ke(mt,j),(ce=X.props&&X.props.onVnodeUpdated)&&ke(()=>dn(ce,ut,X,wt),j)}else{let X;const{el:at,props:mt}=I,{bm:ut,m:wt,parent:St,root:ce,type:ue}=E,Je=hi(I);ks(E,!1),ut&&No(ut),!Je&&(X=mt&&mt.onVnodeBeforeMount)&&dn(X,St,I),ks(E,!0);{ce.ce&&ce.ce._def.shadowRoot!==!1&&ce.ce._injectChildStyle(ue);const ye=E.subTree=yf(E);C(null,ye,V,F,E,j,U),I.el=ye.el}if(wt&&ke(wt,j),!Je&&(X=mt&&mt.onVnodeMounted)){const ye=I;ke(()=>dn(X,St,ye),j)}(I.shapeFlag&256||St&&hi(St.vnode)&&St.vnode.shapeFlag&256)&&E.a&&ke(E.a,j),E.isMounted=!0,I=V=F=null}};E.scope.on();const K=E.effect=new qp(G);E.scope.off();const z=E.update=K.run.bind(K),lt=E.job=K.runIfDirty.bind(K);lt.i=E,lt.id=E.uid,K.scheduler=()=>cu(lt),ks(E,!0),z()},ot=(E,I,V)=>{I.component=E;const F=E.vnode.props;E.vnode=I,E.next=null,D0(E,I.props,F,V),L0(E,I.children,V),Bn(),rf(E),$n()},dt=(E,I,V,F,j,U,Q,G,K=!1)=>{const z=E&&E.children,lt=E?E.shapeFlag:0,X=I.children,{patchFlag:at,shapeFlag:mt}=I;if(at>0){if(at&128){jt(z,X,V,F,j,U,Q,G,K);return}else if(at&256){te(z,X,V,F,j,U,Q,G,K);return}}mt&8?(lt&16&&Ne(z,j,U),X!==z&&h(V,X)):lt&16?mt&16?jt(z,X,V,F,j,U,Q,G,K):Ne(z,j,U,!0):(lt&8&&h(V,""),mt&16&&v(X,V,F,j,U,Q,G,K))},te=(E,I,V,F,j,U,Q,G,K)=>{E=E||gr,I=I||gr;const z=E.length,lt=I.length,X=Math.min(z,lt);let at;for(at=0;at<X;at++){const mt=I[at]=K?ss(I[at]):_n(I[at]);C(E[at],mt,V,null,j,U,Q,G,K)}z>lt?Ne(E,j,U,!0,!1,X):v(I,V,F,j,U,Q,G,K,X)},jt=(E,I,V,F,j,U,Q,G,K)=>{let z=0;const lt=I.length;let X=E.length-1,at=lt-1;for(;z<=X&&z<=at;){const mt=E[z],ut=I[z]=K?ss(I[z]):_n(I[z]);if(Ls(mt,ut))C(mt,ut,V,null,j,U,Q,G,K);else break;z++}for(;z<=X&&z<=at;){const mt=E[X],ut=I[at]=K?ss(I[at]):_n(I[at]);if(Ls(mt,ut))C(mt,ut,V,null,j,U,Q,G,K);else break;X--,at--}if(z>X){if(z<=at){const mt=at+1,ut=mt<lt?I[mt].el:F;for(;z<=at;)C(null,I[z]=K?ss(I[z]):_n(I[z]),V,ut,j,U,Q,G,K),z++}}else if(z>at)for(;z<=X;)Ht(E[z],j,U,!0),z++;else{const mt=z,ut=z,wt=new Map;for(z=ut;z<=at;z++){const he=I[z]=K?ss(I[z]):_n(I[z]);he.key!=null&&wt.set(he.key,z)}let St,ce=0;const ue=at-ut+1;let Je=!1,ye=0;const Jn=new Array(ue);for(z=0;z<ue;z++)Jn[z]=0;for(z=mt;z<=X;z++){const he=E[z];if(ce>=ue){Ht(he,j,U,!0);continue}let Xe;if(he.key!=null)Xe=wt.get(he.key);else for(St=ut;St<=at;St++)if(Jn[St-ut]===0&&Ls(he,I[St])){Xe=St;break}Xe===void 0?Ht(he,j,U,!0):(Jn[Xe-ut]=z+1,Xe>=ye?ye=Xe:Je=!0,C(he,I[Xe],V,null,j,U,Q,G,K),ce++)}const Lr=Je?$0(Jn):gr;for(St=Lr.length-1,z=ue-1;z>=0;z--){const he=ut+z,Xe=I[he],lo=I[he+1],sr=he+1<lt?lo.el||lo.placeholder:F;Jn[z]===0?C(null,Xe,V,sr,j,U,Q,G,K):Je&&(St<0||z!==Lr[St]?Pe(Xe,V,sr,2):St--)}}},Pe=(E,I,V,F,j=null)=>{const{el:U,type:Q,transition:G,children:K,shapeFlag:z}=E;if(z&6){Pe(E.component.subTree,I,V,F);return}if(z&128){E.suspense.move(I,V,F);return}if(z&64){Q.move(E,I,V,rt);return}if(Q===Ae){s(U,I,V);for(let X=0;X<K.length;X++)Pe(K[X],I,V,F);s(E.anchor,I,V);return}if(Q===di){B(E,I,V);return}if(F!==2&&z&1&&G)if(F===0)G.beforeEnter(U),s(U,I,V),ke(()=>G.enter(U),j);else{const{leave:X,delayLeave:at,afterLeave:mt}=G,ut=()=>{E.ctx.isUnmounted?r(U):s(U,I,V)},wt=()=>{U._isLeaving&&U[Ln](!0),X(U,()=>{ut(),mt&&mt()})};at?at(U,ut,wt):wt()}else s(U,I,V)},Ht=(E,I,V,F=!1,j=!1)=>{const{type:U,props:Q,ref:G,children:K,dynamicChildren:z,shapeFlag:lt,patchFlag:X,dirs:at,cacheIndex:mt}=E;if(X===-2&&(j=!1),G!=null&&(Bn(),ui(G,null,V,E,!0),$n()),mt!=null&&(I.renderCache[mt]=void 0),lt&256){I.ctx.deactivate(E);return}const ut=lt&1&&at,wt=!hi(E);let St;if(wt&&(St=Q&&Q.onVnodeBeforeUnmount)&&dn(St,I,E),lt&6)fn(E.component,V,F);else{if(lt&128){E.suspense.unmount(V,F);return}ut&&Vs(E,null,I,"beforeUnmount"),lt&64?E.type.remove(E,I,V,rt,F):z&&!z.hasOnce&&(U!==Ae||X>0&&X&64)?Ne(z,I,V,!1,!0):(U===Ae&&X&384||!j&&lt&16)&&Ne(K,I,V),F&&zt(E)}(wt&&(St=Q&&Q.onVnodeUnmounted)||ut)&&ke(()=>{St&&dn(St,I,E),ut&&Vs(E,null,I,"unmounted")},V)},zt=E=>{const{type:I,el:V,anchor:F,transition:j}=E;if(I===Ae){Qn(V,F);return}if(I===di){H(E);return}const U=()=>{r(V),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(E.shapeFlag&1&&j&&!j.persisted){const{leave:Q,delayLeave:G}=j,K=()=>Q(V,U);G?G(E.el,U,K):K()}else U()},Qn=(E,I)=>{let V;for(;E!==I;)V=m(E),r(E),E=V;r(I)},fn=(E,I,V)=>{const{bum:F,scope:j,job:U,subTree:Q,um:G,m:K,a:z}=E;gf(K),gf(z),F&&No(F),j.stop(),U&&(U.flags|=8,Ht(Q,E,I,V)),G&&ke(G,I),ke(()=>{E.isUnmounted=!0},I)},Ne=(E,I,V,F=!1,j=!1,U=0)=>{for(let Q=U;Q<E.length;Q++)Ht(E[Q],I,V,F,j)},L=E=>{if(E.shapeFlag&6)return L(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const I=m(E.anchor||E.el),V=I&&I[dm];return V?m(V):I};let tt=!1;const J=(E,I,V)=>{E==null?I._vnode&&Ht(I._vnode,null,null,!0):C(I._vnode||null,E,I,null,null,null,V),I._vnode=E,tt||(tt=!0,rf(),um(),tt=!1)},rt={p:C,um:Ht,m:Pe,r:zt,mt:Z,mc:v,pc:dt,pbc:b,n:L,o:e};return{render:J,hydrate:void 0,createApp:V0(J)}}function Ol({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function ks({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function B0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function du(e,t,n=!1){const s=e.children,r=t.children;if(ft(s)&&ft(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=ss(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&du(o,l)),l.type===La&&l.patchFlag!==-1&&(l.el=o.el),l.type===Oe&&!l.el&&(l.el=o.el)}}function $0(e){const t=e.slice(),n=[0];let s,r,i,o,l;const c=e.length;for(s=0;s<c;s++){const u=e[s];if(u!==0){if(r=n[n.length-1],e[r]<u){t[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,e[n[l]]<u?i=l+1:o=l;u<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function Fm(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Fm(t)}function gf(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const j0=Symbol.for("v-scx"),q0=()=>vn(j0);function ls(e,t,n){return Um(e,t,n)}function Um(e,t,n=Mt){const{immediate:s,deep:r,flush:i,once:o}=n,l=le({},n),c=t&&s||!t&&i!=="post";let u;if(Pi){if(i==="sync"){const y=q0();u=y.__watcherHandles||(y.__watcherHandles=[])}else if(!c){const y=()=>{};return y.stop=on,y.resume=on,y.pause=on,y}}const h=Se;l.call=(y,T,C)=>cn(y,h,T,C);let d=!1;i==="post"?l.scheduler=y=>{ke(y,h&&h.suspense)}:i!=="sync"&&(d=!0,l.scheduler=(y,T)=>{T?y():cu(y)}),l.augmentJob=y=>{t&&(y.flags|=4),d&&(y.flags|=2,h&&(y.id=h.uid,y.i=h))};const m=r0(e,t,l);return Pi&&(u?u.push(m):c&&m()),m}function H0(e,t,n){const s=this.proxy,r=Jt(e)?e.includes(".")?Bm(s,e):()=>s[e]:e.bind(s,s);let i;_t(t)?i=t:(i=t.handler,n=t);const o=Ji(this),l=Um(r,i.bind(s),n);return o(),l}function Bm(e,t){const n=t.split(".");return()=>{let s=e;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const z0=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${en(t)}Modifiers`]||e[`${Ts(t)}Modifiers`];function K0(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Mt;let r=n;const i=t.startsWith("update:"),o=i&&z0(s,t.slice(7));o&&(o.trim&&(r=n.map(h=>Jt(h)?h.trim():h)),o.number&&(r=n.map(Qo)));let l,c=s[l=Rl(t)]||s[l=Rl(en(t))];!c&&i&&(c=s[l=Rl(Ts(t))]),c&&cn(c,e,6,r);const u=s[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,cn(u,e,6,r)}}function $m(e,t,n=!1){const s=t.emitsCache,r=s.get(e);if(r!==void 0)return r;const i=e.emits;let o={},l=!1;if(!_t(e)){const c=u=>{const h=$m(u,t,!0);h&&(l=!0,le(o,h))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Lt(e)&&s.set(e,null),null):(ft(i)?i.forEach(c=>o[c]=null):le(o,i),Lt(e)&&s.set(e,o),o)}function Ma(e,t){return!e||!Aa(t)?!1:(t=t.slice(2).replace(/Once$/,""),Dt(e,t[0].toLowerCase()+t.slice(1))||Dt(e,Ts(t))||Dt(e,t))}function yf(e){const{type:t,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:h,props:d,data:m,setupState:y,ctx:T,inheritAttrs:C}=e,x=Zo(e);let M,N;try{if(n.shapeFlag&4){const H=r||s,nt=H;M=_n(u.call(nt,H,h,d,y,m,T)),N=l}else{const H=t;M=_n(H.length>1?H(d,{attrs:l,slots:o,emit:c}):H(d,null)),N=t.props?l:G0(l)}}catch(H){pi.length=0,ka(H,e,1),M=qt(Oe)}let B=M;if(N&&C!==!1){const H=Object.keys(N),{shapeFlag:nt}=B;H.length&&nt&7&&(i&&H.some(Yc)&&(N=W0(N,i)),B=ps(B,N,!1,!0))}return n.dirs&&(B=ps(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&Ri(B,n.transition),M=B,Zo(x),M}const G0=e=>{let t;for(const n in e)(n==="class"||n==="style"||Aa(n))&&((t||(t={}))[n]=e[n]);return t},W0=(e,t)=>{const n={};for(const s in e)(!Yc(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function Q0(e,t,n){const{props:s,children:r,component:i}=e,{props:o,children:l,patchFlag:c}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?_f(s,o,u):!!o;if(c&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const m=h[d];if(o[m]!==s[m]&&!Ma(u,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?_f(s,o,u):!0:!!o;return!1}function _f(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(t[i]!==e[i]&&!Ma(n,i))return!0}return!1}function J0({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const jm=e=>e.__isSuspense;function X0(e,t){t&&t.pendingBranch?ft(e)?t.effects.push(...e):t.effects.push(e):cm(e)}const Ae=Symbol.for("v-fgt"),La=Symbol.for("v-txt"),Oe=Symbol.for("v-cmt"),di=Symbol.for("v-stc"),pi=[];let Ke=null;function ht(e=!1){pi.push(Ke=e?null:[])}function Y0(){pi.pop(),Ke=pi[pi.length-1]||null}let Ci=1;function vf(e,t=!1){Ci+=e,e<0&&Ke&&t&&(Ke.hasOnce=!0)}function qm(e){return e.dynamicChildren=Ci>0?Ke||gr:null,Y0(),Ci>0&&Ke&&Ke.push(e),e}function gt(e,t,n,s,r,i){return qm(P(e,t,n,s,r,i,!0))}function Fa(e,t,n,s,r){return qm(qt(e,t,n,s,r,!0))}function ea(e){return e?e.__v_isVNode===!0:!1}function Ls(e,t){return e.type===t.type&&e.key===t.key}const Hm=({key:e})=>e??null,Fo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Jt(e)||Ce(e)||_t(e)?{i:ze,r:e,k:t,f:!!n}:e:null);function P(e,t=null,n=null,s=0,r=null,i=e===Ae?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Hm(t),ref:t&&Fo(t),scopeId:fm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ze};return l?(pu(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Jt(n)?8:16),Ci>0&&!o&&Ke&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ke.push(c),c}const qt=Z0;function Z0(e,t=null,n=null,s=0,r=null,i=!1){if((!e||e===T0)&&(e=Oe),ea(e)){const l=ps(e,t,!0);return n&&pu(l,n),Ci>0&&!i&&Ke&&(l.shapeFlag&6?Ke[Ke.indexOf(e)]=l:Ke.push(l)),l.patchFlag=-2,l}if(uw(e)&&(e=e.__vccOpts),t){t=tw(t);let{class:l,style:c}=t;l&&!Jt(l)&&(t.class=an(l)),Lt(c)&&(au(c)&&!ft(c)&&(c=le({},c)),t.style=Ki(c))}const o=Jt(e)?1:jm(e)?128:pm(e)?64:Lt(e)?4:_t(e)?2:0;return P(e,t,n,s,r,o,i,!0)}function tw(e){return e?au(e)||km(e)?le({},e):e:null}function ps(e,t,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=e,u=t?ew(r||{},t):r,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Hm(u),ref:t&&t.ref?n&&i?ft(i)?i.concat(Fo(t)):[i,Fo(t)]:Fo(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ae?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ps(e.ssContent),ssFallback:e.ssFallback&&ps(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&s&&Ri(h,c.clone(h)),h}function Fe(e=" ",t=0){return qt(La,null,e,t)}function na(e,t){const n=qt(di,null,e);return n.staticCount=t,n}function Yt(e="",t=!1){return t?(ht(),Fa(Oe,null,e)):qt(Oe,null,e)}function _n(e){return e==null||typeof e=="boolean"?qt(Oe):ft(e)?qt(Ae,null,e.slice()):ea(e)?ss(e):qt(La,null,String(e))}function ss(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ps(e)}function pu(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(ft(t))n=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),pu(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!km(t)?t._ctx=ze:r===3&&ze&&(ze.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _t(t)?(t={default:t,_ctx:ze},n=32):(t=String(t),s&64?(n=16,t=[Fe(t)]):n=8);e.children=t,e.shapeFlag|=n}function ew(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=an([t.class,s.class]));else if(r==="style")t.style=Ki([t.style,s.style]);else if(Aa(r)){const i=t[r],o=s[r];o&&i!==o&&!(ft(i)&&i.includes(o))&&(t[r]=i?[].concat(i,o):o)}else r!==""&&(t[r]=s[r])}return t}function dn(e,t,n,s=null){cn(e,t,7,[n,s])}const nw=Pm();let sw=0;function rw(e,t,n){const s=e.type,r=(t?t.appContext:e.appContext)||nw,i={uid:sw++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Om(s,r),emitsOptions:$m(s,r),emit:null,emitted:null,propsDefaults:Mt,inheritAttrs:s.inheritAttrs,ctx:Mt,data:Mt,props:Mt,attrs:Mt,slots:Mt,refs:Mt,setupState:Mt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=K0.bind(null,i),e.ce&&e.ce(i),i}let Se=null;const mu=()=>Se||ze;let sa,dc;{const e=Ca(),t=(n,s)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};sa=t("__VUE_INSTANCE_SETTERS__",n=>Se=n),dc=t("__VUE_SSR_SETTERS__",n=>Pi=n)}const Ji=e=>{const t=Se;return sa(e),e.scope.on(),()=>{e.scope.off(),sa(t)}},wf=()=>{Se&&Se.scope.off(),sa(null)};function zm(e){return e.vnode.shapeFlag&4}let Pi=!1;function iw(e,t=!1,n=!1){t&&dc(t);const{props:s,children:r}=e.vnode,i=zm(e);k0(e,s,i,t),M0(e,r,n||t);const o=i?ow(e,t):void 0;return t&&dc(!1),o}function ow(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,A0);const{setup:s}=n;if(s){Bn();const r=e.setupContext=s.length>1?lw(e):null,i=Ji(e),o=Gi(s,e,0,[e.props,r]),l=Mp(o);if($n(),i(),(l||e.sp)&&!hi(e)&&Tm(e),l){if(o.then(wf,wf),t)return o.then(c=>{Ef(e,c)}).catch(c=>{ka(c,e,0)});e.asyncDep=o}else Ef(e,o)}else Km(e)}function Ef(e,t,n){_t(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Lt(t)&&(e.setupState=om(t)),Km(e)}function Km(e,t,n){const s=e.type;e.render||(e.render=s.render||on);{const r=Ji(e);Bn();try{I0(e)}finally{$n(),r()}}}const aw={get(e,t){return be(e,"get",""),e[t]}};function lw(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,aw),slots:e.slots,emit:e.emit,expose:t}}function Ua(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(om(Xv(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in fi)return fi[n](e)},has(t,n){return n in t||n in fi}})):e.proxy}function cw(e,t=!0){return _t(e)?e.displayName||e.name:e.name||t&&e.__name}function uw(e){return _t(e)&&"__vccOpts"in e}const Qt=(e,t)=>n0(e,t,Pi);function gu(e,t,n){const s=arguments.length;return s===2?Lt(t)&&!ft(t)?ea(t)?qt(e,null,[t]):qt(e,t):qt(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ea(n)&&(n=[n]),qt(e,t,n))}const hw="3.5.19";/**
* @vue/runtime-dom v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pc;const Tf=typeof window<"u"&&window.trustedTypes;if(Tf)try{pc=Tf.createPolicy("vue",{createHTML:e=>e})}catch{}const Gm=pc?e=>pc.createHTML(e):e=>e,fw="http://www.w3.org/2000/svg",dw="http://www.w3.org/1998/Math/MathML",Mn=typeof document<"u"?document:null,bf=Mn&&Mn.createElement("template"),pw={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const r=t==="svg"?Mn.createElementNS(fw,e):t==="mathml"?Mn.createElementNS(dw,e):n?Mn.createElement(e,{is:n}):Mn.createElement(e);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>Mn.createTextNode(e),createComment:e=>Mn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Mn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,r,i){const o=n?n.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{bf.innerHTML=Gm(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const l=bf.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ts="transition",Xr="animation",xi=Symbol("_vtc"),Wm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},mw=le({},ym,Wm),gw=e=>(e.displayName="Transition",e.props=mw,e),yw=gw((e,{slots:t})=>gu(h0,_w(e),t)),Ds=(e,t=[])=>{ft(e)?e.forEach(n=>n(...t)):e&&e(...t)},Af=e=>e?ft(e)?e.some(t=>t.length>1):e.length>1:!1;function _w(e){const t={};for(const A in e)A in Wm||(t[A]=e[A]);if(e.css===!1)return t;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=e,T=vw(r),C=T&&T[0],x=T&&T[1],{onBeforeEnter:M,onEnter:N,onEnterCancelled:B,onLeave:H,onLeaveCancelled:nt,onBeforeAppear:st=M,onAppear:S=N,onAppearCancelled:v=B}=t,_=(A,w,Z,Y)=>{A._enterCancelled=Y,Os(A,w?h:l),Os(A,w?u:o),Z&&Z()},b=(A,w)=>{A._isLeaving=!1,Os(A,d),Os(A,y),Os(A,m),w&&w()},R=A=>(w,Z)=>{const Y=A?S:N,bt=()=>_(w,A,Z);Ds(Y,[w,bt]),If(()=>{Os(w,A?c:i),Dn(w,A?h:l),Af(Y)||Sf(w,s,C,bt)})};return le(t,{onBeforeEnter(A){Ds(M,[A]),Dn(A,i),Dn(A,o)},onBeforeAppear(A){Ds(st,[A]),Dn(A,c),Dn(A,u)},onEnter:R(!1),onAppear:R(!0),onLeave(A,w){A._isLeaving=!0;const Z=()=>b(A,w);Dn(A,d),A._enterCancelled?(Dn(A,m),Pf()):(Pf(),Dn(A,m)),If(()=>{A._isLeaving&&(Os(A,d),Dn(A,y),Af(H)||Sf(A,s,x,Z))}),Ds(H,[A,Z])},onEnterCancelled(A){_(A,!1,void 0,!0),Ds(B,[A])},onAppearCancelled(A){_(A,!0,void 0,!0),Ds(v,[A])},onLeaveCancelled(A){b(A),Ds(nt,[A])}})}function vw(e){if(e==null)return null;if(Lt(e))return[Nl(e.enter),Nl(e.leave)];{const t=Nl(e);return[t,t]}}function Nl(e){return Ev(e)}function Dn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[xi]||(e[xi]=new Set)).add(t)}function Os(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[xi];n&&(n.delete(t),n.size||(e[xi]=void 0))}function If(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let ww=0;function Sf(e,t,n,s){const r=e._endId=++ww,i=()=>{r===e._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=Ew(e,t);if(!o)return s();const u=o+"end";let h=0;const d=()=>{e.removeEventListener(u,m),i()},m=y=>{y.target===e&&++h>=c&&d()};setTimeout(()=>{h<c&&d()},l+1),e.addEventListener(u,m)}function Ew(e,t){const n=window.getComputedStyle(e),s=T=>(n[T]||"").split(", "),r=s(`${ts}Delay`),i=s(`${ts}Duration`),o=Rf(r,i),l=s(`${Xr}Delay`),c=s(`${Xr}Duration`),u=Rf(l,c);let h=null,d=0,m=0;t===ts?o>0&&(h=ts,d=o,m=i.length):t===Xr?u>0&&(h=Xr,d=u,m=c.length):(d=Math.max(o,u),h=d>0?o>u?ts:Xr:null,m=h?h===ts?i.length:c.length:0);const y=h===ts&&/\b(transform|all)(,|$)/.test(s(`${ts}Property`).toString());return{type:h,timeout:d,propCount:m,hasTransform:y}}function Rf(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Cf(n)+Cf(e[s])))}function Cf(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Pf(){return document.body.offsetHeight}function Tw(e,t,n){const s=e[xi];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ra=Symbol("_vod"),Qm=Symbol("_vsh"),bw={beforeMount(e,{value:t},{transition:n}){e[ra]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Yr(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Yr(e,!0),s.enter(e)):s.leave(e,()=>{Yr(e,!1)}):Yr(e,t))},beforeUnmount(e,{value:t}){Yr(e,t)}};function Yr(e,t){e.style.display=t?e[ra]:"none",e[Qm]=!t}const Jm=Symbol("");function Aw(e){const t=mu();if(!t)return;const n=t.ut=(r=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(i=>ia(i,r))},s=()=>{const r=e(t.proxy);t.ce?ia(t.ce,r):mc(t.subTree,r),n(r)};Am(()=>{cm(s)}),Wn(()=>{ls(s,on,{flush:"post"});const r=new MutationObserver(s);r.observe(t.subTree.el.parentNode,{childList:!0}),Wi(()=>r.disconnect())})}function mc(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{mc(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)ia(e.el,t);else if(e.type===Ae)e.children.forEach(n=>mc(n,t));else if(e.type===di){let{el:n,anchor:s}=e;for(;n&&(ia(n,t),n!==s);)n=n.nextSibling}}function ia(e,t){if(e.nodeType===1){const n=e.style;let s="";for(const r in t){const i=xv(t[r]);n.setProperty(`--${r}`,i),s+=`--${r}: ${i};`}n[Jm]=s}}const Iw=/(^|;)\s*display\s*:/;function Sw(e,t,n){const s=e.style,r=Jt(n);let i=!1;if(n&&!r){if(t)if(Jt(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Uo(s,l,"")}else for(const o in t)n[o]==null&&Uo(s,o,"");for(const o in n)o==="display"&&(i=!0),Uo(s,o,n[o])}else if(r){if(t!==n){const o=s[Jm];o&&(n+=";"+o),s.cssText=n,i=Iw.test(n)}}else t&&e.removeAttribute("style");ra in e&&(e[ra]=i?s.display:"",e[Qm]&&(s.display="none"))}const xf=/\s*!important$/;function Uo(e,t,n){if(ft(n))n.forEach(s=>Uo(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Rw(e,t);xf.test(n)?e.setProperty(Ts(s),n.replace(xf,""),"important"):e[s]=n}}const Vf=["Webkit","Moz","ms"],Ml={};function Rw(e,t){const n=Ml[t];if(n)return n;let s=en(t);if(s!=="filter"&&s in e)return Ml[t]=s;s=Ra(s);for(let r=0;r<Vf.length;r++){const i=Vf[r]+s;if(i in e)return Ml[t]=i}return t}const kf="http://www.w3.org/1999/xlink";function Df(e,t,n,s,r,i=Rv(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(kf,t.slice(6,t.length)):e.setAttributeNS(kf,t,n):n==null||i&&!Bp(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Sn(n)?String(n):n)}function Of(e,t,n,s,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Gm(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Bp(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(r||t)}function Fs(e,t,n,s){e.addEventListener(t,n,s)}function Cw(e,t,n,s){e.removeEventListener(t,n,s)}const Nf=Symbol("_vei");function Pw(e,t,n,s,r=null){const i=e[Nf]||(e[Nf]={}),o=i[t];if(s&&o)o.value=s;else{const[l,c]=xw(t);if(s){const u=i[t]=Dw(s,r);Fs(e,l,u,c)}else o&&(Cw(e,l,o,c),i[t]=void 0)}}const Mf=/(?:Once|Passive|Capture)$/;function xw(e){let t;if(Mf.test(e)){t={};let s;for(;s=e.match(Mf);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ts(e.slice(2)),t]}let Ll=0;const Vw=Promise.resolve(),kw=()=>Ll||(Vw.then(()=>Ll=0),Ll=Date.now());function Dw(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;cn(Ow(s,n.value),t,5,[s])};return n.value=e,n.attached=kw(),n}function Ow(e,t){if(ft(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const Lf=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Nw=(e,t,n,s,r,i)=>{const o=r==="svg";t==="class"?Tw(e,s,o):t==="style"?Sw(e,n,s):Aa(t)?Yc(t)||Pw(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Mw(e,t,s,o))?(Of(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Df(e,t,s,o,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Jt(s))?Of(e,en(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Df(e,t,s,o))};function Mw(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Lf(t)&&_t(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Lf(t)&&Jt(n)?!1:t in e}const oa=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ft(t)?n=>No(t,n):t};function Lw(e){e.target.composing=!0}function Ff(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Er=Symbol("_assign"),Fw={created(e,{modifiers:{lazy:t,trim:n,number:s}},r){e[Er]=oa(r);const i=s||r.props&&r.props.type==="number";Fs(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=Qo(l)),e[Er](l)}),n&&Fs(e,"change",()=>{e.value=e.value.trim()}),t||(Fs(e,"compositionstart",Lw),Fs(e,"compositionend",Ff),Fs(e,"change",Ff))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(e[Er]=oa(o),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Qo(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||r&&e.value.trim()===c)||(e.value=c))}},Uw={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const r=Ia(t);Fs(e,"change",()=>{const i=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Qo(aa(o)):aa(o));e[Er](e.multiple?r?new Set(i):i:i[0]),e._assigning=!0,lu(()=>{e._assigning=!1})}),e[Er]=oa(s)},mounted(e,{value:t}){Uf(e,t)},beforeUpdate(e,t,n){e[Er]=oa(n)},updated(e,{value:t}){e._assigning||Uf(e,t)}};function Uf(e,t){const n=e.multiple,s=ft(t);if(!(n&&!s&&!Ia(t))){for(let r=0,i=e.options.length;r<i;r++){const o=e.options[r],l=aa(o);if(n)if(s){const c=typeof l;c==="string"||c==="number"?o.selected=t.some(u=>String(u)===String(l)):o.selected=Pv(t,l)>-1}else o.selected=t.has(l);else if(Pa(aa(o),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function aa(e){return"_value"in e?e._value:e.value}const Bw=["ctrl","shift","alt","meta"],$w={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Bw.some(n=>e[`${n}Key`]&&!t.includes(n))},mr=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<t.length;o++){const l=$w[t[o]];if(l&&l(r,t))return}return e(r,...i)})},jw={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qw=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=r=>{if(!("key"in r))return;const i=Ts(r.key);if(t.some(o=>o===i||jw[o]===i))return e(r)})},Hw=le({patchProp:Nw},pw);let Bf;function zw(){return Bf||(Bf=F0(Hw))}const Kw=(...e)=>{const t=zw().createApp(...e),{mount:n}=t;return t.mount=s=>{const r=Ww(s);if(!r)return;const i=t._component;!_t(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,Gw(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function Gw(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ww(e){return Jt(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ur=typeof document<"u";function Xm(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Qw(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Xm(e.default)}const kt=Object.assign;function Fl(e,t){const n={};for(const s in t){const r=t[s];n[s]=un(r)?r.map(e):e(r)}return n}const mi=()=>{},un=Array.isArray,Ym=/#/g,Jw=/&/g,Xw=/\//g,Yw=/=/g,Zw=/\?/g,Zm=/\+/g,t1=/%5B/g,e1=/%5D/g,tg=/%5E/g,n1=/%60/g,eg=/%7B/g,s1=/%7C/g,ng=/%7D/g,r1=/%20/g;function yu(e){return encodeURI(""+e).replace(s1,"|").replace(t1,"[").replace(e1,"]")}function i1(e){return yu(e).replace(eg,"{").replace(ng,"}").replace(tg,"^")}function gc(e){return yu(e).replace(Zm,"%2B").replace(r1,"+").replace(Ym,"%23").replace(Jw,"%26").replace(n1,"`").replace(eg,"{").replace(ng,"}").replace(tg,"^")}function o1(e){return gc(e).replace(Yw,"%3D")}function a1(e){return yu(e).replace(Ym,"%23").replace(Zw,"%3F")}function l1(e){return e==null?"":a1(e).replace(Xw,"%2F")}function Vi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const c1=/\/$/,u1=e=>e.replace(c1,"");function Ul(e,t,n="/"){let s,r={},i="",o="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(s=t.slice(0,c),i=t.slice(c+1,l>-1?l:t.length),r=e(i)),l>-1&&(s=s||t.slice(0,l),o=t.slice(l,t.length)),s=p1(s??t,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Vi(o)}}function h1(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function $f(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function f1(e,t,n){const s=t.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&br(t.matched[s],n.matched[r])&&sg(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function br(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function sg(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!d1(e[n],t[n]))return!1;return!0}function d1(e,t){return un(e)?jf(e,t):un(t)?jf(t,e):e===t}function jf(e,t){return un(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function p1(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const es={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ki;(function(e){e.pop="pop",e.push="push"})(ki||(ki={}));var gi;(function(e){e.back="back",e.forward="forward",e.unknown=""})(gi||(gi={}));function m1(e){if(!e)if(ur){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),u1(e)}const g1=/^[^#]+#/;function y1(e,t){return e.replace(g1,"#")+t}function _1(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Ba=()=>({left:window.scrollX,top:window.scrollY});function v1(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=_1(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function qf(e,t){return(history.state?history.state.position-t:-1)+e}const yc=new Map;function w1(e,t){yc.set(e,t)}function E1(e){const t=yc.get(e);return yc.delete(e),t}let T1=()=>location.protocol+"//"+location.host;function rg(e,t){const{pathname:n,search:s,hash:r}=t,i=e.indexOf("#");if(i>-1){let l=r.includes(e.slice(i))?e.slice(i).length:1,c=r.slice(l);return c[0]!=="/"&&(c="/"+c),$f(c,"")}return $f(n,e)+s+r}function b1(e,t,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const y=rg(e,location),T=n.value,C=t.value;let x=0;if(m){if(n.value=y,t.value=m,o&&o===T){o=null;return}x=C?m.position-C.position:0}else s(y);r.forEach(M=>{M(n.value,T,{delta:x,type:ki.pop,direction:x?x>0?gi.forward:gi.back:gi.unknown})})};function c(){o=n.value}function u(m){r.push(m);const y=()=>{const T=r.indexOf(m);T>-1&&r.splice(T,1)};return i.push(y),y}function h(){const{history:m}=window;m.state&&m.replaceState(kt({},m.state,{scroll:Ba()}),"")}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:d}}function Hf(e,t,n,s=!1,r=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:r?Ba():null}}function A1(e){const{history:t,location:n}=window,s={value:rg(e,n)},r={value:t.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const d=e.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+c:T1()+e+c;try{t[h?"replaceState":"pushState"](u,"",m),r.value=u}catch(y){console.error(y),n[h?"replace":"assign"](m)}}function o(c,u){const h=kt({},t.state,Hf(r.value.back,c,r.value.forward,!0),u,{position:r.value.position});i(c,h,!0),s.value=c}function l(c,u){const h=kt({},r.value,t.state,{forward:c,scroll:Ba()});i(h.current,h,!0);const d=kt({},Hf(s.value,c,null),{position:h.position+1},u);i(c,d,!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function I1(e){e=m1(e);const t=A1(e),n=b1(e,t.state,t.location,t.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=kt({location:"",base:e,go:s,createHref:y1.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function S1(e){return typeof e=="string"||e&&typeof e=="object"}function ig(e){return typeof e=="string"||typeof e=="symbol"}const og=Symbol("");var zf;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(zf||(zf={}));function Ar(e,t){return kt(new Error,{type:e,[og]:!0},t)}function On(e,t){return e instanceof Error&&og in e&&(t==null||!!(e.type&t))}const Kf="[^/]+?",R1={sensitive:!1,strict:!1,start:!0,end:!0},C1=/[.+*?^${}()[\]/\\]/g;function P1(e,t){const n=kt({},R1,t),s=[];let r=n.start?"^":"";const i=[];for(const u of e){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const m=u[d];let y=40+(n.sensitive?.25:0);if(m.type===0)d||(r+="/"),r+=m.value.replace(C1,"\\$&"),y+=40;else if(m.type===1){const{value:T,repeatable:C,optional:x,regexp:M}=m;i.push({name:T,repeatable:C,optional:x});const N=M||Kf;if(N!==Kf){y+=10;try{new RegExp(`(${N})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${T}" (${N}): `+H.message)}}let B=C?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;d||(B=x&&u.length<2?`(?:/${B})`:"/"+B),x&&(B+="?"),r+=B,y+=20,x&&(y+=-8),C&&(y+=-20),N===".*"&&(y+=-50)}h.push(y)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(u){const h=u.match(o),d={};if(!h)return null;for(let m=1;m<h.length;m++){const y=h[m]||"",T=i[m-1];d[T.name]=y&&T.repeatable?y.split("/"):y}return d}function c(u){let h="",d=!1;for(const m of e){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const y of m)if(y.type===0)h+=y.value;else if(y.type===1){const{value:T,repeatable:C,optional:x}=y,M=T in u?u[T]:"";if(un(M)&&!C)throw new Error(`Provided param "${T}" is an array but it is not repeatable (* or + modifiers)`);const N=un(M)?M.join("/"):M;if(!N)if(x)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${T}"`);h+=N}}return h||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function x1(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function ag(e,t){let n=0;const s=e.score,r=t.score;for(;n<s.length&&n<r.length;){const i=x1(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Gf(s))return 1;if(Gf(r))return-1}return r.length-s.length}function Gf(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const V1={type:0,value:""},k1=/[a-zA-Z0-9_]/;function D1(e){if(!e)return[[]];if(e==="/")return[[V1]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${n})/"${u}": ${y}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(u&&d(),o()):c===":"?(d(),n=1):m();break;case 4:m(),n=s;break;case 1:c==="("?n=2:k1.test(c)?m():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,h="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}function O1(e,t,n){const s=P1(D1(e.path),n),r=kt(s,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function N1(e,t){const n=[],s=new Map;t=Xf({strict:!1,end:!0,sensitive:!1},t);function r(d){return s.get(d)}function i(d,m,y){const T=!y,C=Qf(d);C.aliasOf=y&&y.record;const x=Xf(t,d),M=[C];if("alias"in d){const H=typeof d.alias=="string"?[d.alias]:d.alias;for(const nt of H)M.push(Qf(kt({},C,{components:y?y.record.components:C.components,path:nt,aliasOf:y?y.record:C})))}let N,B;for(const H of M){const{path:nt}=H;if(m&&nt[0]!=="/"){const st=m.record.path,S=st[st.length-1]==="/"?"":"/";H.path=m.record.path+(nt&&S+nt)}if(N=O1(H,m,x),y?y.alias.push(N):(B=B||N,B!==N&&B.alias.push(N),T&&d.name&&!Jf(N)&&o(d.name)),lg(N)&&c(N),C.children){const st=C.children;for(let S=0;S<st.length;S++)i(st[S],N,y&&y.children[S])}y=y||N}return B?()=>{o(B)}:mi}function o(d){if(ig(d)){const m=s.get(d);m&&(s.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return n}function c(d){const m=F1(d,n);n.splice(m,0,d),d.record.name&&!Jf(d)&&s.set(d.record.name,d)}function u(d,m){let y,T={},C,x;if("name"in d&&d.name){if(y=s.get(d.name),!y)throw Ar(1,{location:d});x=y.record.name,T=kt(Wf(m.params,y.keys.filter(B=>!B.optional).concat(y.parent?y.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),d.params&&Wf(d.params,y.keys.map(B=>B.name))),C=y.stringify(T)}else if(d.path!=null)C=d.path,y=n.find(B=>B.re.test(C)),y&&(T=y.parse(C),x=y.record.name);else{if(y=m.name?s.get(m.name):n.find(B=>B.re.test(m.path)),!y)throw Ar(1,{location:d,currentLocation:m});x=y.record.name,T=kt({},m.params,d.params),C=y.stringify(T)}const M=[];let N=y;for(;N;)M.unshift(N.record),N=N.parent;return{name:x,path:C,params:T,matched:M,meta:L1(M)}}e.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:r}}function Wf(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Qf(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:M1(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function M1(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function Jf(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function L1(e){return e.reduce((t,n)=>kt(t,n.meta),{})}function Xf(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function F1(e,t){let n=0,s=t.length;for(;n!==s;){const i=n+s>>1;ag(e,t[i])<0?s=i:n=i+1}const r=U1(e);return r&&(s=t.lastIndexOf(r,s-1)),s}function U1(e){let t=e;for(;t=t.parent;)if(lg(t)&&ag(e,t)===0)return t}function lg({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function B1(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(Zm," "),o=i.indexOf("="),l=Vi(o<0?i:i.slice(0,o)),c=o<0?null:Vi(i.slice(o+1));if(l in t){let u=t[l];un(u)||(u=t[l]=[u]),u.push(c)}else t[l]=c}return t}function Yf(e){let t="";for(let n in e){const s=e[n];if(n=o1(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(un(s)?s.map(i=>i&&gc(i)):[s&&gc(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function $1(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=un(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return t}const j1=Symbol(""),Zf=Symbol(""),$a=Symbol(""),cg=Symbol(""),_c=Symbol("");function Zr(){let e=[];function t(s){return e.push(s),()=>{const r=e.indexOf(s);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function rs(e,t,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(Ar(4,{from:n,to:t})):m instanceof Error?c(m):S1(m)?c(Ar(2,{from:t,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},h=i(()=>e.call(s&&s.instances[r],t,n,u));let d=Promise.resolve(h);e.length<3&&(d=d.then(u)),d.catch(m=>c(m))})}function Bl(e,t,n,s,r=i=>i()){const i=[];for(const o of e)for(const l in o.components){let c=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(Xm(c)){const h=(c.__vccOpts||c)[t];h&&i.push(rs(h,n,s,o,l,r))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=Qw(h)?h.default:h;o.mods[l]=h,o.components[l]=d;const y=(d.__vccOpts||d)[t];return y&&rs(y,n,s,o,l,r)()}))}}return i}function td(e){const t=vn($a),n=vn(cg),s=Qt(()=>{const c=Ks(e.to);return t.resolve(c)}),r=Qt(()=>{const{matched:c}=s.value,{length:u}=c,h=c[u-1],d=n.matched;if(!h||!d.length)return-1;const m=d.findIndex(br.bind(null,h));if(m>-1)return m;const y=ed(c[u-2]);return u>1&&ed(h)===y&&d[d.length-1].path!==y?d.findIndex(br.bind(null,c[u-2])):m}),i=Qt(()=>r.value>-1&&G1(n.params,s.value.params)),o=Qt(()=>r.value>-1&&r.value===n.matched.length-1&&sg(n.params,s.value.params));function l(c={}){if(K1(c)){const u=t[Ks(e.replace)?"replace":"push"](Ks(e.to)).catch(mi);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Qt(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function q1(e){return e.length===1?e[0]:e}const H1=Qe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:td,setup(e,{slots:t}){const n=Va(td(e)),{options:s}=vn($a),r=Qt(()=>({[nd(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[nd(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&q1(t.default(n));return e.custom?i:gu("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),z1=H1;function K1(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function G1(e,t){for(const n in t){const s=t[n],r=e[n];if(typeof s=="string"){if(s!==r)return!1}else if(!un(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function ed(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const nd=(e,t,n)=>e??t??n,W1=Qe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=vn(_c),r=Qt(()=>e.route||s.value),i=vn(Zf,0),o=Qt(()=>{let u=Ks(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),l=Qt(()=>r.value.matched[o.value]);Lo(Zf,Qt(()=>o.value+1)),Lo(j1,l),Lo(_c,r);const c=ne();return ls(()=>[c.value,l.value,e.name],([u,h,d],[m,y,T])=>{h&&(h.instances[d]=u,y&&y!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=y.leaveGuards),h.updateGuards.size||(h.updateGuards=y.updateGuards))),u&&h&&(!y||!br(h,y)||!m)&&(h.enterCallbacks[d]||[]).forEach(C=>C(u))},{flush:"post"}),()=>{const u=r.value,h=e.name,d=l.value,m=d&&d.components[h];if(!m)return sd(n.default,{Component:m,route:u});const y=d.props[h],T=y?y===!0?u.params:typeof y=="function"?y(u):y:null,x=gu(m,kt({},T,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(d.instances[h]=null)},ref:c}));return sd(n.default,{Component:x,route:u})||x}}});function sd(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const ug=W1;function Q1(e){const t=N1(e.routes,e),n=e.parseQuery||B1,s=e.stringifyQuery||Yf,r=e.history,i=Zr(),o=Zr(),l=Zr(),c=Yv(es);let u=es;ur&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Fl.bind(null,L=>""+L),d=Fl.bind(null,l1),m=Fl.bind(null,Vi);function y(L,tt){let J,rt;return ig(L)?(J=t.getRecordMatcher(L),rt=tt):rt=L,t.addRoute(rt,J)}function T(L){const tt=t.getRecordMatcher(L);tt&&t.removeRoute(tt)}function C(){return t.getRoutes().map(L=>L.record)}function x(L){return!!t.getRecordMatcher(L)}function M(L,tt){if(tt=kt({},tt||c.value),typeof L=="string"){const V=Ul(n,L,tt.path),F=t.resolve({path:V.path},tt),j=r.createHref(V.fullPath);return kt(V,F,{params:m(F.params),hash:Vi(V.hash),redirectedFrom:void 0,href:j})}let J;if(L.path!=null)J=kt({},L,{path:Ul(n,L.path,tt.path).path});else{const V=kt({},L.params);for(const F in V)V[F]==null&&delete V[F];J=kt({},L,{params:d(V)}),tt.params=d(tt.params)}const rt=t.resolve(J,tt),Pt=L.hash||"";rt.params=h(m(rt.params));const E=h1(s,kt({},L,{hash:i1(Pt),path:rt.path})),I=r.createHref(E);return kt({fullPath:E,hash:Pt,query:s===Yf?$1(L.query):L.query||{}},rt,{redirectedFrom:void 0,href:I})}function N(L){return typeof L=="string"?Ul(n,L,c.value.path):kt({},L)}function B(L,tt){if(u!==L)return Ar(8,{from:tt,to:L})}function H(L){return S(L)}function nt(L){return H(kt(N(L),{replace:!0}))}function st(L){const tt=L.matched[L.matched.length-1];if(tt&&tt.redirect){const{redirect:J}=tt;let rt=typeof J=="function"?J(L):J;return typeof rt=="string"&&(rt=rt.includes("?")||rt.includes("#")?rt=N(rt):{path:rt},rt.params={}),kt({query:L.query,hash:L.hash,params:rt.path!=null?{}:L.params},rt)}}function S(L,tt){const J=u=M(L),rt=c.value,Pt=L.state,E=L.force,I=L.replace===!0,V=st(J);if(V)return S(kt(N(V),{state:typeof V=="object"?kt({},Pt,V.state):Pt,force:E,replace:I}),tt||J);const F=J;F.redirectedFrom=tt;let j;return!E&&f1(s,rt,J)&&(j=Ar(16,{to:F,from:rt}),Pe(rt,rt,!0,!1)),(j?Promise.resolve(j):b(F,rt)).catch(U=>On(U)?On(U,2)?U:jt(U):dt(U,F,rt)).then(U=>{if(U){if(On(U,2))return S(kt({replace:I},N(U.to),{state:typeof U.to=="object"?kt({},Pt,U.to.state):Pt,force:E}),tt||F)}else U=A(F,rt,!0,I,Pt);return R(F,rt,U),U})}function v(L,tt){const J=B(L,tt);return J?Promise.reject(J):Promise.resolve()}function _(L){const tt=Qn.values().next().value;return tt&&typeof tt.runWithContext=="function"?tt.runWithContext(L):L()}function b(L,tt){let J;const[rt,Pt,E]=J1(L,tt);J=Bl(rt.reverse(),"beforeRouteLeave",L,tt);for(const V of rt)V.leaveGuards.forEach(F=>{J.push(rs(F,L,tt))});const I=v.bind(null,L,tt);return J.push(I),Ne(J).then(()=>{J=[];for(const V of i.list())J.push(rs(V,L,tt));return J.push(I),Ne(J)}).then(()=>{J=Bl(Pt,"beforeRouteUpdate",L,tt);for(const V of Pt)V.updateGuards.forEach(F=>{J.push(rs(F,L,tt))});return J.push(I),Ne(J)}).then(()=>{J=[];for(const V of E)if(V.beforeEnter)if(un(V.beforeEnter))for(const F of V.beforeEnter)J.push(rs(F,L,tt));else J.push(rs(V.beforeEnter,L,tt));return J.push(I),Ne(J)}).then(()=>(L.matched.forEach(V=>V.enterCallbacks={}),J=Bl(E,"beforeRouteEnter",L,tt,_),J.push(I),Ne(J))).then(()=>{J=[];for(const V of o.list())J.push(rs(V,L,tt));return J.push(I),Ne(J)}).catch(V=>On(V,8)?V:Promise.reject(V))}function R(L,tt,J){l.list().forEach(rt=>_(()=>rt(L,tt,J)))}function A(L,tt,J,rt,Pt){const E=B(L,tt);if(E)return E;const I=tt===es,V=ur?history.state:{};J&&(rt||I?r.replace(L.fullPath,kt({scroll:I&&V&&V.scroll},Pt)):r.push(L.fullPath,Pt)),c.value=L,Pe(L,tt,J,I),jt()}let w;function Z(){w||(w=r.listen((L,tt,J)=>{if(!fn.listening)return;const rt=M(L),Pt=st(rt);if(Pt){S(kt(Pt,{replace:!0,force:!0}),rt).catch(mi);return}u=rt;const E=c.value;ur&&w1(qf(E.fullPath,J.delta),Ba()),b(rt,E).catch(I=>On(I,12)?I:On(I,2)?(S(kt(N(I.to),{force:!0}),rt).then(V=>{On(V,20)&&!J.delta&&J.type===ki.pop&&r.go(-1,!1)}).catch(mi),Promise.reject()):(J.delta&&r.go(-J.delta,!1),dt(I,rt,E))).then(I=>{I=I||A(rt,E,!1),I&&(J.delta&&!On(I,8)?r.go(-J.delta,!1):J.type===ki.pop&&On(I,20)&&r.go(-1,!1)),R(rt,E,I)}).catch(mi)}))}let Y=Zr(),bt=Zr(),ot;function dt(L,tt,J){jt(L);const rt=bt.list();return rt.length?rt.forEach(Pt=>Pt(L,tt,J)):console.error(L),Promise.reject(L)}function te(){return ot&&c.value!==es?Promise.resolve():new Promise((L,tt)=>{Y.add([L,tt])})}function jt(L){return ot||(ot=!L,Z(),Y.list().forEach(([tt,J])=>L?J(L):tt()),Y.reset()),L}function Pe(L,tt,J,rt){const{scrollBehavior:Pt}=e;if(!ur||!Pt)return Promise.resolve();const E=!J&&E1(qf(L.fullPath,0))||(rt||!J)&&history.state&&history.state.scroll||null;return lu().then(()=>Pt(L,tt,E)).then(I=>I&&v1(I)).catch(I=>dt(I,L,tt))}const Ht=L=>r.go(L);let zt;const Qn=new Set,fn={currentRoute:c,listening:!0,addRoute:y,removeRoute:T,clearRoutes:t.clearRoutes,hasRoute:x,getRoutes:C,resolve:M,options:e,push:H,replace:nt,go:Ht,back:()=>Ht(-1),forward:()=>Ht(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:bt.add,isReady:te,install(L){const tt=this;L.component("RouterLink",z1),L.component("RouterView",ug),L.config.globalProperties.$router=tt,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>Ks(c)}),ur&&!zt&&c.value===es&&(zt=!0,H(r.location).catch(Pt=>{}));const J={};for(const Pt in es)Object.defineProperty(J,Pt,{get:()=>c.value[Pt],enumerable:!0});L.provide($a,tt),L.provide(cg,sm(J)),L.provide(_c,c);const rt=L.unmount;Qn.add(L),L.unmount=function(){Qn.delete(L),Qn.size<1&&(u=es,w&&w(),w=null,c.value=es,zt=!1,ot=!1),rt()}}};function Ne(L){return L.reduce((tt,J)=>tt.then(()=>_(J)),Promise.resolve())}return fn}function J1(e,t){const n=[],s=[],r=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const l=t.matched[o];l&&(e.matched.find(u=>br(u,l))?s.push(l):n.push(l));const c=e.matched[o];c&&(t.matched.find(u=>br(u,c))||r.push(c))}return[n,s,r]}function X1(){return vn($a)}const Y1={class:"loading-content"},Z1={class:"loading-text"},tE={class:"loading-message"},eE={class:"progress-bar"},nE=Qe({__name:"InitialLoading",emits:["loading-complete"],setup(e,{emit:t}){const n=t,s=ne(!1),r=ne(0),i=ne("..."),o=["...","...","...","...","..."];let l=0;const c=()=>{const h=(l+1)*20,d=setInterval(()=>{r.value<h?r.value+=Math.random()*3+1:(clearInterval(d),l<o.length-1?(l++,i.value=o[l],setTimeout(()=>c(),300)):setTimeout(()=>{s.value=!0,setTimeout(()=>{n("loading-complete")},1e3)},500))},50)},u=()=>{setTimeout(()=>{c()},500)};return Wn(()=>{u()}),(h,d)=>(ht(),gt("div",{id:"initial-loading",class:an(["initial-loading",{"loading-out":s.value}])},[P("div",Y1,[d[0]||(d[0]=na('<div class="logo-container" data-v-62f79310><div class="logo-icon" data-v-62f79310><svg viewBox="0 0 100 100" class="mai-logo" data-v-62f79310><circle cx="50" cy="40" r="25" fill="none" stroke="currentColor" stroke-width="3" data-v-62f79310></circle><circle cx="42" cy="35" r="3" fill="currentColor" data-v-62f79310></circle><circle cx="58" cy="35" r="3" fill="currentColor" data-v-62f79310></circle><path d="M 35 50 Q 50 60 65 50" stroke="currentColor" stroke-width="2" fill="none" data-v-62f79310></path><rect x="30" y="65" width="40" height="20" rx="10" fill="none" stroke="currentColor" stroke-width="2" data-v-62f79310></rect><circle cx="40" cy="75" r="2" fill="currentColor" data-v-62f79310></circle><circle cx="60" cy="75" r="2" fill="currentColor" data-v-62f79310></circle></svg></div><h1 class="loading-title" data-v-62f79310></h1><p class="loading-subtitle" data-v-62f79310>MaiMai Plugin Market</p></div><div class="loading-animation" data-v-62f79310><svg viewBox="0 0 50 50" class="loading-circle" data-v-62f79310><circle r="20" cx="25" cy="25" data-v-62f79310></circle></svg><div class="loading-dots" data-v-62f79310><span data-v-62f79310></span><span data-v-62f79310></span><span data-v-62f79310></span></div></div>',2)),P("div",Z1,[P("p",tE,Et(i.value),1),P("div",eE,[P("div",{class:"progress-fill",style:Ki({width:r.value+"%"})},null,4)])])]),d[1]||(d[1]=na('<div class="bg-decoration" data-v-62f79310><div class="floating-shapes" data-v-62f79310><div class="shape shape-1" data-v-62f79310></div><div class="shape shape-2" data-v-62f79310></div><div class="shape shape-3" data-v-62f79310></div><div class="shape shape-4" data-v-62f79310></div><div class="shape shape-5" data-v-62f79310></div></div></div>',1))],2))}}),bs=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n},sE=bs(nE,[["__scopeId","data-v-62f79310"]]),rE={id:"app"},iE=Qe({__name:"App",setup(e){const t=ne(!0),n=ne(!1),s=()=>{t.value=!1,setTimeout(()=>{n.value=!0},100)};return Wn(()=>{localStorage.getItem("mai-plugin-store-visited")?setTimeout(()=>{s()},100):localStorage.setItem("mai-plugin-store-visited","true")}),(r,i)=>(ht(),gt("div",rE,[t.value?(ht(),Fa(sE,{key:0,onLoadingComplete:s})):Yt("",!0),uu(P("div",{class:an(["main-content",{"content-visible":n.value}])},[qt(Ks(ug))],2),[[bw,!t.value]])]))}});function hg(e,t){return function(){return e.apply(t,arguments)}}const{toString:oE}=Object.prototype,{getPrototypeOf:_u}=Object,{iterator:ja,toStringTag:fg}=Symbol,qa=(e=>t=>{const n=oE.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),hn=e=>(e=e.toLowerCase(),t=>qa(t)===e),Ha=e=>t=>typeof t===e,{isArray:Vr}=Array,Di=Ha("undefined");function Xi(e){return e!==null&&!Di(e)&&e.constructor!==null&&!Di(e.constructor)&&Be(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const dg=hn("ArrayBuffer");function aE(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&dg(e.buffer),t}const lE=Ha("string"),Be=Ha("function"),pg=Ha("number"),Yi=e=>e!==null&&typeof e=="object",cE=e=>e===!0||e===!1,Bo=e=>{if(qa(e)!=="object")return!1;const t=_u(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(fg in e)&&!(ja in e)},uE=e=>{if(!Yi(e)||Xi(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},hE=hn("Date"),fE=hn("File"),dE=hn("Blob"),pE=hn("FileList"),mE=e=>Yi(e)&&Be(e.pipe),gE=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Be(e.append)&&((t=qa(e))==="formdata"||t==="object"&&Be(e.toString)&&e.toString()==="[object FormData]"))},yE=hn("URLSearchParams"),[_E,vE,wE,EE]=["ReadableStream","Request","Response","Headers"].map(hn),TE=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zi(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Vr(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Xi(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function mg(e,t){if(Xi(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const js=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gg=e=>!Di(e)&&e!==js;function vc(){const{caseless:e}=gg(this)&&this||{},t={},n=(s,r)=>{const i=e&&mg(t,r)||r;Bo(t[i])&&Bo(s)?t[i]=vc(t[i],s):Bo(s)?t[i]=vc({},s):Vr(s)?t[i]=s.slice():t[i]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Zi(arguments[s],n);return t}const bE=(e,t,n,{allOwnKeys:s}={})=>(Zi(t,(r,i)=>{n&&Be(r)?e[i]=hg(r,n):e[i]=r},{allOwnKeys:s}),e),AE=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),IE=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},SE=(e,t,n,s)=>{let r,i,o;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&_u(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},RE=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},CE=e=>{if(!e)return null;if(Vr(e))return e;let t=e.length;if(!pg(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},PE=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&_u(Uint8Array)),xE=(e,t)=>{const s=(e&&e[ja]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},VE=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},kE=hn("HTMLFormElement"),DE=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),rd=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),OE=hn("RegExp"),yg=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Zi(n,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(s[i]=o||r)}),Object.defineProperties(e,s)},NE=e=>{yg(e,(t,n)=>{if(Be(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Be(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},ME=(e,t)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return Vr(e)?s(e):s(String(e).split(t)),n},LE=()=>{},FE=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function UE(e){return!!(e&&Be(e.append)&&e[fg]==="FormData"&&e[ja])}const BE=e=>{const t=new Array(10),n=(s,r)=>{if(Yi(s)){if(t.indexOf(s)>=0)return;if(Xi(s))return s;if(!("toJSON"in s)){t[r]=s;const i=Vr(s)?[]:{};return Zi(s,(o,l)=>{const c=n(o,r+1);!Di(c)&&(i[l]=c)}),t[r]=void 0,i}}return s};return n(e,0)},$E=hn("AsyncFunction"),jE=e=>e&&(Yi(e)||Be(e))&&Be(e.then)&&Be(e.catch),_g=((e,t)=>e?setImmediate:t?((n,s)=>(js.addEventListener("message",({source:r,data:i})=>{r===js&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),js.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Be(js.postMessage)),qE=typeof queueMicrotask<"u"?queueMicrotask.bind(js):typeof process<"u"&&process.nextTick||_g,HE=e=>e!=null&&Be(e[ja]),D={isArray:Vr,isArrayBuffer:dg,isBuffer:Xi,isFormData:gE,isArrayBufferView:aE,isString:lE,isNumber:pg,isBoolean:cE,isObject:Yi,isPlainObject:Bo,isEmptyObject:uE,isReadableStream:_E,isRequest:vE,isResponse:wE,isHeaders:EE,isUndefined:Di,isDate:hE,isFile:fE,isBlob:dE,isRegExp:OE,isFunction:Be,isStream:mE,isURLSearchParams:yE,isTypedArray:PE,isFileList:pE,forEach:Zi,merge:vc,extend:bE,trim:TE,stripBOM:AE,inherits:IE,toFlatObject:SE,kindOf:qa,kindOfTest:hn,endsWith:RE,toArray:CE,forEachEntry:xE,matchAll:VE,isHTMLForm:kE,hasOwnProperty:rd,hasOwnProp:rd,reduceDescriptors:yg,freezeMethods:NE,toObjectSet:ME,toCamelCase:DE,noop:LE,toFiniteNumber:FE,findKey:mg,global:js,isContextDefined:gg,isSpecCompliantForm:UE,toJSONObject:BE,isAsyncFn:$E,isThenable:jE,setImmediate:_g,asap:qE,isIterable:HE};function Tt(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}D.inherits(Tt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const vg=Tt.prototype,wg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wg[e]={value:e}});Object.defineProperties(Tt,wg);Object.defineProperty(vg,"isAxiosError",{value:!0});Tt.from=(e,t,n,s,r,i)=>{const o=Object.create(vg);return D.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Tt.call(o,e.message,t,n,s,r),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const zE=null;function wc(e){return D.isPlainObject(e)||D.isArray(e)}function Eg(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function id(e,t,n){return e?e.concat(t).map(function(r,i){return r=Eg(r),!n&&i?"["+r+"]":r}).join(n?".":""):t}function KE(e){return D.isArray(e)&&!e.some(wc)}const GE=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function za(e,t,n){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,x){return!D.isUndefined(x[C])});const s=n.metaTokens,r=n.visitor||h,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(r))throw new TypeError("visitor must be a function");function u(T){if(T===null)return"";if(D.isDate(T))return T.toISOString();if(D.isBoolean(T))return T.toString();if(!c&&D.isBlob(T))throw new Tt("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(T)||D.isTypedArray(T)?c&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function h(T,C,x){let M=T;if(T&&!x&&typeof T=="object"){if(D.endsWith(C,"{}"))C=s?C:C.slice(0,-2),T=JSON.stringify(T);else if(D.isArray(T)&&KE(T)||(D.isFileList(T)||D.endsWith(C,"[]"))&&(M=D.toArray(T)))return C=Eg(C),M.forEach(function(B,H){!(D.isUndefined(B)||B===null)&&t.append(o===!0?id([C],H,i):o===null?C:C+"[]",u(B))}),!1}return wc(T)?!0:(t.append(id(x,C,i),u(T)),!1)}const d=[],m=Object.assign(GE,{defaultVisitor:h,convertValue:u,isVisitable:wc});function y(T,C){if(!D.isUndefined(T)){if(d.indexOf(T)!==-1)throw Error("Circular reference detected in "+C.join("."));d.push(T),D.forEach(T,function(M,N){(!(D.isUndefined(M)||M===null)&&r.call(t,M,D.isString(N)?N.trim():N,C,m))===!0&&y(M,C?C.concat(N):[N])}),d.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return y(e),t}function od(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function vu(e,t){this._pairs=[],e&&za(e,this,t)}const Tg=vu.prototype;Tg.append=function(t,n){this._pairs.push([t,n])};Tg.toString=function(t){const n=t?function(s){return t.call(this,s,od)}:od;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function WE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bg(e,t,n){if(!t)return e;const s=n&&n.encode||WE;D.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(t,n):i=D.isURLSearchParams(t)?t.toString():new vu(t,n).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class ad{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Ag={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},QE=typeof URLSearchParams<"u"?URLSearchParams:vu,JE=typeof FormData<"u"?FormData:null,XE=typeof Blob<"u"?Blob:null,YE={isBrowser:!0,classes:{URLSearchParams:QE,FormData:JE,Blob:XE},protocols:["http","https","file","blob","url","data"]},wu=typeof window<"u"&&typeof document<"u",Ec=typeof navigator=="object"&&navigator||void 0,ZE=wu&&(!Ec||["ReactNative","NativeScript","NS"].indexOf(Ec.product)<0),tT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",eT=wu&&window.location.href||"http://localhost",nT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:wu,hasStandardBrowserEnv:ZE,hasStandardBrowserWebWorkerEnv:tT,navigator:Ec,origin:eT},Symbol.toStringTag,{value:"Module"})),Re={...nT,...YE};function sT(e,t){return za(e,new Re.classes.URLSearchParams,{visitor:function(n,s,r,i){return Re.isNode&&D.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function rT(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function iT(e){const t={},n=Object.keys(e);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],t[i]=e[i];return t}function Ig(e){function t(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&D.isArray(r)?r.length:o,c?(D.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!D.isObject(r[o]))&&(r[o]=[]),t(n,s,r[o],i)&&D.isArray(r[o])&&(r[o]=iT(r[o])),!l)}if(D.isFormData(e)&&D.isFunction(e.entries)){const n={};return D.forEachEntry(e,(s,r)=>{t(rT(s),r,n,0)}),n}return null}function oT(e,t,n){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const to={transitional:Ag,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=D.isObject(t);if(i&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return r?JSON.stringify(Ig(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return sT(t,this.formSerializer).toString();if((l=D.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return za(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),oT(t)):t}],transformResponse:[function(t){const n=this.transitional||to.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?Tt.from(l,Tt.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Re.classes.FormData,Blob:Re.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{to.headers[e]={}});const aT=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lT=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||t[n]&&aT[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},ld=Symbol("internals");function ti(e){return e&&String(e).trim().toLowerCase()}function $o(e){return e===!1||e==null?e:D.isArray(e)?e.map($o):String(e)}function cT(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const uT=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function $l(e,t,n,s,r){if(D.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!D.isString(t)){if(D.isString(s))return t.indexOf(s)!==-1;if(D.isRegExp(s))return s.test(t)}}function hT(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function fT(e,t){const n=D.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,i,o){return this[s].call(this,t,r,i,o)},configurable:!0})})}let $e=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function i(l,c,u){const h=ti(c);if(!h)throw new Error("header name must be a non-empty string");const d=D.findKey(r,h);(!d||r[d]===void 0||u===!0||u===void 0&&r[d]!==!1)&&(r[d||c]=$o(l))}const o=(l,c)=>D.forEach(l,(u,h)=>i(u,h,c));if(D.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(D.isString(t)&&(t=t.trim())&&!uT(t))o(lT(t),n);else if(D.isObject(t)&&D.isIterable(t)){let l={},c,u;for(const h of t){if(!D.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?D.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,n)}else t!=null&&i(n,t,s);return this}get(t,n){if(t=ti(t),t){const s=D.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return cT(r);if(D.isFunction(n))return n.call(this,r,s);if(D.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ti(t),t){const s=D.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||$l(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function i(o){if(o=ti(o),o){const l=D.findKey(s,o);l&&(!n||$l(s,s[l],l,n))&&(delete s[l],r=!0)}}return D.isArray(t)?t.forEach(i):i(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!t||$l(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const n=this,s={};return D.forEach(this,(r,i)=>{const o=D.findKey(s,i);if(o){n[o]=$o(r),delete n[i];return}const l=t?hT(i):String(i).trim();l!==i&&delete n[i],n[l]=$o(r),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return D.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&D.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[ld]=this[ld]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=ti(o);s[l]||(fT(r,o),s[l]=!0)}return D.isArray(t)?t.forEach(i):i(t),this}};$e.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors($e.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});D.freezeMethods($e);function jl(e,t){const n=this||to,s=t||n,r=$e.from(s.headers);let i=s.data;return D.forEach(e,function(l){i=l.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function Sg(e){return!!(e&&e.__CANCEL__)}function kr(e,t,n){Tt.call(this,e??"canceled",Tt.ERR_CANCELED,t,n),this.name="CanceledError"}D.inherits(kr,Tt,{__CANCEL__:!0});function Rg(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new Tt("Request failed with status code "+n.status,[Tt.ERR_BAD_REQUEST,Tt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function dT(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function pT(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),h=s[i];o||(o=u),n[r]=c,s[r]=u;let d=i,m=0;for(;d!==r;)m+=n[d++],d=d%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),u-o<t)return;const y=h&&u-h;return y?Math.round(m*1e3/y):void 0}}function mT(e,t){let n=0,s=1e3/t,r,i;const o=(u,h=Date.now())=>{n=h,r=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const h=Date.now(),d=h-n;d>=s?o(u,h):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},s-d)))},()=>r&&o(r)]}const la=(e,t,n=3)=>{let s=0;const r=pT(50,250);return mT(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,u=r(c),h=o<=l;s=o;const d={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(d)},n)},cd=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},ud=e=>(...t)=>D.asap(()=>e(...t)),gT=Re.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Re.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Re.origin),Re.navigator&&/(msie|trident)/i.test(Re.navigator.userAgent)):()=>!0,yT=Re.hasStandardBrowserEnv?{write(e,t,n,s,r,i){const o=[e+"="+encodeURIComponent(t)];D.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),D.isString(s)&&o.push("path="+s),D.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _T(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function vT(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Cg(e,t,n){let s=!_T(t);return e&&(s||n==!1)?vT(e,t):t}const hd=e=>e instanceof $e?{...e}:e;function Qs(e,t){t=t||{};const n={};function s(u,h,d,m){return D.isPlainObject(u)&&D.isPlainObject(h)?D.merge.call({caseless:m},u,h):D.isPlainObject(h)?D.merge({},h):D.isArray(h)?h.slice():h}function r(u,h,d,m){if(D.isUndefined(h)){if(!D.isUndefined(u))return s(void 0,u,d,m)}else return s(u,h,d,m)}function i(u,h){if(!D.isUndefined(h))return s(void 0,h)}function o(u,h){if(D.isUndefined(h)){if(!D.isUndefined(u))return s(void 0,u)}else return s(void 0,h)}function l(u,h,d){if(d in t)return s(u,h);if(d in e)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,h,d)=>r(hd(u),hd(h),d,!0)};return D.forEach(Object.keys({...e,...t}),function(h){const d=c[h]||r,m=d(e[h],t[h],h);D.isUndefined(m)&&d!==l||(n[h]=m)}),n}const Pg=e=>{const t=Qs({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=$e.from(o),t.url=bg(Cg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(D.isFormData(n)){if(Re.hasStandardBrowserEnv||Re.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...h]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(Re.hasStandardBrowserEnv&&(s&&D.isFunction(s)&&(s=s(t)),s||s!==!1&&gT(t.url))){const u=r&&i&&yT.read(i);u&&o.set(r,u)}return t},wT=typeof XMLHttpRequest<"u",ET=wT&&function(e){return new Promise(function(n,s){const r=Pg(e);let i=r.data;const o=$e.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=r,h,d,m,y,T;function C(){y&&y(),T&&T(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let x=new XMLHttpRequest;x.open(r.method.toUpperCase(),r.url,!0),x.timeout=r.timeout;function M(){if(!x)return;const B=$e.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),nt={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:B,config:e,request:x};Rg(function(S){n(S),C()},function(S){s(S),C()},nt),x=null}"onloadend"in x?x.onloadend=M:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(M)},x.onabort=function(){x&&(s(new Tt("Request aborted",Tt.ECONNABORTED,e,x)),x=null)},x.onerror=function(){s(new Tt("Network Error",Tt.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let H=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const nt=r.transitional||Ag;r.timeoutErrorMessage&&(H=r.timeoutErrorMessage),s(new Tt(H,nt.clarifyTimeoutError?Tt.ETIMEDOUT:Tt.ECONNABORTED,e,x)),x=null},i===void 0&&o.setContentType(null),"setRequestHeader"in x&&D.forEach(o.toJSON(),function(H,nt){x.setRequestHeader(nt,H)}),D.isUndefined(r.withCredentials)||(x.withCredentials=!!r.withCredentials),l&&l!=="json"&&(x.responseType=r.responseType),u&&([m,T]=la(u,!0),x.addEventListener("progress",m)),c&&x.upload&&([d,y]=la(c),x.upload.addEventListener("progress",d),x.upload.addEventListener("loadend",y)),(r.cancelToken||r.signal)&&(h=B=>{x&&(s(!B||B.type?new kr(null,e,x):B),x.abort(),x=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const N=dT(r.url);if(N&&Re.protocols.indexOf(N)===-1){s(new Tt("Unsupported protocol "+N+":",Tt.ERR_BAD_REQUEST,e));return}x.send(i||null)})},TT=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const i=function(u){if(!r){r=!0,l();const h=u instanceof Error?u:this.reason;s.abort(h instanceof Tt?h:new kr(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,i(new Tt(`timeout ${t} of ms exceeded`,Tt.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>D.asap(l),c}},bT=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},AT=async function*(e,t){for await(const n of IT(e))yield*bT(n,t)},IT=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},fd=(e,t,n,s)=>{const r=AT(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await r.next();if(u){l(),c.close();return}let d=h.byteLength;if(n){let m=i+=d;n(m)}c.enqueue(new Uint8Array(h))}catch(u){throw l(u),u}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},Ka=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",xg=Ka&&typeof ReadableStream=="function",ST=Ka&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Vg=(e,...t)=>{try{return!!e(...t)}catch{return!1}},RT=xg&&Vg(()=>{let e=!1;const t=new Request(Re.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),dd=64*1024,Tc=xg&&Vg(()=>D.isReadableStream(new Response("").body)),ca={stream:Tc&&(e=>e.body)};Ka&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ca[t]&&(ca[t]=D.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new Tt(`Response type '${t}' is not supported`,Tt.ERR_NOT_SUPPORT,s)})})})(new Response);const CT=async e=>{if(e==null)return 0;if(D.isBlob(e))return e.size;if(D.isSpecCompliantForm(e))return(await new Request(Re.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(D.isArrayBufferView(e)||D.isArrayBuffer(e))return e.byteLength;if(D.isURLSearchParams(e)&&(e=e+""),D.isString(e))return(await ST(e)).byteLength},PT=async(e,t)=>{const n=D.toFiniteNumber(e.getContentLength());return n??CT(t)},xT=Ka&&(async e=>{let{url:t,method:n,data:s,signal:r,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:h,withCredentials:d="same-origin",fetchOptions:m}=Pg(e);u=u?(u+"").toLowerCase():"text";let y=TT([r,i&&i.toAbortSignal()],o),T;const C=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let x;try{if(c&&RT&&n!=="get"&&n!=="head"&&(x=await PT(h,s))!==0){let nt=new Request(t,{method:"POST",body:s,duplex:"half"}),st;if(D.isFormData(s)&&(st=nt.headers.get("content-type"))&&h.setContentType(st),nt.body){const[S,v]=cd(x,la(ud(c)));s=fd(nt.body,dd,S,v)}}D.isString(d)||(d=d?"include":"omit");const M="credentials"in Request.prototype;T=new Request(t,{...m,signal:y,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:s,duplex:"half",credentials:M?d:void 0});let N=await fetch(T,m);const B=Tc&&(u==="stream"||u==="response");if(Tc&&(l||B&&C)){const nt={};["status","statusText","headers"].forEach(_=>{nt[_]=N[_]});const st=D.toFiniteNumber(N.headers.get("content-length")),[S,v]=l&&cd(st,la(ud(l),!0))||[];N=new Response(fd(N.body,dd,S,()=>{v&&v(),C&&C()}),nt)}u=u||"text";let H=await ca[D.findKey(ca,u)||"text"](N,e);return!B&&C&&C(),await new Promise((nt,st)=>{Rg(nt,st,{data:H,headers:$e.from(N.headers),status:N.status,statusText:N.statusText,config:e,request:T})})}catch(M){throw C&&C(),M&&M.name==="TypeError"&&/Load failed|fetch/i.test(M.message)?Object.assign(new Tt("Network Error",Tt.ERR_NETWORK,e,T),{cause:M.cause||M}):Tt.from(M,M&&M.code,e,T)}}),bc={http:zE,xhr:ET,fetch:xT};D.forEach(bc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const pd=e=>`- ${e}`,VT=e=>D.isFunction(e)||e===null||e===!1,kg={getAdapter:e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let n,s;const r={};for(let i=0;i<t;i++){n=e[i];let o;if(s=n,!VT(n)&&(s=bc[(o=String(n)).toLowerCase()],s===void 0))throw new Tt(`Unknown adapter '${o}'`);if(s)break;r[o||"#"+i]=s}if(!s){const i=Object.entries(r).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(pd).join(`
`):" "+pd(i[0]):"as no adapter specified";throw new Tt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:bc};function ql(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new kr(null,e)}function md(e){return ql(e),e.headers=$e.from(e.headers),e.data=jl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),kg.getAdapter(e.adapter||to.adapter)(e).then(function(s){return ql(e),s.data=jl.call(e,e.transformResponse,s),s.headers=$e.from(s.headers),s},function(s){return Sg(s)||(ql(e),s&&s.response&&(s.response.data=jl.call(e,e.transformResponse,s.response),s.response.headers=$e.from(s.response.headers))),Promise.reject(s)})}const Dg="1.11.0",Ga={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ga[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const gd={};Ga.transitional=function(t,n,s){function r(i,o){return"[Axios v"+Dg+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new Tt(r(o," has been removed"+(n?" in "+n:"")),Tt.ERR_DEPRECATED);return n&&!gd[o]&&(gd[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,l):!0}};Ga.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function kT(e,t,n){if(typeof e!="object")throw new Tt("options must be an object",Tt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new Tt("option "+i+" must be "+c,Tt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Tt("Unknown option "+i,Tt.ERR_BAD_OPTION)}}const jo={assertOptions:kT,validators:Ga},pn=jo.validators;let Gs=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ad,response:new ad}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Qs(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&jo.assertOptions(s,{silentJSONParsing:pn.transitional(pn.boolean),forcedJSONParsing:pn.transitional(pn.boolean),clarifyTimeoutError:pn.transitional(pn.boolean)},!1),r!=null&&(D.isFunction(r)?n.paramsSerializer={serialize:r}:jo.assertOptions(r,{encode:pn.function,serialize:pn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),jo.assertOptions(n,{baseUrl:pn.spelling("baseURL"),withXsrfToken:pn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&D.merge(i.common,i[n.method]);i&&D.forEach(["delete","get","head","post","put","patch","common"],T=>{delete i[T]}),n.headers=$e.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(n)===!1||(c=c&&C.synchronous,l.unshift(C.fulfilled,C.rejected))});const u=[];this.interceptors.response.forEach(function(C){u.push(C.fulfilled,C.rejected)});let h,d=0,m;if(!c){const T=[md.bind(this),void 0];for(T.unshift(...l),T.push(...u),m=T.length,h=Promise.resolve(n);d<m;)h=h.then(T[d++],T[d++]);return h}m=l.length;let y=n;for(d=0;d<m;){const T=l[d++],C=l[d++];try{y=T(y)}catch(x){C.call(this,x);break}}try{h=md.call(this,y)}catch(T){return Promise.reject(T)}for(d=0,m=u.length;d<m;)h=h.then(u[d++],u[d++]);return h}getUri(t){t=Qs(this.defaults,t);const n=Cg(t.baseURL,t.url,t.allowAbsoluteUrls);return bg(n,t.params,t.paramsSerializer)}};D.forEach(["delete","get","head","options"],function(t){Gs.prototype[t]=function(n,s){return this.request(Qs(s||{},{method:t,url:n,data:(s||{}).data}))}});D.forEach(["post","put","patch"],function(t){function n(s){return function(i,o,l){return this.request(Qs(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Gs.prototype[t]=n(),Gs.prototype[t+"Form"]=n(!0)});let DT=class Og{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new kr(i,o,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Og(function(r){t=r}),cancel:t}}};function OT(e){return function(n){return e.apply(null,n)}}function NT(e){return D.isObject(e)&&e.isAxiosError===!0}const Ac={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ac).forEach(([e,t])=>{Ac[t]=e});function Ng(e){const t=new Gs(e),n=hg(Gs.prototype.request,t);return D.extend(n,Gs.prototype,t,{allOwnKeys:!0}),D.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return Ng(Qs(e,r))},n}const Zt=Ng(to);Zt.Axios=Gs;Zt.CanceledError=kr;Zt.CancelToken=DT;Zt.isCancel=Sg;Zt.VERSION=Dg;Zt.toFormData=za;Zt.AxiosError=Tt;Zt.Cancel=Zt.CanceledError;Zt.all=function(t){return Promise.all(t)};Zt.spread=OT;Zt.isAxiosError=NT;Zt.mergeConfig=Qs;Zt.AxiosHeaders=$e;Zt.formToJSON=e=>Ig(D.isHTMLForm(e)?new FormData(e):e);Zt.getAdapter=kg.getAdapter;Zt.HttpStatusCode=Ac;Zt.default=Zt;const{Axios:Tx,AxiosError:bx,CanceledError:Ax,isCancel:Ix,CancelToken:Sx,VERSION:Rx,all:Cx,Cancel:Px,isAxiosError:xx,spread:Vx,toFormData:kx,AxiosHeaders:Dx,HttpStatusCode:Ox,formToJSON:Nx,getAdapter:Mx,mergeConfig:Lx}=Zt,MT="https://raw.githubusercontent.com/DrSmoothl/plugin-repo/refs/heads/main",yd={:"Group Management",:"Entertainment & Interaction",:"Utility Tools",:"Content Generation",:"Multimedia",:"External Integration",:"Data Analysis & Insights",:"Other"},Hl={"Group Management":"","Entertainment & Interaction":"","Utility Tools":"","Content Generation":"",Multimedia:"","External Integration":"","Data Analysis & Insights":"",Other:""},Us=class Us{constructor(){Vn(this,"plugins",[]);Vn(this,"loading",!1)}static getInstance(){return Us.instance||(Us.instance=new Us),Us.instance}async fetchPlugins(){if(this.loading)return this.plugins;try{this.loading=!0;const t=await Zt.get(`${MT}/plugin_details.json`);return this.plugins=t.data.map(n=>({...n,categoryDisplay:this.getCategoryDisplay(n)})),this.plugins}catch(t){throw console.error(":",t),new Error("")}finally{this.loading=!1}}getCategoryDisplay(t){const n=t.manifest.categories||[];for(const s of n)if(Hl[s])return Hl[s];for(const s of n)if(yd[s])return Hl[yd[s]];return""}compareVersions(t,n){const s=t.split(".").map(Number),r=n.split(".").map(Number),i=Math.max(s.length,r.length);for(let o=0;o<i;o++){const l=s[o]||0,c=r[o]||0;if(l>c)return 1;if(l<c)return-1}return 0}isPluginCompatible(t,n){const s=t.manifest.host_application.min_version,r=t.manifest.host_application.max_version;return!(this.compareVersions(n,s)<0||r&&this.compareVersions(n,r)>0)}getPluginsByCategory(t){return!t||t===""?this.plugins:this.plugins.filter(n=>n.categoryDisplay===t)}getPluginsByVersion(t){return t?this.plugins.filter(n=>this.isPluginCompatible(n,t)):this.plugins}searchPlugins(t){if(!t.trim())return this.plugins;const n=t.toLowerCase();return this.plugins.filter(s=>s.manifest.name.toLowerCase().includes(n)||s.manifest.description.toLowerCase().includes(n)||s.manifest.author.name.toLowerCase().includes(n)||(s.manifest.keywords||[]).some(r=>r.toLowerCase().includes(n)))}filterPlugins(t){let n=this.plugins;if(t.category&&t.category!==""&&(n=n.filter(s=>s.categoryDisplay===t.category)),t.version&&t.version.trim()&&(n=n.filter(s=>this.isPluginCompatible(s,t.version))),t.searchQuery&&t.searchQuery.trim()){const s=t.searchQuery.toLowerCase();n=n.filter(r=>r.manifest.name.toLowerCase().includes(s)||r.manifest.description.toLowerCase().includes(s)||r.manifest.author.name.toLowerCase().includes(s)||(r.manifest.keywords||[]).some(i=>i.toLowerCase().includes(s)))}return n}getAllCategories(){if(this.plugins.length===0)return["","","","","","","","",""];const t=new Set;return this.plugins.forEach(n=>{t.add(n.categoryDisplay)}),["",...Array.from(t).sort()]}getAllVersions(){const t=new Set;return this.plugins.forEach(n=>{const s=n.manifest.host_application.min_version;t.add(s)}),Array.from(t).sort((n,s)=>this.compareVersions(n,s))}getPluginCount(){return this.plugins.length}isLoading(){return this.loading}};Vn(Us,"instance");let Ic=Us;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=()=>{};var _d={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},FT=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=e[n++],o=e[n++],l=e[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;t[s++]=String.fromCharCode(55296+(c>>10)),t[s++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],o=e[n++];t[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return t.join("")},Lg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const i=e[r],o=r+1<e.length,l=o?e[r+1]:0,c=r+2<e.length,u=c?e[r+2]:0,h=i>>2,d=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(m=64)),s.push(n[h],n[d],n[m],n[y])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Mg(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):FT(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const i=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const u=r<e.length?n[e.charAt(r)]:64;++r;const d=r<e.length?n[e.charAt(r)]:64;if(++r,i==null||l==null||u==null||d==null)throw new UT;const m=i<<2|l>>4;if(s.push(m),u!==64){const y=l<<4&240|u>>2;if(s.push(y),d!==64){const T=u<<6&192|d;s.push(T)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class UT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BT=function(e){const t=Mg(e);return Lg.encodeByteArray(t,!0)},ua=function(e){return BT(e).replace(/\./g,"")},$T=function(e){try{return Lg.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=()=>jT().__FIREBASE_DEFAULTS__,HT=()=>{if(typeof process>"u"||typeof _d>"u")return;const e=_d.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},zT=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&$T(e[1]);return t&&JSON.parse(t)},Eu=()=>{try{return LT()||qT()||HT()||zT()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},KT=e=>{var t,n;return(n=(t=Eu())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},GT=e=>{const t=KT(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Fg=()=>{var e;return(e=Eu())==null?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function QT(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ua(JSON.stringify(n)),ua(JSON.stringify(o)),""].join(".")}const yi={};function XT(){const e={prod:[],emulator:[]};for(const t of Object.keys(yi))yi[t]?e.emulator.push(t):e.prod.push(t);return e}function YT(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let vd=!1;function ZT(e,t){if(typeof window>"u"||typeof document>"u"||!Tu(window.location.host)||yi[e]===t||yi[e]||vd)return;yi[e]=t;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=XT().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{vd=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=YT(s),y=n("text"),T=document.getElementById(y)||document.createElement("span"),C=n("learnmore"),x=document.getElementById(C)||document.createElement("a"),M=n("preprendIcon"),N=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const B=m.element;l(B),h(x,C);const H=u();c(N,M),B.append(N,T,x,H),document.body.appendChild(B)}i?(T.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eb(){var t;const e=(t=Eu())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nb(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function sb(){return!eb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ug(){try{return typeof indexedDB=="object"}catch{return!1}}function Bg(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;t(((i=r.error)==null?void 0:i.message)||"")}}catch(n){t(n)}})}function rb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="FirebaseError";class As extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=ib,Object.setPrototypeOf(this,As.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wa.prototype.create)}}class Wa{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},r=`${this.service}/${t}`,i=this.errors[t],o=i?ob(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new As(r,l,s)}}function ob(e,t){return e.replace(ab,(n,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const ab=/\{\$([^}]+)}/g;function Oi(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const i=e[r],o=t[r];if(wd(i)&&wd(o)){if(!Oi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function wd(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=1e3,cb=2,ub=4*60*60*1e3,hb=.5;function Ed(e,t=lb,n=cb){const s=t*Math.pow(n,e),r=Math.round(hb*s*(Math.random()-.5)*2);return Math.min(ub,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(e){return e&&e._delegate?e._delegate:e}class qn{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new WT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(pb(t))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(t=Ms){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ms){return this.instances.has(t)}getOptions(t=Ms){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(t),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&t(i,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:db(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ms){return this.component?this.component.multipleInstances?t:Ms:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function db(e){return e===Ms?void 0:e}function pb(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new fb(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ct||(Ct={}));const gb={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},yb=Ct.INFO,_b={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},vb=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),r=_b[t];if(r)console[r](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bu{constructor(t){this.name=t,this._logLevel=yb,this._logHandler=vb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ct))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?gb[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...t),this._logHandler(this,Ct.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...t),this._logHandler(this,Ct.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...t),this._logHandler(this,Ct.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...t),this._logHandler(this,Ct.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...t),this._logHandler(this,Ct.ERROR,...t)}}const wb=(e,t)=>t.some(n=>e instanceof n);let Td,bd;function Eb(){return Td||(Td=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tb(){return bd||(bd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $g=new WeakMap,Sc=new WeakMap,jg=new WeakMap,zl=new WeakMap,Au=new WeakMap;function bb(e){const t=new Promise((n,s)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(cs(e.result)),r()},o=()=>{s(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&$g.set(n,e)}).catch(()=>{}),Au.set(t,e),t}function Ab(e){if(Sc.has(e))return;const t=new Promise((n,s)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Sc.set(e,t)}let Rc={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Sc.get(e);if(t==="objectStoreNames")return e.objectStoreNames||jg.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cs(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Ib(e){Rc=e(Rc)}function Sb(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(Kl(this),t,...n);return jg.set(s,t.sort?t.sort():[t]),cs(s)}:Tb().includes(e)?function(...t){return e.apply(Kl(this),t),cs($g.get(this))}:function(...t){return cs(e.apply(Kl(this),t))}}function Rb(e){return typeof e=="function"?Sb(e):(e instanceof IDBTransaction&&Ab(e),wb(e,Eb())?new Proxy(e,Rc):e)}function cs(e){if(e instanceof IDBRequest)return bb(e);if(zl.has(e))return zl.get(e);const t=Rb(e);return t!==e&&(zl.set(e,t),Au.set(t,e)),t}const Kl=e=>Au.get(e);function qg(e,t,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(e,t),l=cs(o);return s&&o.addEventListener("upgradeneeded",c=>{s(cs(o.result),c.oldVersion,c.newVersion,cs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Cb=["get","getKey","getAll","getAllKeys","count"],Pb=["put","add","delete","clear"],Gl=new Map;function Ad(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Gl.get(t))return Gl.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=Pb.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Cb.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return Gl.set(t,i),i}Ib(e=>({...e,get:(t,n,s)=>Ad(t,n)||e.get(t,n,s),has:(t,n)=>!!Ad(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Vb(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Vb(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Cc="@firebase/app",Id="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new bu("@firebase/app"),kb="@firebase/app-compat",Db="@firebase/analytics-compat",Ob="@firebase/analytics",Nb="@firebase/app-check-compat",Mb="@firebase/app-check",Lb="@firebase/auth",Fb="@firebase/auth-compat",Ub="@firebase/database",Bb="@firebase/data-connect",$b="@firebase/database-compat",jb="@firebase/functions",qb="@firebase/functions-compat",Hb="@firebase/installations",zb="@firebase/installations-compat",Kb="@firebase/messaging",Gb="@firebase/messaging-compat",Wb="@firebase/performance",Qb="@firebase/performance-compat",Jb="@firebase/remote-config",Xb="@firebase/remote-config-compat",Yb="@firebase/storage",Zb="@firebase/storage-compat",tA="@firebase/firestore",eA="@firebase/ai",nA="@firebase/firestore-compat",sA="firebase",rA="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc="[DEFAULT]",iA={[Cc]:"fire-core",[kb]:"fire-core-compat",[Ob]:"fire-analytics",[Db]:"fire-analytics-compat",[Mb]:"fire-app-check",[Nb]:"fire-app-check-compat",[Lb]:"fire-auth",[Fb]:"fire-auth-compat",[Ub]:"fire-rtdb",[Bb]:"fire-data-connect",[$b]:"fire-rtdb-compat",[jb]:"fire-fn",[qb]:"fire-fn-compat",[Hb]:"fire-iid",[zb]:"fire-iid-compat",[Kb]:"fire-fcm",[Gb]:"fire-fcm-compat",[Wb]:"fire-perf",[Qb]:"fire-perf-compat",[Jb]:"fire-rc",[Xb]:"fire-rc-compat",[Yb]:"fire-gcs",[Zb]:"fire-gcs-compat",[tA]:"fire-fst",[nA]:"fire-fst-compat",[eA]:"fire-vertex","fire-js":"fire-js",[sA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new Map,oA=new Map,xc=new Map;function Sd(e,t){try{e.container.addComponent(t)}catch(n){Hn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ms(e){const t=e.name;if(xc.has(t))return Hn.debug(`There were multiple attempts to register component ${t}.`),!1;xc.set(t,e);for(const n of ha.values())Sd(n,e);for(const n of oA.values())Sd(n,e);return!0}function eo(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function aA(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new Wa("app","Firebase",lA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=rA;function Hg(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s={name:Pc,automaticDataCollectionEnabled:!0,...t},r=s.name;if(typeof r!="string"||!r)throw us.create("bad-app-name",{appName:String(r)});if(n||(n=Fg()),!n)throw us.create("no-options");const i=ha.get(r);if(i){if(Oi(n,i.options)&&Oi(s,i.config))return i;throw us.create("duplicate-app",{appName:r})}const o=new mb(r);for(const c of xc.values())o.addComponent(c);const l=new cA(n,s,o);return ha.set(r,l),l}function zg(e=Pc){const t=ha.get(e);if(!t&&e===Pc&&Fg())return Hg();if(!t)throw us.create("no-app",{appName:e});return t}function wn(e,t,n){let s=iA[e]??e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=t.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${t}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Hn.warn(o.join(" "));return}ms(new qn(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="firebase-heartbeat-database",fA=1,Ni="firebase-heartbeat-store";let Wl=null;function Kg(){return Wl||(Wl=qg(hA,fA,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ni)}catch(n){console.warn(n)}}}}).catch(e=>{throw us.create("idb-open",{originalErrorMessage:e.message})})),Wl}async function dA(e){try{const n=(await Kg()).transaction(Ni),s=await n.objectStore(Ni).get(Gg(e));return await n.done,s}catch(t){if(t instanceof As)Hn.warn(t.message);else{const n=us.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Hn.warn(n.message)}}}async function Rd(e,t){try{const s=(await Kg()).transaction(Ni,"readwrite");await s.objectStore(Ni).put(t,Gg(e)),await s.done}catch(n){if(n instanceof As)Hn.warn(n.message);else{const s=us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hn.warn(s.message)}}}function Gg(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=1024,mA=30;class gA{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _A(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Cd();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>mA){const o=vA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Hn.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Cd(),{heartbeatsToSend:s,unsentEntries:r}=yA(this._heartbeatsCache.heartbeats),i=ua(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hn.warn(n),""}}}function Cd(){return new Date().toISOString().substring(0,10)}function yA(e,t=pA){const n=[];let s=e.slice();for(const r of e){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Pd(n)>t){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Pd(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _A{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ug()?Bg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rd(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Rd(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Pd(e){return ua(JSON.stringify({version:2,heartbeats:e})).length}function vA(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(e){ms(new qn("platform-logger",t=>new xb(t),"PRIVATE")),ms(new qn("heartbeat",t=>new gA(t),"PRIVATE")),wn(Cc,Id,e),wn(Cc,Id,"esm2020"),wn("fire-js","")}wA("");var xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,Wg;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,v){function _(){}_.prototype=v.prototype,S.D=v.prototype,S.prototype=new _,S.prototype.constructor=S,S.C=function(b,R,A){for(var w=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)w[Z-2]=arguments[Z];return v.prototype[R].apply(b,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,v,_){_||(_=0);var b=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)b[R]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(R=0;16>R;++R)b[R]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=S.g[0],_=S.g[1],R=S.g[2];var A=S.g[3],w=v+(A^_&(R^A))+b[0]+3614090360&4294967295;v=_+(w<<7&4294967295|w>>>25),w=A+(R^v&(_^R))+b[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=R+(_^A&(v^_))+b[2]+606105819&4294967295,R=A+(w<<17&4294967295|w>>>15),w=_+(v^R&(A^v))+b[3]+3250441966&4294967295,_=R+(w<<22&4294967295|w>>>10),w=v+(A^_&(R^A))+b[4]+4118548399&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(R^v&(_^R))+b[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=R+(_^A&(v^_))+b[6]+2821735955&4294967295,R=A+(w<<17&4294967295|w>>>15),w=_+(v^R&(A^v))+b[7]+4249261313&4294967295,_=R+(w<<22&4294967295|w>>>10),w=v+(A^_&(R^A))+b[8]+1770035416&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(R^v&(_^R))+b[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=R+(_^A&(v^_))+b[10]+4294925233&4294967295,R=A+(w<<17&4294967295|w>>>15),w=_+(v^R&(A^v))+b[11]+2304563134&4294967295,_=R+(w<<22&4294967295|w>>>10),w=v+(A^_&(R^A))+b[12]+1804603682&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(R^v&(_^R))+b[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=R+(_^A&(v^_))+b[14]+2792965006&4294967295,R=A+(w<<17&4294967295|w>>>15),w=_+(v^R&(A^v))+b[15]+1236535329&4294967295,_=R+(w<<22&4294967295|w>>>10),w=v+(R^A&(_^R))+b[1]+4129170786&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^R&(v^_))+b[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=R+(v^_&(A^v))+b[11]+643717713&4294967295,R=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(R^A))+b[0]+3921069994&4294967295,_=R+(w<<20&4294967295|w>>>12),w=v+(R^A&(_^R))+b[5]+3593408605&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^R&(v^_))+b[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=R+(v^_&(A^v))+b[15]+3634488961&4294967295,R=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(R^A))+b[4]+3889429448&4294967295,_=R+(w<<20&4294967295|w>>>12),w=v+(R^A&(_^R))+b[9]+568446438&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^R&(v^_))+b[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=R+(v^_&(A^v))+b[3]+4107603335&4294967295,R=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(R^A))+b[8]+1163531501&4294967295,_=R+(w<<20&4294967295|w>>>12),w=v+(R^A&(_^R))+b[13]+2850285829&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^R&(v^_))+b[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=R+(v^_&(A^v))+b[7]+1735328473&4294967295,R=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(R^A))+b[12]+2368359562&4294967295,_=R+(w<<20&4294967295|w>>>12),w=v+(_^R^A)+b[5]+4294588738&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^R)+b[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=R+(A^v^_)+b[11]+1839030562&4294967295,R=A+(w<<16&4294967295|w>>>16),w=_+(R^A^v)+b[14]+4259657740&4294967295,_=R+(w<<23&4294967295|w>>>9),w=v+(_^R^A)+b[1]+2763975236&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^R)+b[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=R+(A^v^_)+b[7]+4139469664&4294967295,R=A+(w<<16&4294967295|w>>>16),w=_+(R^A^v)+b[10]+3200236656&4294967295,_=R+(w<<23&4294967295|w>>>9),w=v+(_^R^A)+b[13]+681279174&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^R)+b[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=R+(A^v^_)+b[3]+3572445317&4294967295,R=A+(w<<16&4294967295|w>>>16),w=_+(R^A^v)+b[6]+76029189&4294967295,_=R+(w<<23&4294967295|w>>>9),w=v+(_^R^A)+b[9]+3654602809&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^R)+b[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=R+(A^v^_)+b[15]+530742520&4294967295,R=A+(w<<16&4294967295|w>>>16),w=_+(R^A^v)+b[2]+3299628645&4294967295,_=R+(w<<23&4294967295|w>>>9),w=v+(R^(_|~A))+b[0]+4096336452&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~R))+b[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=R+(v^(A|~_))+b[14]+2878612391&4294967295,R=A+(w<<15&4294967295|w>>>17),w=_+(A^(R|~v))+b[5]+4237533241&4294967295,_=R+(w<<21&4294967295|w>>>11),w=v+(R^(_|~A))+b[12]+1700485571&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~R))+b[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=R+(v^(A|~_))+b[10]+4293915773&4294967295,R=A+(w<<15&4294967295|w>>>17),w=_+(A^(R|~v))+b[1]+2240044497&4294967295,_=R+(w<<21&4294967295|w>>>11),w=v+(R^(_|~A))+b[8]+1873313359&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~R))+b[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=R+(v^(A|~_))+b[6]+2734768916&4294967295,R=A+(w<<15&4294967295|w>>>17),w=_+(A^(R|~v))+b[13]+1309151649&4294967295,_=R+(w<<21&4294967295|w>>>11),w=v+(R^(_|~A))+b[4]+4149444226&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~R))+b[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=R+(v^(A|~_))+b[2]+718787259&4294967295,R=A+(w<<15&4294967295|w>>>17),w=_+(A^(R|~v))+b[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(R+(w<<21&4294967295|w>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+A&4294967295}s.prototype.u=function(S,v){v===void 0&&(v=S.length);for(var _=v-this.blockSize,b=this.B,R=this.h,A=0;A<v;){if(R==0)for(;A<=_;)r(this,S,A),A+=this.blockSize;if(typeof S=="string"){for(;A<v;)if(b[R++]=S.charCodeAt(A++),R==this.blockSize){r(this,b),R=0;break}}else for(;A<v;)if(b[R++]=S[A++],R==this.blockSize){r(this,b),R=0;break}}this.h=R,this.o+=v},s.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;var _=8*this.o;for(v=S.length-8;v<S.length;++v)S[v]=_&255,_/=256;for(this.u(S),S=Array(16),v=_=0;4>v;++v)for(var b=0;32>b;b+=8)S[_++]=this.g[v]>>>b&255;return S};function i(S,v){var _=l;return Object.prototype.hasOwnProperty.call(_,S)?_[S]:_[S]=v(S)}function o(S,v){this.h=v;for(var _=[],b=!0,R=S.length-1;0<=R;R--){var A=S[R]|0;b&&A==v||(_[R]=A,b=!1)}this.g=_}var l={};function c(S){return-128<=S&&128>S?i(S,function(v){return new o([v|0],0>v?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return x(u(-S));for(var v=[],_=1,b=0;S>=_;b++)v[b]=S/_|0,_*=4294967296;return new o(v,0)}function h(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return x(h(S.substring(1),v));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(v,8)),b=d,R=0;R<S.length;R+=8){var A=Math.min(8,S.length-R),w=parseInt(S.substring(R,R+A),v);8>A?(A=u(Math.pow(v,A)),b=b.j(A).add(u(w))):(b=b.j(_),b=b.add(u(w)))}return b}var d=c(0),m=c(1),y=c(16777216);e=o.prototype,e.m=function(){if(C(this))return-x(this).m();for(var S=0,v=1,_=0;_<this.g.length;_++){var b=this.i(_);S+=(0<=b?b:4294967296+b)*v,v*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(C(this))return"-"+x(this).toString(S);for(var v=u(Math.pow(S,6)),_=this,b="";;){var R=H(_,v).g;_=M(_,R.j(v));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(S);if(_=R,T(_))return A+b;for(;6>A.length;)A="0"+A;b=A+b}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(var v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function C(S){return S.h==-1}e.l=function(S){return S=M(this,S),C(S)?-1:T(S)?0:1};function x(S){for(var v=S.g.length,_=[],b=0;b<v;b++)_[b]=~S.g[b];return new o(_,~S.h).add(m)}e.abs=function(){return C(this)?x(this):this},e.add=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],b=0,R=0;R<=v;R++){var A=b+(this.i(R)&65535)+(S.i(R)&65535),w=(A>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);b=w>>>16,A&=65535,w&=65535,_[R]=w<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function M(S,v){return S.add(x(v))}e.j=function(S){if(T(this)||T(S))return d;if(C(this))return C(S)?x(this).j(x(S)):x(x(this).j(S));if(C(S))return x(this.j(x(S)));if(0>this.l(y)&&0>S.l(y))return u(this.m()*S.m());for(var v=this.g.length+S.g.length,_=[],b=0;b<2*v;b++)_[b]=0;for(b=0;b<this.g.length;b++)for(var R=0;R<S.g.length;R++){var A=this.i(b)>>>16,w=this.i(b)&65535,Z=S.i(R)>>>16,Y=S.i(R)&65535;_[2*b+2*R]+=w*Y,N(_,2*b+2*R),_[2*b+2*R+1]+=A*Y,N(_,2*b+2*R+1),_[2*b+2*R+1]+=w*Z,N(_,2*b+2*R+1),_[2*b+2*R+2]+=A*Z,N(_,2*b+2*R+2)}for(b=0;b<v;b++)_[b]=_[2*b+1]<<16|_[2*b];for(b=v;b<2*v;b++)_[b]=0;return new o(_,0)};function N(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function B(S,v){this.g=S,this.h=v}function H(S,v){if(T(v))throw Error("division by zero");if(T(S))return new B(d,d);if(C(S))return v=H(x(S),v),new B(x(v.g),x(v.h));if(C(v))return v=H(S,x(v)),new B(x(v.g),v.h);if(30<S.g.length){if(C(S)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var _=m,b=v;0>=b.l(S);)_=nt(_),b=nt(b);var R=st(_,1),A=st(b,1);for(b=st(b,2),_=st(_,2);!T(b);){var w=A.add(b);0>=w.l(S)&&(R=R.add(_),A=w),b=st(b,1),_=st(_,1)}return v=M(S,R.j(v)),new B(R,v)}for(R=d;0<=S.l(v);){for(_=Math.max(1,Math.floor(S.m()/v.m())),b=Math.ceil(Math.log(_)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),A=u(_),w=A.j(v);C(w)||0<w.l(S);)_-=b,A=u(_),w=A.j(v);T(A)&&(A=m),R=R.add(A),S=M(S,w)}return new B(R,S)}e.A=function(S){return H(this,S).h},e.and=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],b=0;b<v;b++)_[b]=this.i(b)&S.i(b);return new o(_,this.h&S.h)},e.or=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],b=0;b<v;b++)_[b]=this.i(b)|S.i(b);return new o(_,this.h|S.h)},e.xor=function(S){for(var v=Math.max(this.g.length,S.g.length),_=[],b=0;b<v;b++)_[b]=this.i(b)^S.i(b);return new o(_,this.h^S.h)};function nt(S){for(var v=S.g.length+1,_=[],b=0;b<v;b++)_[b]=S.i(b)<<1|S.i(b-1)>>>31;return new o(_,S.h)}function st(S,v){var _=v>>5;v%=32;for(var b=S.g.length-_,R=[],A=0;A<b;A++)R[A]=0<v?S.i(A+_)>>>v|S.i(A+_+1)<<32-v:S.i(A+_);return new o(R,S.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Wg=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,hs=o}).apply(typeof xd<"u"?xd:typeof self<"u"?self:typeof window<"u"?window:{});var xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qg,ni,Jg,qo,Vc,Xg,Yg,Zg;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,p){return a==Array.prototype||a==Object.prototype||(a[f]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof xo=="object"&&xo];for(var f=0;f<a.length;++f){var p=a[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(a,f){if(f)t:{var p=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var k=a[g];if(!(k in p))break t;p=p[k]}a=a[a.length-1],g=p[a],f=f(g),f!=g&&f!=null&&t(p,a,{configurable:!0,writable:!0,value:f})}}function i(a,f){a instanceof String&&(a+="");var p=0,g=!1,k={next:function(){if(!g&&p<a.length){var O=p++;return{value:f(O,a[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}r("Array.prototype.values",function(a){return a||function(){return i(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function u(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,p){return a.call.apply(a.bind,arguments)}function d(a,f,p){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,g),a.apply(f,k)}}return function(){return a.apply(f,arguments)}}function m(a,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function y(a,f){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function T(a,f){function p(){}p.prototype=f.prototype,a.aa=f.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(g,k,O){for(var W=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)W[Nt-2]=arguments[Nt];return f.prototype[k].apply(g,W)}}function C(a){const f=a.length;if(0<f){const p=Array(f);for(let g=0;g<f;g++)p[g]=a[g];return p}return[]}function x(a,f){for(let p=1;p<arguments.length;p++){const g=arguments[p];if(c(g)){const k=a.length||0,O=g.length||0;a.length=k+O;for(let W=0;W<O;W++)a[k+W]=g[W]}else a.push(g)}}class M{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function N(a){return/^[\s\xa0]*$/.test(a)}function B(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function H(a){return H[" "](a),a}H[" "]=function(){};var nt=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function st(a,f,p){for(const g in a)f.call(p,a[g],g,a)}function S(a,f){for(const p in a)f.call(void 0,a[p],p,a)}function v(a){const f={};for(const p in a)f[p]=a[p];return f}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,f){let p,g;for(let k=1;k<arguments.length;k++){g=arguments[k];for(p in g)a[p]=g[p];for(let O=0;O<_.length;O++)p=_[O],Object.prototype.hasOwnProperty.call(g,p)&&(a[p]=g[p])}}function R(a){var f=1;a=a.split(":");const p=[];for(;0<f&&a.length;)p.push(a.shift()),f--;return a.length&&p.push(a.join(":")),p}function A(a){l.setTimeout(()=>{throw a},0)}function w(){var a=te;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class Z{constructor(){this.h=this.g=null}add(f,p){const g=Y.get();g.set(f,p),this.h?this.h.next=g:this.g=g,this.h=g}}var Y=new M(()=>new bt,a=>a.reset());class bt{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,dt=!1,te=new Z,jt=()=>{const a=l.Promise.resolve(void 0);ot=()=>{a.then(Pe)}};var Pe=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(p){A(p)}var f=Y;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}dt=!1};function Ht(){this.s=this.s,this.C=this.C}Ht.prototype.s=!1,Ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function zt(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}zt.prototype.h=function(){this.defaultPrevented=!0};var Qn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,f),l.removeEventListener("test",p,f)}catch{}return a}();function fn(a,f){if(zt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(nt){t:{try{H(f.nodeName);var k=!0;break t}catch{}k=!1}k||(f=null)}}else p=="mouseover"?f=a.fromElement:p=="mouseout"&&(f=a.toElement);this.relatedTarget=f,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ne[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&fn.aa.h.call(this)}}T(fn,zt);var Ne={2:"touch",3:"pen",4:"mouse"};fn.prototype.h=function(){fn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),tt=0;function J(a,f,p,g,k){this.listener=a,this.proxy=null,this.src=f,this.type=p,this.capture=!!g,this.ha=k,this.key=++tt,this.da=this.fa=!1}function rt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Pt(a){this.src=a,this.g={},this.h=0}Pt.prototype.add=function(a,f,p,g,k){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var W=I(a,f,g,k);return-1<W?(f=a[W],p||(f.fa=!1)):(f=new J(f,this.src,O,!!g,k),f.fa=p,a.push(f)),f};function E(a,f){var p=f.type;if(p in a.g){var g=a.g[p],k=Array.prototype.indexOf.call(g,f,void 0),O;(O=0<=k)&&Array.prototype.splice.call(g,k,1),O&&(rt(f),a.g[p].length==0&&(delete a.g[p],a.h--))}}function I(a,f,p,g){for(var k=0;k<a.length;++k){var O=a[k];if(!O.da&&O.listener==f&&O.capture==!!p&&O.ha==g)return k}return-1}var V="closure_lm_"+(1e6*Math.random()|0),F={};function j(a,f,p,g,k){if(Array.isArray(f)){for(var O=0;O<f.length;O++)j(a,f[O],p,g,k);return null}return p=mt(p),a&&a[L]?a.K(f,p,u(g)?!!g.capture:!1,k):U(a,f,p,!1,g,k)}function U(a,f,p,g,k,O){if(!f)throw Error("Invalid event type");var W=u(k)?!!k.capture:!!k,Nt=X(a);if(Nt||(a[V]=Nt=new Pt(a)),p=Nt.add(f,p,g,W,O),p.proxy)return p;if(g=Q(),p.proxy=g,g.src=a,g.listener=p,a.addEventListener)Qn||(k=W),k===void 0&&(k=!1),a.addEventListener(f.toString(),g,k);else if(a.attachEvent)a.attachEvent(z(f.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Q(){function a(p){return f.call(a.src,a.listener,p)}const f=lt;return a}function G(a,f,p,g,k){if(Array.isArray(f))for(var O=0;O<f.length;O++)G(a,f[O],p,g,k);else g=u(g)?!!g.capture:!!g,p=mt(p),a&&a[L]?(a=a.i,f=String(f).toString(),f in a.g&&(O=a.g[f],p=I(O,p,g,k),-1<p&&(rt(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete a.g[f],a.h--)))):a&&(a=X(a))&&(f=a.g[f.toString()],a=-1,f&&(a=I(f,p,g,k)),(p=-1<a?f[a]:null)&&K(p))}function K(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[L])E(f.i,a);else{var p=a.type,g=a.proxy;f.removeEventListener?f.removeEventListener(p,g,a.capture):f.detachEvent?f.detachEvent(z(p),g):f.addListener&&f.removeListener&&f.removeListener(g),(p=X(f))?(E(p,a),p.h==0&&(p.src=null,f[V]=null)):rt(a)}}}function z(a){return a in F?F[a]:F[a]="on"+a}function lt(a,f){if(a.da)a=!0;else{f=new fn(f,this);var p=a.listener,g=a.ha||a.src;a.fa&&K(a),a=p.call(g,f)}return a}function X(a){return a=a[V],a instanceof Pt?a:null}var at="__closure_events_fn_"+(1e9*Math.random()>>>0);function mt(a){return typeof a=="function"?a:(a[at]||(a[at]=function(f){return a.handleEvent(f)}),a[at])}function ut(){Ht.call(this),this.i=new Pt(this),this.M=this,this.F=null}T(ut,Ht),ut.prototype[L]=!0,ut.prototype.removeEventListener=function(a,f,p,g){G(this,a,f,p,g)};function wt(a,f){var p,g=a.F;if(g)for(p=[];g;g=g.F)p.push(g);if(a=a.M,g=f.type||f,typeof f=="string")f=new zt(f,a);else if(f instanceof zt)f.target=f.target||a;else{var k=f;f=new zt(g,a),b(f,k)}if(k=!0,p)for(var O=p.length-1;0<=O;O--){var W=f.g=p[O];k=St(W,g,!0,f)&&k}if(W=f.g=a,k=St(W,g,!0,f)&&k,k=St(W,g,!1,f)&&k,p)for(O=0;O<p.length;O++)W=f.g=p[O],k=St(W,g,!1,f)&&k}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var p=a.g[f],g=0;g<p.length;g++)rt(p[g]);delete a.g[f],a.h--}}this.F=null},ut.prototype.K=function(a,f,p,g){return this.i.add(String(a),f,!1,p,g)},ut.prototype.L=function(a,f,p,g){return this.i.add(String(a),f,!0,p,g)};function St(a,f,p,g){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var k=!0,O=0;O<f.length;++O){var W=f[O];if(W&&!W.da&&W.capture==p){var Nt=W.listener,fe=W.ha||W.src;W.fa&&E(a.i,W),k=Nt.call(fe,g)!==!1&&k}}return k&&!g.defaultPrevented}function ce(a,f,p){if(typeof a=="function")p&&(a=m(a,p));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function ue(a){a.g=ce(()=>{a.g=null,a.i&&(a.i=!1,ue(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class Je extends Ht{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ue(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(a){Ht.call(this),this.h=a,this.g={}}T(ye,Ht);var Jn=[];function Lr(a){st(a.g,function(f,p){this.g.hasOwnProperty(p)&&K(f)},a),a.g={}}ye.prototype.N=function(){ye.aa.N.call(this),Lr(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=l.JSON.stringify,Xe=l.JSON.parse,lo=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function sr(){}sr.prototype.h=null;function ch(a){return a.h||(a.h=a.i())}function uh(){}var Fr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dl(){zt.call(this,"d")}T(dl,zt);function pl(){zt.call(this,"c")}T(pl,zt);var Rs={},hh=null;function co(){return hh=hh||new ut}Rs.La="serverreachability";function fh(a){zt.call(this,Rs.La,a)}T(fh,zt);function Ur(a){const f=co();wt(f,new fh(f))}Rs.STAT_EVENT="statevent";function dh(a,f){zt.call(this,Rs.STAT_EVENT,a),this.stat=f}T(dh,zt);function xe(a){const f=co();wt(f,new dh(f,a))}Rs.Ma="timingevent";function ph(a,f){zt.call(this,Rs.Ma,a),this.size=f}T(ph,zt);function Br(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function $r(){this.g=!0}$r.prototype.xa=function(){this.g=!1};function K_(a,f,p,g,k,O){a.info(function(){if(a.g)if(O)for(var W="",Nt=O.split("&"),fe=0;fe<Nt.length;fe++){var xt=Nt[fe].split("=");if(1<xt.length){var _e=xt[0];xt=xt[1];var ve=_e.split("_");W=2<=ve.length&&ve[1]=="type"?W+(_e+"="+xt+"&"):W+(_e+"=redacted&")}}else W=null;else W=O;return"XMLHTTP REQ ("+g+") [attempt "+k+"]: "+f+`
`+p+`
`+W})}function G_(a,f,p,g,k,O,W){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+k+"]: "+f+`
`+p+`
`+O+" "+W})}function rr(a,f,p,g){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+Q_(a,p)+(g?" "+g:"")})}function W_(a,f){a.info(function(){return"TIMEOUT: "+f})}$r.prototype.info=function(){};function Q_(a,f){if(!a.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var g=p[a];if(!(2>g.length)){var k=g[1];if(Array.isArray(k)&&!(1>k.length)){var O=k[0];if(O!="noop"&&O!="stop"&&O!="close")for(var W=1;W<k.length;W++)k[W]=""}}}}return he(p)}catch{return f}}var uo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ml;function ho(){}T(ho,sr),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},ml=new ho;function Xn(a,f,p,g){this.j=a,this.i=f,this.l=p,this.R=g||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gh}function gh(){this.i=null,this.g="",this.h=!1}var yh={},gl={};function yl(a,f,p){a.L=1,a.v=go(Pn(f)),a.m=p,a.P=!0,_h(a,null)}function _h(a,f){a.F=Date.now(),fo(a),a.A=Pn(a.v);var p=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),kh(p.i,"t",g),a.C=0,p=a.j.J,a.h=new gh,a.g=Jh(a.j,p?f:null,!a.m),0<a.O&&(a.M=new Je(m(a.Y,a,a.g),a.O)),f=a.U,p=a.g,g=a.ca;var k="readystatechange";Array.isArray(k)||(k&&(Jn[0]=k.toString()),k=Jn);for(var O=0;O<k.length;O++){var W=j(p,k[O],g||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),Ur(),K_(a.i,a.u,a.A,a.l,a.R,a.m)}Xn.prototype.ca=function(a){a=a.target;const f=this.M;f&&xn(a)==3?f.j():this.Y(a)},Xn.prototype.Y=function(a){try{if(a==this.g)t:{const ve=xn(this.g);var f=this.g.Ba();const ar=this.g.Z();if(!(3>ve)&&(ve!=3||this.g&&(this.h.h||this.g.oa()||Uh(this.g)))){this.J||ve!=4||f==7||(f==8||0>=ar?Ur(3):Ur(2)),_l(this);var p=this.g.Z();this.X=p;e:if(vh(this)){var g=Uh(this.g);a="";var k=g.length,O=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cs(this),jr(this);var W="";break e}this.h.i=new l.TextDecoder}for(f=0;f<k;f++)this.h.h=!0,a+=this.h.i.decode(g[f],{stream:!(O&&f==k-1)});g.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,G_(this.i,this.u,this.A,this.l,this.R,ve,p),this.o){if(this.T&&!this.K){e:{if(this.g){var Nt,fe=this.g;if((Nt=fe.g?fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Nt)){var xt=Nt;break e}}xt=null}if(p=xt)rr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vl(this,p);else{this.o=!1,this.s=3,xe(12),Cs(this),jr(this);break t}}if(this.P){p=!0;let nn;for(;!this.J&&this.C<W.length;)if(nn=J_(this,W),nn==gl){ve==4&&(this.s=4,xe(14),p=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==yh){this.s=4,xe(15),rr(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else rr(this.i,this.l,nn,null),vl(this,nn);if(vh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||W.length!=0||this.h.h||(this.s=1,xe(16),p=!1),this.o=this.o&&p,!p)rr(this.i,this.l,W,"[Invalid Chunked Response]"),Cs(this),jr(this);else if(0<W.length&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.ba&&!_e.M&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Il(_e),_e.M=!0,xe(11))}}else rr(this.i,this.l,W,null),vl(this,W);ve==4&&Cs(this),this.o&&!this.J&&(ve==4?Kh(this.j,this):(this.o=!1,fo(this)))}else dv(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),Cs(this),jr(this)}}}catch{}finally{}};function vh(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function J_(a,f){var p=a.C,g=f.indexOf(`
`,p);return g==-1?gl:(p=Number(f.substring(p,g)),isNaN(p)?yh:(g+=1,g+p>f.length?gl:(f=f.slice(g,g+p),a.C=g+p,f)))}Xn.prototype.cancel=function(){this.J=!0,Cs(this)};function fo(a){a.S=Date.now()+a.I,wh(a,a.I)}function wh(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Br(m(a.ba,a),f)}function _l(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Xn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(W_(this.i,this.A),this.L!=2&&(Ur(),xe(17)),Cs(this),this.s=2,jr(this)):wh(this,this.S-a)};function jr(a){a.j.G==0||a.J||Kh(a.j,a)}function Cs(a){_l(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,Lr(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function vl(a,f){try{var p=a.j;if(p.G!=0&&(p.g==a||wl(p.h,a))){if(!a.K&&wl(p.h,a)&&p.G==3){try{var g=p.Da.g.parse(f)}catch{g=null}if(Array.isArray(g)&&g.length==3){var k=g;if(k[0]==0){t:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)To(p),wo(p);else break t;Al(p),xe(18)}}else p.za=k[1],0<p.za-p.T&&37500>k[2]&&p.F&&p.v==0&&!p.C&&(p.C=Br(m(p.Za,p),6e3));if(1>=bh(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else xs(p,11)}else if((a.K||p.g==a)&&To(p),!N(f))for(k=p.Da.g.parse(f),f=0;f<k.length;f++){let xt=k[f];if(p.T=xt[0],xt=xt[1],p.G==2)if(xt[0]=="c"){p.K=xt[1],p.ia=xt[2];const _e=xt[3];_e!=null&&(p.la=_e,p.j.info("VER="+p.la));const ve=xt[4];ve!=null&&(p.Aa=ve,p.j.info("SVER="+p.Aa));const ar=xt[5];ar!=null&&typeof ar=="number"&&0<ar&&(g=1.5*ar,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const nn=a.g;if(nn){const Ao=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ao){var O=g.h;O.g||Ao.indexOf("spdy")==-1&&Ao.indexOf("quic")==-1&&Ao.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(El(O,O.h),O.h=null))}if(g.D){const Sl=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Sl&&(g.ya=Sl,Ut(g.I,g.D,Sl))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var W=a;if(g.qa=Qh(g,g.J?g.ia:null,g.W),W.K){Ah(g.h,W);var Nt=W,fe=g.L;fe&&(Nt.I=fe),Nt.B&&(_l(Nt),fo(Nt)),g.g=W}else Hh(g);0<p.i.length&&Eo(p)}else xt[0]!="stop"&&xt[0]!="close"||xs(p,7);else p.G==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?xs(p,7):bl(p):xt[0]!="noop"&&p.l&&p.l.ta(xt),p.v=0)}}Ur(4)}catch{}}var X_=class{constructor(a,f){this.g=a,this.map=f}};function Eh(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Th(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function bh(a){return a.h?1:a.g?a.g.size:0}function wl(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function El(a,f){a.g?a.g.add(f):a.h=f}function Ah(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}Eh.prototype.cancel=function(){if(this.i=Ih(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ih(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const p of a.g.values())f=f.concat(p.D);return f}return C(a.i)}function Y_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var f=[],p=a.length,g=0;g<p;g++)f.push(a[g]);return f}f=[],p=0;for(g in a)f[p++]=a[g];return f}function Z_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var f=[];a=a.length;for(var p=0;p<a;p++)f.push(p);return f}f=[],p=0;for(const g in a)f[p++]=g;return f}}}function Sh(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var p=Z_(a),g=Y_(a),k=g.length,O=0;O<k;O++)f.call(void 0,g[O],p&&p[O],a)}var Rh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tv(a,f){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var g=a[p].indexOf("="),k=null;if(0<=g){var O=a[p].substring(0,g);k=a[p].substring(g+1)}else O=a[p];f(O,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Ps(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ps){this.h=a.h,po(this,a.j),this.o=a.o,this.g=a.g,mo(this,a.s),this.l=a.l;var f=a.i,p=new zr;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),Ch(this,p),this.m=a.m}else a&&(f=String(a).match(Rh))?(this.h=!1,po(this,f[1]||"",!0),this.o=qr(f[2]||""),this.g=qr(f[3]||"",!0),mo(this,f[4]),this.l=qr(f[5]||"",!0),Ch(this,f[6]||"",!0),this.m=qr(f[7]||"")):(this.h=!1,this.i=new zr(null,this.h))}Ps.prototype.toString=function(){var a=[],f=this.j;f&&a.push(Hr(f,Ph,!0),":");var p=this.g;return(p||f=="file")&&(a.push("//"),(f=this.o)&&a.push(Hr(f,Ph,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Hr(p,p.charAt(0)=="/"?sv:nv,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Hr(p,iv)),a.join("")};function Pn(a){return new Ps(a)}function po(a,f,p){a.j=p?qr(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function mo(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function Ch(a,f,p){f instanceof zr?(a.i=f,ov(a.i,a.h)):(p||(f=Hr(f,rv)),a.i=new zr(f,a.h))}function Ut(a,f,p){a.i.set(f,p)}function go(a){return Ut(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function qr(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Hr(a,f,p){return typeof a=="string"?(a=encodeURI(a).replace(f,ev),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ev(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ph=/[#\/\?@]/g,nv=/[#\?:]/g,sv=/[#\?]/g,rv=/[#\?@]/g,iv=/#/g;function zr(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Yn(a){a.g||(a.g=new Map,a.h=0,a.i&&tv(a.i,function(f,p){a.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}e=zr.prototype,e.add=function(a,f){Yn(this),this.i=null,a=ir(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(f),this.h+=1,this};function xh(a,f){Yn(a),f=ir(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function Vh(a,f){return Yn(a),f=ir(a,f),a.g.has(f)}e.forEach=function(a,f){Yn(this),this.g.forEach(function(p,g){p.forEach(function(k){a.call(f,k,g,this)},this)},this)},e.na=function(){Yn(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let g=0;g<f.length;g++){const k=a[g];for(let O=0;O<k.length;O++)p.push(f[g])}return p},e.V=function(a){Yn(this);let f=[];if(typeof a=="string")Vh(this,a)&&(f=f.concat(this.g.get(ir(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)f=f.concat(a[p])}return f},e.set=function(a,f){return Yn(this),this.i=null,a=ir(this,a),Vh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},e.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function kh(a,f,p){xh(a,f),0<p.length&&(a.i=null,a.g.set(ir(a,f),C(p)),a.h+=p.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var g=f[p];const O=encodeURIComponent(String(g)),W=this.V(g);for(g=0;g<W.length;g++){var k=O;W[g]!==""&&(k+="="+encodeURIComponent(String(W[g]))),a.push(k)}}return this.i=a.join("&")};function ir(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function ov(a,f){f&&!a.j&&(Yn(a),a.i=null,a.g.forEach(function(p,g){var k=g.toLowerCase();g!=k&&(xh(this,g),kh(this,k,p))},a)),a.j=f}function av(a,f){const p=new $r;if(l.Image){const g=new Image;g.onload=y(Zn,p,"TestLoadImage: loaded",!0,f,g),g.onerror=y(Zn,p,"TestLoadImage: error",!1,f,g),g.onabort=y(Zn,p,"TestLoadImage: abort",!1,f,g),g.ontimeout=y(Zn,p,"TestLoadImage: timeout",!1,f,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else f(!1)}function lv(a,f){const p=new $r,g=new AbortController,k=setTimeout(()=>{g.abort(),Zn(p,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:g.signal}).then(O=>{clearTimeout(k),O.ok?Zn(p,"TestPingServer: ok",!0,f):Zn(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(k),Zn(p,"TestPingServer: error",!1,f)})}function Zn(a,f,p,g,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),g(p)}catch{}}function cv(){this.g=new lo}function uv(a,f,p){const g=p||"";try{Sh(a,function(k,O){let W=k;u(k)&&(W=he(k)),f.push(g+O+"="+encodeURIComponent(W))})}catch(k){throw f.push(g+"type="+encodeURIComponent("_badmap")),k}}function yo(a){this.l=a.Ub||null,this.j=a.eb||!1}T(yo,sr),yo.prototype.g=function(){return new _o(this.l,this.j)},yo.prototype.i=function(a){return function(){return a}}({});function _o(a,f){ut.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(_o,ut),e=_o.prototype,e.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,Gr(this)},e.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kr(this)),this.readyState=0},e.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Gr(this)),this.g&&(this.readyState=3,Gr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dh(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dh(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}e.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Kr(this):Gr(this),this.readyState==3&&Dh(this)}},e.Ra=function(a){this.g&&(this.response=this.responseText=a,Kr(this))},e.Qa=function(a){this.g&&(this.response=a,Kr(this))},e.ga=function(){this.g&&Kr(this)};function Kr(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Gr(a)}e.setRequestHeader=function(a,f){this.u.append(a,f)},e.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=f.next();return a.join(`\r
`)};function Gr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Oh(a){let f="";return st(a,function(p,g){f+=g,f+=":",f+=p,f+=`\r
`}),f}function Tl(a,f,p){t:{for(g in p){var g=!1;break t}g=!0}g||(p=Oh(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Ut(a,f,p))}function Wt(a){ut.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Wt,ut);var hv=/^https?$/i,fv=["POST","PUT"];e=Wt.prototype,e.Ha=function(a){this.J=a},e.ea=function(a,f,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ml.g(),this.v=this.o?ch(this.o):ch(ml),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(O){Nh(this,O);return}if(a=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var k in g)p.set(k,g[k]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const O of g.keys())p.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),k=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(fv,f,void 0))||g||k||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of p)this.g.setRequestHeader(O,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fh(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Nh(this,O)}};function Nh(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,Mh(a),vo(a)}function Mh(a){a.A||(a.A=!0,wt(a,"complete"),wt(a,"error"))}e.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,wt(this,"complete"),wt(this,"abort"),vo(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vo(this,!0)),Wt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Lh(this):this.bb())},e.bb=function(){Lh(this)};function Lh(a){if(a.h&&typeof o<"u"&&(!a.v[1]||xn(a)!=4||a.Z()!=2)){if(a.u&&xn(a)==4)ce(a.Ea,0,a);else if(wt(a,"readystatechange"),xn(a)==4){a.h=!1;try{const W=a.Z();t:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var p;if(!(p=f)){var g;if(g=W===0){var k=String(a.D).match(Rh)[1]||null;!k&&l.self&&l.self.location&&(k=l.self.location.protocol.slice(0,-1)),g=!hv.test(k?k.toLowerCase():"")}p=g}if(p)wt(a,"complete"),wt(a,"success");else{a.m=6;try{var O=2<xn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",Mh(a)}}finally{vo(a)}}}}function vo(a,f){if(a.g){Fh(a);const p=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||wt(a,"ready");try{p.onreadystatechange=g}catch{}}}function Fh(a){a.I&&(l.clearTimeout(a.I),a.I=null)}e.isActive=function(){return!!this.g};function xn(a){return a.g?a.g.readyState:0}e.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),Xe(f)}};function Uh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function dv(a){const f={};a=(a.g&&2<=xn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(N(a[g]))continue;var p=R(a[g]);const k=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=f[k]||[];f[k]=O,O.push(p)}S(f,function(g){return g.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(a,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||f}function Bh(a){this.Aa=0,this.i=[],this.j=new $r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,a),this.cb=Wr("retryDelaySeedMs",1e4,a),this.Wa=Wr("forwardChannelMaxRetries",2,a),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Eh(a&&a.concurrentRequestLimit),this.Da=new cv,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Bh.prototype,e.la=8,e.G=1,e.connect=function(a,f,p,g){xe(0),this.W=a,this.H=f||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=Qh(this,null,this.W),Eo(this)};function bl(a){if($h(a),a.G==3){var f=a.U++,p=Pn(a.I);if(Ut(p,"SID",a.K),Ut(p,"RID",f),Ut(p,"TYPE","terminate"),Qr(a,p),f=new Xn(a,a.j,f),f.L=2,f.v=go(Pn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=f.v,p=!0),p||(f.g=Jh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),fo(f)}Wh(a)}function wo(a){a.g&&(Il(a),a.g.cancel(),a.g=null)}function $h(a){wo(a),a.u&&(l.clearTimeout(a.u),a.u=null),To(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Eo(a){if(!Th(a.h)&&!a.s){a.s=!0;var f=a.Ga;ot||jt(),dt||(ot(),dt=!0),te.add(f,a),a.B=0}}function pv(a,f){return bh(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Br(m(a.Ga,a,f),Gh(a,a.B)),a.B++,!0)}e.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const k=new Xn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=v(O),b(O,this.S)):O=this.S),this.m!==null||this.O||(k.H=O,O=null),this.P)t:{for(var f=0,p=0;p<this.i.length;p++){e:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(f+=g,4096<f){f=p;break t}if(f===4096||p===this.i.length-1){f=p+1;break t}}f=1e3}else f=1e3;f=qh(this,k,f),p=Pn(this.I),Ut(p,"RID",a),Ut(p,"CVER",22),this.D&&Ut(p,"X-HTTP-Session-Id",this.D),Qr(this,p),O&&(this.O?f="headers="+encodeURIComponent(String(Oh(O)))+"&"+f:this.m&&Tl(p,this.m,O)),El(this.h,k),this.Ua&&Ut(p,"TYPE","init"),this.P?(Ut(p,"$req",f),Ut(p,"SID","null"),k.T=!0,yl(k,p,null)):yl(k,p,f),this.G=2}}else this.G==3&&(a?jh(this,a):this.i.length==0||Th(this.h)||jh(this))};function jh(a,f){var p;f?p=f.l:p=a.U++;const g=Pn(a.I);Ut(g,"SID",a.K),Ut(g,"RID",p),Ut(g,"AID",a.T),Qr(a,g),a.m&&a.o&&Tl(g,a.m,a.o),p=new Xn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),f&&(a.i=f.D.concat(a.i)),f=qh(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),El(a.h,p),yl(p,g,f)}function Qr(a,f){a.H&&st(a.H,function(p,g){Ut(f,g,p)}),a.l&&Sh({},function(p,g){Ut(f,g,p)})}function qh(a,f,p){p=Math.min(a.i.length,p);var g=a.l?m(a.l.Na,a.l,a):null;t:{var k=a.i;let O=-1;for(;;){const W=["count="+p];O==-1?0<p?(O=k[0].g,W.push("ofs="+O)):O=0:W.push("ofs="+O);let Nt=!0;for(let fe=0;fe<p;fe++){let xt=k[fe].g;const _e=k[fe].map;if(xt-=O,0>xt)O=Math.max(0,k[fe].g-100),Nt=!1;else try{uv(_e,W,"req"+xt+"_")}catch{g&&g(_e)}}if(Nt){g=W.join("&");break t}}}return a=a.i.splice(0,p),f.D=a,g}function Hh(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;ot||jt(),dt||(ot(),dt=!0),te.add(f,a),a.v=0}}function Al(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Br(m(a.Fa,a),Gh(a,a.v)),a.v++,!0)}e.Fa=function(){if(this.u=null,zh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Br(m(this.ab,this),a)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),wo(this),zh(this))};function Il(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function zh(a){a.g=new Xn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=Pn(a.qa);Ut(f,"RID","rpc"),Ut(f,"SID",a.K),Ut(f,"AID",a.T),Ut(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ut(f,"TO",a.ja),Ut(f,"TYPE","xmlhttp"),Qr(a,f),a.m&&a.o&&Tl(f,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=go(Pn(f)),p.m=null,p.P=!0,_h(p,a)}e.Za=function(){this.C!=null&&(this.C=null,wo(this),Al(this),xe(19))};function To(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Kh(a,f){var p=null;if(a.g==f){To(a),Il(a),a.g=null;var g=2}else if(wl(a.h,f))p=f.D,Ah(a.h,f),g=1;else return;if(a.G!=0){if(f.o)if(g==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var k=a.B;g=co(),wt(g,new ph(g,p)),Eo(a)}else Hh(a);else if(k=f.s,k==3||k==0&&0<f.X||!(g==1&&pv(a,f)||g==2&&Al(a)))switch(p&&0<p.length&&(f=a.h,f.i=f.i.concat(p)),k){case 1:xs(a,5);break;case 4:xs(a,10);break;case 3:xs(a,6);break;default:xs(a,2)}}}function Gh(a,f){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*f}function xs(a,f){if(a.j.info("Error code "+f),f==2){var p=m(a.fb,a),g=a.Xa;const k=!g;g=new Ps(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||po(g,"https"),go(g),k?av(g.toString(),p):lv(g.toString(),p)}else xe(2);a.G=0,a.l&&a.l.sa(f),Wh(a),$h(a)}e.fb=function(a){a?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function Wh(a){if(a.G=0,a.ka=[],a.l){const f=Ih(a.h);(f.length!=0||a.i.length!=0)&&(x(a.ka,f),x(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function Qh(a,f,p){var g=p instanceof Ps?Pn(p):new Ps(p);if(g.g!="")f&&(g.g=f+"."+g.g),mo(g,g.s);else{var k=l.location;g=k.protocol,f=f?f+"."+k.hostname:k.hostname,k=+k.port;var O=new Ps(null);g&&po(O,g),f&&(O.g=f),k&&mo(O,k),p&&(O.l=p),g=O}return p=a.D,f=a.ya,p&&f&&Ut(g,p,f),Ut(g,"VER",a.la),Qr(a,g),g}function Jh(a,f,p){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new Wt(new yo({eb:p})):new Wt(a.pa),f.Ha(a.J),f}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xh(){}e=Xh.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function bo(){}bo.prototype.g=function(a,f){return new qe(a,f)};function qe(a,f){ut.call(this),this.g=new Bh(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!N(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!N(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new or(this)}T(qe,ut),qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qe.prototype.close=function(){bl(this.g)},qe.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=he(a),a=p);f.i.push(new X_(f.Ya++,a)),f.G==3&&Eo(f)},qe.prototype.N=function(){this.g.l=null,delete this.j,bl(this.g),delete this.g,qe.aa.N.call(this)};function Yh(a){dl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){t:{for(const p in f){a=p;break t}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}T(Yh,dl);function Zh(){pl.call(this),this.status=1}T(Zh,pl);function or(a){this.g=a}T(or,Xh),or.prototype.ua=function(){wt(this.g,"a")},or.prototype.ta=function(a){wt(this.g,new Yh(a))},or.prototype.sa=function(a){wt(this.g,new Zh)},or.prototype.ra=function(){wt(this.g,"b")},bo.prototype.createWebChannel=bo.prototype.g,qe.prototype.send=qe.prototype.o,qe.prototype.open=qe.prototype.m,qe.prototype.close=qe.prototype.close,Zg=function(){return new bo},Yg=function(){return co()},Xg=Rs,Vc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uo.NO_ERROR=0,uo.TIMEOUT=8,uo.HTTP_ERROR=6,qo=uo,mh.COMPLETE="complete",Jg=mh,uh.EventType=Fr,Fr.OPEN="a",Fr.CLOSE="b",Fr.ERROR="c",Fr.MESSAGE="d",ut.prototype.listen=ut.prototype.K,ni=uh,Wt.prototype.listenOnce=Wt.prototype.L,Wt.prototype.getLastError=Wt.prototype.Ka,Wt.prototype.getLastErrorCode=Wt.prototype.Ba,Wt.prototype.getStatus=Wt.prototype.Z,Wt.prototype.getResponseJson=Wt.prototype.Oa,Wt.prototype.getResponseText=Wt.prototype.oa,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Ha,Qg=Wt}).apply(typeof xo<"u"?xo:typeof self<"u"?self:typeof window<"u"?window:{});const Vd="@firebase/firestore",kd="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Te.UNAUTHENTICATED=new Te(null),Te.GOOGLE_CREDENTIALS=new Te("google-credentials-uid"),Te.FIRST_PARTY=new Te("first-party-uid"),Te.MOCK_USER=new Te("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dr="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new bu("@firebase/firestore");function hr(){return Js.logLevel}function et(e,...t){if(Js.logLevel<=Ct.DEBUG){const n=t.map(Iu);Js.debug(`Firestore (${Dr}): ${e}`,...n)}}function zn(e,...t){if(Js.logLevel<=Ct.ERROR){const n=t.map(Iu);Js.error(`Firestore (${Dr}): ${e}`,...n)}}function Ir(e,...t){if(Js.logLevel<=Ct.WARN){const n=t.map(Iu);Js.warn(`Firestore (${Dr}): ${e}`,...n)}}function Iu(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,ty(e,s,n)}function ty(e,t,n){let s=`FIRESTORE (${Dr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw zn(s),new Error(s)}function Ot(e,t,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,e||ty(t,r,s)}function vt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends As{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class EA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Te.UNAUTHENTICATED))}shutdown(){}}class TA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bA{constructor(t){this.t=t,this.currentUser=Te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ot(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new fs,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new fs)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ot(typeof s.accessToken=="string",31837,{l:s}),new ey(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ot(t===null||typeof t=="string",2055,{h:t}),new Te(t)}}class AA{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Te.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IA{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new AA(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Te.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dd{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SA{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,aA(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ot(this.o===void 0,3512);const s=i=>{i.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>s(i))};const r=i=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Dd(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Dd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=RA(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=t.charAt(r[i]%62))}return s}}function At(e,t){return e<t?-1:e>t?1:0}function kc(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const r=e.charAt(s),i=t.charAt(s);if(r!==i)return Ql(r)===Ql(i)?At(r,i):Ql(r)?1:-1}return At(e.length,t.length)}const CA=55296,PA=57343;function Ql(e){const t=e.charCodeAt(0);return t>=CA&&t<=PA}function Sr(e,t,n){return e.length===t.length&&e.every((s,r)=>n(s,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="__name__";class yn{constructor(t,n,s){n===void 0?n=0:n>t.length&&pt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&pt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return yn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof yn?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let r=0;r<s;r++){const i=yn.compareSegments(t.get(r),n.get(r));if(i!==0)return i}return At(t.length,n.length)}static compareSegments(t,n){const s=yn.isNumericId(t),r=yn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?yn.extractNumericId(t).compare(yn.extractNumericId(n)):kc(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return hs.fromString(t.substring(4,t.length-2))}}class Kt extends yn{construct(t,n,s){return new Kt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new it(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Kt(n)}static emptyPath(){return new Kt([])}}const xA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class me extends yn{construct(t,n,s){return new me(t,n,s)}static isValidIdentifier(t){return xA.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),me.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Od}static keyField(){return new me([Od])}static fromServerFormat(t){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new it(q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new it(q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new it(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new it(q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new me(n)}static emptyPath(){return new me([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(t){this.path=t}static fromPath(t){return new ct(Kt.fromString(t))}static fromName(t){return new ct(Kt.fromString(t).popFirst(5))}static empty(){return new ct(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Kt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Kt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ct(new Kt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(e,t,n){if(!n)throw new it(q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function kA(e,t,n,s){if(t===!0&&s===!0)throw new it(q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Nd(e){if(!ct.isDocumentKey(e))throw new it(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ny(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Ru(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":pt(12329,{type:typeof e})}function Xs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new it(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ru(e);throw new it(q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(e,t){const n={typeString:e};return t&&(n.value=t),n}function no(e,t){if(!ny(e))throw new it(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const r=t[s].typeString,i="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const o=e[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new it(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=-62135596800,Ld=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(t){return $t.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Ld);return new $t(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new it(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new it(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Md)throw new it(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new it(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ld}_compareTo(t){return this.seconds===t.seconds?At(this.nanoseconds,t.nanoseconds):At(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(no(t,$t._jsonSchema))return new $t(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Md;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:se("string",$t._jsonSchemaVersion),seconds:se("number"),nanoseconds:se("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(t){return new yt(t)}static min(){return new yt(new $t(0,0))}static max(){return new yt(new $t(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=-1;function DA(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,r=yt.fromTimestamp(s===1e9?new $t(n+1,0):new $t(n,s));return new gs(r,ct.empty(),t)}function OA(e){return new gs(e.readTime,e.key,Mi)}class gs{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new gs(yt.min(),ct.empty(),Mi)}static max(){return new gs(yt.max(),ct.empty(),Mi)}}function NA(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ct.comparator(e.documentKey,t.documentKey),n!==0?n:At(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Or(e){if(e.code!==q.FAILED_PRECONDITION||e.message!==MA)throw e;et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new $((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):$.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):$.reject(n)}static resolve(t){return new $((n,s)=>{n(t)})}static reject(t){return new $((n,s)=>{s(t)})}static waitFor(t){return new $((n,s)=>{let r=0,i=0,o=!1;t.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(t){let n=$.resolve(!1);for(const s of t)n=n.next(r=>r?$.resolve(r):s());return n}static forEach(t,n){const s=[];return t.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(t,n){return new $((s,r)=>{const i=t.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(t[u]).next(h=>{o[u]=h,++l,l===i&&s(o)},h=>r(h))}})}static doWhile(t,n){return new $((s,r)=>{const i=()=>{t()===!0?n().next(()=>{i()},r):s()};i()})}}function FA(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Qa.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=-1;function Ja(e){return e==null}function fa(e){return e===0&&1/e==-1/0}function UA(e){return typeof e=="number"&&Number.isInteger(e)&&!fa(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="";function BA(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Fd(t)),t=$A(e.get(n),t);return Fd(t)}function $A(e,t){let n=t;const s=e.length;for(let r=0;r<s;r++){const i=e.charAt(r);switch(i){case"\0":n+="";break;case sy:n+="";break;default:n+=i}}return n}function Fd(e){return e+sy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Is(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ry(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t,n){this.comparator=t,this.root=n||de.EMPTY}insert(t,n){return new Gt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,de.BLACK,null,null))}remove(t){return new Gt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,de.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Vo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Vo(this.root,t,this.comparator,!1)}getReverseIterator(){return new Vo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Vo(this.root,t,this.comparator,!0)}}class Vo{constructor(t,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?s(t.key,n):1,n&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class de{constructor(t,n,s,r,i){this.key=t,this.value=n,this.color=s??de.RED,this.left=r??de.EMPTY,this.right=i??de.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,r,i){return new de(t??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let r=this;const i=s(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return de.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return de.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,de.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,de.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw pt(27949);return t+(this.isRed()?0:1)}}de.EMPTY=null,de.RED=!0,de.BLACK=!1;de.EMPTY=new class{constructor(){this.size=0}get key(){throw pt(57766)}get value(){throw pt(16141)}get color(){throw pt(16727)}get left(){throw pt(29726)}get right(){throw pt(36894)}copy(t,n,s,r,i){return this}insert(t,n,s){return new de(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t){this.comparator=t,this.data=new Gt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bd(this.data.getIterator())}getIteratorFrom(t){return new Bd(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof oe)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new oe(this.comparator);return n.data=t,n}}class Bd{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.fields=t,t.sort(me.comparator)}static empty(){return new Ge([])}unionWith(t){let n=new oe(me.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Ge(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Sr(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new iy("Invalid base64 string: "+i):i}}(t);return new ge(n)}static fromUint8Array(t){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(t);return new ge(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return At(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ge.EMPTY_BYTE_STRING=new ge("");const jA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(e){if(Ot(!!e,39018),typeof e=="string"){let t=0;const n=jA.exec(e);if(Ot(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Xt(e.seconds),nanos:Xt(e.nanos)}}function Xt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function _s(e){return typeof e=="string"?ge.fromBase64String(e):ge.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="server_timestamp",ay="__type__",ly="__previous_value__",cy="__local_write_time__";function Pu(e){var n,s;return((s=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[ay])==null?void 0:s.stringValue)===oy}function Xa(e){const t=e.mapValue.fields[ly];return Pu(t)?Xa(t):t}function Li(e){const t=ys(e.mapValue.fields[cy].timestampValue);return new $t(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(t,n,s,r,i,o,l,c,u,h){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const da="(default)";class Fi{constructor(t,n){this.projectId=t,this.database=n||da}static empty(){return new Fi("","")}get isDefaultDatabase(){return this.database===da}isEqual(t){return t instanceof Fi&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="__type__",HA="__max__",ko={mapValue:{}},hy="__vector__",pa="value";function vs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Pu(e)?4:KA(e)?9007199254740991:zA(e)?10:11:pt(28295,{value:e})}function Rn(e,t){if(e===t)return!0;const n=vs(e);if(n!==vs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Li(e).isEqual(Li(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=ys(r.timestampValue),l=ys(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return _s(r.bytesValue).isEqual(_s(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return Xt(r.geoPointValue.latitude)===Xt(i.geoPointValue.latitude)&&Xt(r.geoPointValue.longitude)===Xt(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Xt(r.integerValue)===Xt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Xt(r.doubleValue),l=Xt(i.doubleValue);return o===l?fa(o)===fa(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return Sr(e.arrayValue.values||[],t.arrayValue.values||[],Rn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Ud(o)!==Ud(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Rn(o[c],l[c])))return!1;return!0}(e,t);default:return pt(52216,{left:e})}}function Ui(e,t){return(e.values||[]).find(n=>Rn(n,t))!==void 0}function Rr(e,t){if(e===t)return 0;const n=vs(e),s=vs(t);if(n!==s)return At(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return At(e.booleanValue,t.booleanValue);case 2:return function(i,o){const l=Xt(i.integerValue||i.doubleValue),c=Xt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return $d(e.timestampValue,t.timestampValue);case 4:return $d(Li(e),Li(t));case 5:return kc(e.stringValue,t.stringValue);case 6:return function(i,o){const l=_s(i),c=_s(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=At(l[u],c[u]);if(h!==0)return h}return At(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const l=At(Xt(i.latitude),Xt(o.latitude));return l!==0?l:At(Xt(i.longitude),Xt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return jd(e.arrayValue,t.arrayValue);case 10:return function(i,o){var m,y,T,C;const l=i.fields||{},c=o.fields||{},u=(m=l[pa])==null?void 0:m.arrayValue,h=(y=c[pa])==null?void 0:y.arrayValue,d=At(((T=u==null?void 0:u.values)==null?void 0:T.length)||0,((C=h==null?void 0:h.values)==null?void 0:C.length)||0);return d!==0?d:jd(u,h)}(e.mapValue,t.mapValue);case 11:return function(i,o){if(i===ko.mapValue&&o===ko.mapValue)return 0;if(i===ko.mapValue)return 1;if(o===ko.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const m=kc(c[d],h[d]);if(m!==0)return m;const y=Rr(l[c[d]],u[h[d]]);if(y!==0)return y}return At(c.length,h.length)}(e.mapValue,t.mapValue);default:throw pt(23264,{he:n})}}function $d(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return At(e,t);const n=ys(e),s=ys(t),r=At(n.seconds,s.seconds);return r!==0?r:At(n.nanos,s.nanos)}function jd(e,t){const n=e.values||[],s=t.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Rr(n[r],s[r]);if(i)return i}return At(n.length,s.length)}function Cr(e){return Dc(e)}function Dc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=ys(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return _s(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ct.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Dc(i);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Dc(n.fields[o])}`;return r+"}"}(e.mapValue):pt(61005,{value:e})}function Ho(e){switch(vs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Xa(e);return t?16+Ho(t):16;case 5:return 2*e.stringValue.length;case 6:return _s(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Ho(i),0)}(e.arrayValue);case 10:case 11:return function(s){let r=0;return Is(s.fields,(i,o)=>{r+=i.length+Ho(o)}),r}(e.mapValue);default:throw pt(13486,{value:e})}}function Oc(e){return!!e&&"integerValue"in e}function xu(e){return!!e&&"arrayValue"in e}function qd(e){return!!e&&"nullValue"in e}function Hd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zo(e){return!!e&&"mapValue"in e}function zA(e){var n,s;return((s=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[uy])==null?void 0:s.stringValue)===hy}function _i(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Is(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=_i(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=_i(e.arrayValue.values[n]);return t}return{...e}}function KA(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===HA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this.value=t}static empty(){return new Ue({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!zo(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=_i(n)}setAll(t){let n=me.emptyPath(),s={},r=[];t.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=_i(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(t){const n=this.field(t.popLast());zo(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Rn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let r=n.mapValue.fields[t.get(s)];zo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,s){Is(n,(r,i)=>t[r]=i);for(const r of s)delete t[r]}clone(){return new Ue(_i(this.value))}}function fy(e){const t=[];return Is(e.fields,(n,s)=>{const r=new me([n]);if(zo(s)){const i=fy(s.mapValue).fields;if(i.length===0)t.push(r);else for(const o of i)t.push(r.child(o))}else t.push(r)}),new Ge(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t,n,s,r,i,o,l){this.key=t,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Ie(t,0,yt.min(),yt.min(),yt.min(),Ue.empty(),0)}static newFoundDocument(t,n,s,r){return new Ie(t,1,n,yt.min(),s,r,0)}static newNoDocument(t,n){return new Ie(t,2,n,yt.min(),yt.min(),Ue.empty(),0)}static newUnknownDocument(t,n){return new Ie(t,3,n,yt.min(),yt.min(),Ue.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ue.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ie&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(t,n){this.position=t,this.inclusive=n}}function zd(e,t,n){let s=0;for(let r=0;r<e.position.length;r++){const i=t[r],o=e.position[r];if(i.field.isKeyField()?s=ct.comparator(ct.fromName(o.referenceValue),n.key):s=Rr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Kd(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Rn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t,n="asc"){this.field=t,this.dir=n}}function GA(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{}class re extends dy{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new QA(t,n,s):n==="array-contains"?new YA(t,s):n==="in"?new ZA(t,s):n==="not-in"?new tI(t,s):n==="array-contains-any"?new eI(t,s):new re(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new JA(t,s):new XA(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Rr(n,this.value)):n!==null&&vs(this.value)===vs(n)&&this.matchesComparison(Rr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends dy{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Cn(t,n)}matches(t){return py(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function py(e){return e.op==="and"}function my(e){return WA(e)&&py(e)}function WA(e){for(const t of e.filters)if(t instanceof Cn)return!1;return!0}function Nc(e){if(e instanceof re)return e.field.canonicalString()+e.op.toString()+Cr(e.value);if(my(e))return e.filters.map(t=>Nc(t)).join(",");{const t=e.filters.map(n=>Nc(n)).join(",");return`${e.op}(${t})`}}function gy(e,t){return e instanceof re?function(s,r){return r instanceof re&&s.op===r.op&&s.field.isEqual(r.field)&&Rn(s.value,r.value)}(e,t):e instanceof Cn?function(s,r){return r instanceof Cn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&gy(o,r.filters[l]),!0):!1}(e,t):void pt(19439)}function yy(e){return e instanceof re?function(n){return`${n.field.canonicalString()} ${n.op} ${Cr(n.value)}`}(e):e instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(yy).join(" ,")+"}"}(e):"Filter"}class QA extends re{constructor(t,n,s){super(t,n,s),this.key=ct.fromName(s.referenceValue)}matches(t){const n=ct.comparator(t.key,this.key);return this.matchesComparison(n)}}class JA extends re{constructor(t,n){super(t,"in",n),this.keys=_y("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class XA extends re{constructor(t,n){super(t,"not-in",n),this.keys=_y("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function _y(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(s=>ct.fromName(s.referenceValue))}class YA extends re{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return xu(n)&&Ui(n.arrayValue,this.value)}}class ZA extends re{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ui(this.value.arrayValue,n)}}class tI extends re{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ui(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ui(this.value.arrayValue,n)}}class eI extends re{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!xu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Ui(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(t,n=null,s=[],r=[],i=null,o=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Gd(e,t=null,n=[],s=[],r=null,i=null,o=null){return new nI(e,t,n,s,r,i,o)}function Vu(e){const t=vt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Nc(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Ja(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Cr(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Cr(s)).join(",")),t.Te=n}return t.Te}function ku(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!GA(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!gy(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kd(e.startAt,t.startAt)&&Kd(e.endAt,t.endAt)}function Mc(e){return ct.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sI(e,t,n,s,r,i,o,l){return new Ya(e,t,n,s,r,i,o,l)}function Du(e){return new Ya(e)}function Wd(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function rI(e){return e.collectionGroup!==null}function vi(e){const t=vt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),n.add(i.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new oe(me.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new ga(i,s))}),n.has(me.keyField().canonicalString())||t.Ie.push(new ga(me.keyField(),s))}return t.Ie}function En(e){const t=vt(e);return t.Ee||(t.Ee=iI(t,vi(e))),t.Ee}function iI(e,t){if(e.limitType==="F")return Gd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ga(r.field,i)});const n=e.endAt?new ma(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ma(e.startAt.position,e.startAt.inclusive):null;return Gd(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Lc(e,t,n){return new Ya(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Za(e,t){return ku(En(e),En(t))&&e.limitType===t.limitType}function vy(e){return`${Vu(En(e))}|lt:${e.limitType}`}function fr(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>yy(r)).join(", ")}]`),Ja(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Cr(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Cr(r)).join(",")),`Target(${s})`}(En(e))}; limitType=${e.limitType})`}function tl(e,t){return t.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ct.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(e,t)&&function(s,r){for(const i of vi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(e,t)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(e,t)&&function(s,r){return!(s.startAt&&!function(o,l,c){const u=zd(o,l,c);return o.inclusive?u<=0:u<0}(s.startAt,vi(s),r)||s.endAt&&!function(o,l,c){const u=zd(o,l,c);return o.inclusive?u>=0:u>0}(s.endAt,vi(s),r))}(e,t)}function oI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wy(e){return(t,n)=>{let s=!1;for(const r of vi(e)){const i=aI(r,t,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function aI(e,t,n){const s=e.field.isKeyField()?ct.comparator(t.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Rr(c,u):pt(42886)}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return pt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Is(this.inner,(n,s)=>{for(const[r,i]of s)t(r,i)})}isEmpty(){return ry(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new Gt(ct.comparator);function Kn(){return lI}const Ey=new Gt(ct.comparator);function si(...e){let t=Ey;for(const n of e)t=t.insert(n.key,n);return t}function Ty(e){let t=Ey;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function qs(){return wi()}function by(){return wi()}function wi(){return new er(e=>e.toString(),(e,t)=>e.isEqual(t))}const cI=new Gt(ct.comparator),uI=new oe(ct.comparator);function It(...e){let t=uI;for(const n of e)t=t.add(n);return t}const hI=new oe(At);function fI(){return hI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fa(t)?"-0":t}}function Ay(e){return{integerValue:""+e}}function Iy(e,t){return UA(t)?Ay(t):Ou(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this._=void 0}}function dI(e,t,n){return e instanceof Bi?function(r,i){const o={fields:{[ay]:{stringValue:oy},[cy]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Pu(i)&&(i=Xa(i)),i&&(o.fields[ly]=i),{mapValue:o}}(n,t):e instanceof $i?Ry(e,t):e instanceof ji?Cy(e,t):function(r,i){const o=Sy(r,i),l=Qd(o)+Qd(r.Ae);return Oc(o)&&Oc(r.Ae)?Ay(l):Ou(r.serializer,l)}(e,t)}function pI(e,t,n){return e instanceof $i?Ry(e,t):e instanceof ji?Cy(e,t):n}function Sy(e,t){return e instanceof qi?function(s){return Oc(s)||function(i){return!!i&&"doubleValue"in i}(s)}(t)?t:{integerValue:0}:null}class Bi extends el{}class $i extends el{constructor(t){super(),this.elements=t}}function Ry(e,t){const n=Py(t);for(const s of e.elements)n.some(r=>Rn(r,s))||n.push(s);return{arrayValue:{values:n}}}class ji extends el{constructor(t){super(),this.elements=t}}function Cy(e,t){let n=Py(t);for(const s of e.elements)n=n.filter(r=>!Rn(r,s));return{arrayValue:{values:n}}}class qi extends el{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Qd(e){return Xt(e.integerValue||e.doubleValue)}function Py(e){return xu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(t,n){this.field=t,this.transform=n}}function mI(e,t){return e.field.isEqual(t.field)&&function(s,r){return s instanceof $i&&r instanceof $i||s instanceof ji&&r instanceof ji?Sr(s.elements,r.elements,Rn):s instanceof qi&&r instanceof qi?Rn(s.Ae,r.Ae):s instanceof Bi&&r instanceof Bi}(e.transform,t.transform)}class gI{constructor(t,n){this.version=t,this.transformResults=n}}class Tn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Tn}static exists(t){return new Tn(void 0,t)}static updateTime(t){return new Tn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ko(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class nl{}function Vy(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Dy(e.key,Tn.none()):new so(e.key,e.data,Tn.none());{const n=e.data,s=Ue.empty();let r=new oe(me.comparator);for(let i of t.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Ss(e.key,s,new Ge(r.toArray()),Tn.none())}}function yI(e,t,n){e instanceof so?function(r,i,o){const l=r.value.clone(),c=Xd(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Ss?function(r,i,o){if(!Ko(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Xd(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(ky(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Ei(e,t,n,s){return e instanceof so?function(i,o,l,c){if(!Ko(i.precondition,o))return l;const u=i.value.clone(),h=Yd(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,n,s):e instanceof Ss?function(i,o,l,c){if(!Ko(i.precondition,o))return l;const u=Yd(i.fieldTransforms,c,o),h=o.data;return h.setAll(ky(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(e,t,n,s):function(i,o,l){return Ko(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,n)}function _I(e,t){let n=null;for(const s of e.fieldTransforms){const r=t.data.field(s.field),i=Sy(s.transform,r||null);i!=null&&(n===null&&(n=Ue.empty()),n.set(s.field,i))}return n||null}function Jd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Sr(s,r,(i,o)=>mI(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class so extends nl{constructor(t,n,s,r=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ss extends nl{constructor(t,n,s,r,i=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ky(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function Xd(e,t,n){const s=new Map;Ot(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const i=e[r],o=i.transform,l=t.data.field(i.field);s.set(i.field,pI(o,l,n[r]))}return s}function Yd(e,t,n){const s=new Map;for(const r of e){const i=r.transform,o=n.data.field(r.field);s.set(r.field,dI(i,o,t))}return s}class Dy extends nl{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vI extends nl{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(t,n,s,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(t.key)&&yI(i,t,s[r])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Ei(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Ei(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=by();return this.mutations.forEach(r=>{const i=t.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=Vy(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(yt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),It())}isEqual(t){return this.batchId===t.batchId&&Sr(this.mutations,t.mutations,(n,s)=>Jd(n,s))&&Sr(this.baseMutations,t.baseMutations,(n,s)=>Jd(n,s))}}class Nu{constructor(t,n,s,r){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(t,n,s){Ot(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let r=function(){return cI}();const i=t.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Nu(t,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ee,Rt;function bI(e){switch(e){case q.OK:return pt(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return pt(15467,{code:e})}}function Oy(e){if(e===void 0)return zn("GRPC error has no .code"),q.UNKNOWN;switch(e){case ee.OK:return q.OK;case ee.CANCELLED:return q.CANCELLED;case ee.UNKNOWN:return q.UNKNOWN;case ee.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case ee.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case ee.INTERNAL:return q.INTERNAL;case ee.UNAVAILABLE:return q.UNAVAILABLE;case ee.UNAUTHENTICATED:return q.UNAUTHENTICATED;case ee.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case ee.NOT_FOUND:return q.NOT_FOUND;case ee.ALREADY_EXISTS:return q.ALREADY_EXISTS;case ee.PERMISSION_DENIED:return q.PERMISSION_DENIED;case ee.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case ee.ABORTED:return q.ABORTED;case ee.OUT_OF_RANGE:return q.OUT_OF_RANGE;case ee.UNIMPLEMENTED:return q.UNIMPLEMENTED;case ee.DATA_LOSS:return q.DATA_LOSS;default:return pt(39323,{code:e})}}(Rt=ee||(ee={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=new hs([4294967295,4294967295],0);function Zd(e){const t=AI().encode(e),n=new Wg;return n.update(t),new Uint8Array(n.digest())}function tp(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new hs([n,s],0),new hs([r,i],0)]}class Mu{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ri(`Invalid padding: ${n}`);if(s<0)throw new ri(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new ri(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new ri(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=hs.fromNumber(this.ge)}ye(t,n,s){let r=t.add(n.multiply(hs.fromNumber(s)));return r.compare(II)===1&&(r=new hs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Zd(t),[s,r]=tp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(t,n,s){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Mu(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const n=Zd(t),[s,r]=tp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class ri extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,n,s,r,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const r=new Map;return r.set(t,ro.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new sl(yt.min(),r,new Gt(At),Kn(),It())}}class ro{constructor(t,n,s,r,i){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new ro(s,n,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,n,s,r){this.be=t,this.removedTargetIds=n,this.key=s,this.De=r}}class Ny{constructor(t,n){this.targetId=t,this.Ce=n}}class My{constructor(t,n,s=ge.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=r}}class ep{constructor(){this.ve=0,this.Fe=np(),this.Me=ge.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=It(),n=It(),s=It();return this.Fe.forEach((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:pt(38017,{changeType:i})}}),new ro(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=np()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ot(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class SI{constructor(t){this.Ge=t,this.ze=new Map,this.je=Kn(),this.Je=Do(),this.He=Do(),this.Ye=new Gt(At)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:pt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(t){const n=t.targetId,s=t.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Mc(i))if(s===0){const o=new ct(i.path);this.et(n,o,Ie.newNoDocument(o,yt.min()))}else Ot(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=_s(s).toUint8Array()}catch(c){if(c instanceof iy)return Ir("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Mu(o,r,i)}catch(c){return Ir(c instanceof ri?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(t){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Mc(l.target)){const c=new ct(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ie.newNoDocument(c,t))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=It();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(t));const r=new sl(t,n,this.Ye,this.je,s);return this.je=Kn(),this.Je=Do(),this.He=Do(),this.Ye=new Gt(At),r}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new ep,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new oe(At),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new oe(At),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||et("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new ep),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Do(){return new Gt(ct.comparator)}function np(){return new Gt(ct.comparator)}const RI={asc:"ASCENDING",desc:"DESCENDING"},CI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PI={and:"AND",or:"OR"};class xI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Fc(e,t){return e.useProto3Json||Ja(t)?t:{value:t}}function ya(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ly(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function VI(e,t){return ya(e,t.toTimestamp())}function bn(e){return Ot(!!e,49232),yt.fromTimestamp(function(n){const s=ys(n);return new $t(s.seconds,s.nanos)}(e))}function Lu(e,t){return Uc(e,t).canonicalString()}function Uc(e,t){const n=function(r){return new Kt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Fy(e){const t=Kt.fromString(e);return Ot(qy(t),10190,{key:t.toString()}),t}function Bc(e,t){return Lu(e.databaseId,t.path)}function Jl(e,t){const n=Fy(t);if(n.get(1)!==e.databaseId.projectId)throw new it(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new it(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ct(By(n))}function Uy(e,t){return Lu(e.databaseId,t)}function kI(e){const t=Fy(e);return t.length===4?Kt.emptyPath():By(t)}function $c(e){return new Kt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function By(e){return Ot(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function sp(e,t,n){return{name:Bc(e,t),fields:n.value.mapValue.fields}}function DI(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:pt(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Ot(h===void 0||typeof h=="string",58123),ge.fromBase64String(h||"")):(Ot(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ge.fromUint8Array(h||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const h=u.code===void 0?q.UNKNOWN:Oy(u.code);return new it(h,u.message||"")}(o);n=new My(s,r,i,l||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=Jl(e,s.document.name),i=bn(s.document.updateTime),o=s.document.createTime?bn(s.document.createTime):yt.min(),l=new Ue({mapValue:{fields:s.document.fields}}),c=Ie.newFoundDocument(r,i,o,l),u=s.targetIds||[],h=s.removedTargetIds||[];n=new Go(u,h,c.key,c)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=Jl(e,s.document),i=s.readTime?bn(s.readTime):yt.min(),o=Ie.newNoDocument(r,i),l=s.removedTargetIds||[];n=new Go([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=Jl(e,s.document),i=s.removedTargetIds||[];n=new Go([],i,r,null)}else{if(!("filter"in t))return pt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new TI(r,i),l=s.targetId;n=new Ny(l,o)}}return n}function OI(e,t){let n;if(t instanceof so)n={update:sp(e,t.key,t.value)};else if(t instanceof Dy)n={delete:Bc(e,t.key)};else if(t instanceof Ss)n={update:sp(e,t.key,t.data),updateMask:qI(t.fieldMask)};else{if(!(t instanceof vI))return pt(16599,{Vt:t.type});n={verify:Bc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof Bi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof $i)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ji)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof qi)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw pt(20930,{transform:o.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:VI(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:pt(27497)}(e,t.precondition)),n}function NI(e,t){return e&&e.length>0?(Ot(t!==void 0,14353),e.map(n=>function(r,i){let o=r.updateTime?bn(r.updateTime):bn(i);return o.isEqual(yt.min())&&(o=bn(i)),new gI(o,r.transformResults||[])}(n,t))):[]}function MI(e,t){return{documents:[Uy(e,t.path)]}}function LI(e,t){const n={structuredQuery:{}},s=t.path;let r;t.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Uy(e,r);const i=function(u){if(u.length!==0)return jy(Cn.create(u,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:dr(m.field),direction:BI(m.dir)}}(h))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Fc(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:n,parent:r}}function FI(e){let t=kI(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Ot(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let i=[];n.where&&(i=function(d){const m=$y(d);return m instanceof Cn&&my(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(T){return new ga(pr(T.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(d){let m;return m=typeof d=="object"?d.value:d,Ja(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(d){const m=!!d.before,y=d.values||[];return new ma(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const m=!d.before,y=d.values||[];return new ma(y,m)}(n.endAt)),sI(t,r,o,i,l,"F",c,u)}function UI(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt(28987,{purpose:r})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function $y(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=pr(n.unaryFilter.field);return re.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=pr(n.unaryFilter.field);return re.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=pr(n.unaryFilter.field);return re.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=pr(n.unaryFilter.field);return re.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pt(61313);default:return pt(60726)}}(e):e.fieldFilter!==void 0?function(n){return re.create(pr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pt(58110);default:return pt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(s=>$y(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pt(1026)}}(n.compositeFilter.op))}(e):pt(30097,{filter:e})}function BI(e){return RI[e]}function $I(e){return CI[e]}function jI(e){return PI[e]}function dr(e){return{fieldPath:e.canonicalString()}}function pr(e){return me.fromServerFormat(e.fieldPath)}function jy(e){return e instanceof re?function(n){if(n.op==="=="){if(Hd(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NAN"}};if(qd(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hd(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NOT_NAN"}};if(qd(n.value))return{unaryFilter:{field:dr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dr(n.field),op:$I(n.op),value:n.value}}}(e):e instanceof Cn?function(n){const s=n.getFilters().map(r=>jy(r));return s.length===1?s[0]:{compositeFilter:{op:jI(n.op),filters:s}}}(e):pt(54877,{filter:e})}function qI(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function qy(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t,n,s,r,i=yt.min(),o=yt.min(),l=ge.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new is(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t){this.yt=t}}function zI(e){const t=FI({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Lc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.Cn=new GI}addToCollectionParentIndex(t,n){return this.Cn.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(gs.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(gs.min())}updateCollectionGroup(t,n,s){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}}class GI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n]||new oe(Kt.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(t){return(this.index[t]||new oe(Kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hy=41943040;class Le{static withCacheSize(t){return new Le(t,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Le.DEFAULT_COLLECTION_PERCENTILE=10,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Le.DEFAULT=new Le(Hy,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Le.DISABLED=new Le(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Pr(0)}static cr(){return new Pr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="LruGarbageCollector",WI=1048576;function op([e,t],[n,s]){const r=At(e,n);return r===0?At(t,s):r}class QI{constructor(t){this.Ir=t,this.buffer=new oe(op),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();op(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class JI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){et(ip,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nr(n)?et(ip,"Ignoring IndexedDB error during garbage collection: ",n):await Or(n)}await this.Vr(3e5)})}}class XI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return $.resolve(Qa.ce);const s=new QI(n);return this.mr.forEachTarget(t,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(et("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(rp)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rp):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,r,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(t,r))).next(d=>(s=d,l=Date.now(),this.removeTargets(t,s,n))).next(d=>(i=d,c=Date.now(),this.removeOrphanedDocuments(t,s))).next(d=>(u=Date.now(),hr()<=Ct.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function YI(e,t){return new XI(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.changes=new er(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ie.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(t,n,s,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(s!==null&&Ei(s.mutation,r,Ge.empty(),$t.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,It()).next(()=>s))}getLocalViewOfDocuments(t,n,s=It()){const r=qs();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,s).next(i=>{let o=si();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const s=qs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,It()))}populateOverlays(t,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(t,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(t,n,s,r){let i=Kn();const o=wi(),l=function(){return wi()}();return n.forEach((c,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Ss)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Ei(h.mutation,u,h.mutation.getFieldMask(),$t.now())):o.set(u.key,Ge.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new tS(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(t,n){const s=wi();let r=new Gt((o,l)=>o-l),i=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=s.get(c)||Ge.empty();h=l.applyToLocalView(u,h),s.set(c,h);const d=(r.get(l.batchId)||It()).add(c);r=r.insert(l.batchId,d)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,d=by();h.forEach(m=>{if(!i.has(m)){const y=Vy(n.get(m),s.get(m));y!==null&&d.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return $.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,r){return function(o){return ct.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):rI(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,r):this.getDocumentsMatchingCollectionQuery(t,n,s,r)}getNextDocuments(t,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,r-i.size):$.resolve(qs());let l=Mi,c=i;return o.next(u=>$.forEach(u,(h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(t,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(t,u,i)).next(()=>this.computeViews(t,c,u,It())).next(h=>({batchId:l,changes:Ty(h)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ct(n)).next(s=>{let r=si();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,s,r){const i=n.collectionGroup;let o=si();return this.indexManager.getCollectionParents(t,i).next(l=>$.forEach(l,c=>{const u=function(d,m){return new Ya(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,u,s,r).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,i,r))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ie.newInvalidDocument(h)))});let l=si();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Ei(h.mutation,u,Ge.empty(),$t.now()),tl(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:bn(r.createTime)}}(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(r){return{name:r.name,query:zI(r.bundledQuery),readTime:bn(r.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.overlays=new Gt(ct.comparator),this.qr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){const s=qs();return $.forEach(n,r=>this.getOverlay(t,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((r,i)=>{this.St(t,n,i)}),$.resolve()}removeOverlaysForBatchId(t,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(t,n,s){const r=qs(),i=n.length+1,o=new ct(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return $.resolve(r)}getOverlaysForCollectionGroup(t,n,s,r){let i=new Gt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=qs(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=qs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=r)););return $.resolve(l)}St(t,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new EI(n,s));let i=this.qr.get(n);i===void 0&&(i=It(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.sessionToken=ge.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(){this.Qr=new oe(ae.$r),this.Ur=new oe(ae.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new ae(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Gr(new ae(t,n))}zr(t,n){t.forEach(s=>this.removeReference(s,n))}jr(t){const n=new ct(new Kt([])),s=new ae(n,t),r=new ae(n,t+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ct(new Kt([])),s=new ae(n,t),r=new ae(n,t+1);let i=It();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new ae(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class ae{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ct.comparator(t.key,n.key)||At(t.Yr,n.Yr)}static Kr(t,n){return At(t.Yr,n.Yr)||ct.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new oe(ae.$r)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wI(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new ae(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Cu:this.tr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new ae(n,0),r=new ae(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new oe(At);return n.forEach(r=>{const i=new ae(r,0),o=new ae(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,r=s.length+1;let i=s;ct.isDocumentKey(i)||(i=i.child(""));const o=new ae(new ct(i),0);let l=new oe(At);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(l=l.add(c.Yr)),!0)},o),$.resolve(this.ti(l))}ti(t){const n=[];return t.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Ot(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,r=>{const i=new ae(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,n){const s=new ae(n,0),r=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(t){this.ri=t,this.docs=function(){return new Gt(ct.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():Ie.newInvalidDocument(n))}getEntries(t,n){let s=Kn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ie.newInvalidDocument(r))}),$.resolve(s)}getDocumentsMatchingQuery(t,n,s,r){let i=Kn();const o=n.path,l=new ct(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||NA(OA(h),s)<=0||(r.has(h.key)||tl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(t,n,s,r){pt(9500)}ii(t,n){return $.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new aS(this)}getSize(t){return $.resolve(this.size)}}class aS extends ZI{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(s)}),$.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(t){this.persistence=t,this.si=new er(n=>Vu(n),ku),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.oi=0,this._i=new Fu,this.targetCount=0,this.ai=Pr.ur()}forEachTarget(t,n){return this.si.forEach((s,r)=>n(r)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Pr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.Pr(n),$.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),$.waitFor(i).next(()=>r)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(t,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(t,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(t,n){this.ui={},this.overlays={},this.ci=new Qa(0),this.li=!1,this.li=!0,this.hi=new rS,this.referenceDelegate=t(this),this.Pi=new lS(this),this.indexManager=new KI,this.remoteDocumentCache=function(r){return new oS(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new HI(n),this.Ii=new nS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new sS,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new iS(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){et("MemoryPersistence","Starting transaction:",t);const r=new cS(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(t,n){return $.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,n)))}}class cS extends LA{constructor(t){super(),this.currentSequenceNumber=t}}class Uu{constructor(t){this.persistence=t,this.Ri=new Fu,this.Vi=null}static mi(t){return new Uu(t)}get fi(){if(this.Vi)return this.Vi;throw pt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,s=>{const r=ct.fromPath(s);return this.gi(t,r).next(i=>{i||n.removeEntry(r,yt.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class _a{constructor(t,n){this.persistence=t,this.pi=new er(s=>BA(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=YI(this,n)}static mi(t,n){return new _a(t,n)}Ei(){}di(t){return $.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(r=>s+r))}wr(t){let n=0;return this.pr(t,s=>{n++}).next(()=>n)}pr(t,n){return $.forEach(this.pi,(s,r)=>this.br(t,s,r).next(i=>i?$.resolve():n(r)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(t,o=>this.br(t,o,n).next(l=>{l||(s++,i.removeEntry(o,yt.min()))})).next(()=>i.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Ho(t.data.value)),n}br(t,n,s){return $.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return $.resolve(r!==void 0&&r>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(t,n,s,r){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=r}static As(t,n){let s=It(),r=It();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Bu(t,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return sb()?8:FA(tb())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,r){const i={result:null};return this.ys(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(t,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new uS;return this.Ss(t,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(t,n,o,l.size)})}).next(()=>i.result)}bs(t,n,s,r){return s.documentReadCount<this.fs?(hr()<=Ct.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",fr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(hr()<=Ct.DEBUG&&et("QueryEngine","Query:",fr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(hr()<=Ct.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",fr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,En(n))):$.resolve())}ys(t,n){if(Wd(n))return $.resolve(null);let s=En(n);return this.indexManager.getIndexType(t,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Lc(n,null,"F"),s=En(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(i=>{const o=It(...i);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,s).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(t,Lc(n,null,"F")):this.vs(t,u,n,c)}))})))}ws(t,n,s,r){return Wd(n)||r.isEqual(yt.min())?$.resolve(null):this.ps.getDocuments(t,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?$.resolve(null):(hr()<=Ct.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fr(n)),this.vs(t,o,n,DA(r,Mi)).next(l=>l))})}Ds(t,n){let s=new oe(wy(t));return n.forEach((r,i)=>{tl(t,i)&&(s=s.add(i))}),s}Cs(t,n,s,r){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(t,n,s){return hr()<=Ct.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",fr(n)),this.ps.getDocumentsMatchingQuery(t,n,gs.min(),s)}vs(t,n,s,r){return this.ps.getDocumentsMatchingQuery(t,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u="LocalStore",fS=3e8;class dS{constructor(t,n,s,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Gt(At),this.xs=new er(i=>Vu(i),ku),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new eS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function pS(e,t,n,s){return new dS(e,t,n,s)}async function Ky(e,t){const n=vt(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=It();for(const u of r){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function mS(e,t){const n=vt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const d=u.batch,m=d.keys();let y=$.resolve();return m.forEach(T=>{y=y.next(()=>h.getEntry(c,T)).next(C=>{const x=u.docVersions.get(T);Ot(x!==null,48541),C.version.compareTo(x)<0&&(d.applyToRemoteDocument(C,u),C.isValidDocument()&&(C.setReadTime(u.commitVersion),h.addEntry(C)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,d))}(n,s,t,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=It();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>n.localDocuments.getDocuments(s,r))})}function Gy(e){const t=vt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function gS(e,t){const n=vt(e),s=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];t.targetChanges.forEach((h,d)=>{const m=r.get(d);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let y=m.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(d)!==null?y=y.withResumeToken(ge.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,s)),r=r.insert(d,y),function(C,x,M){return C.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=fS?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(m,y,h)&&l.push(n.Pi.updateTargetData(i,y))});let c=Kn(),u=It();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(yS(i,o,t.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!s.isEqual(yt.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(h)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=r,i))}function yS(e,t,n){let s=It(),r=It();return n.forEach(i=>s=s.add(i)),t.getEntries(e,s).next(i=>{let o=Kn();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(yt.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):et($u,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:r}})}function _S(e,t){const n=vt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Cu),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function vS(e,t){const n=vt(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,t).next(i=>i?(r=i,$.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new is(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s})}async function jc(e,t,n){const s=vt(e),r=s.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Nr(o))throw o;et($u,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ms=s.Ms.remove(t),s.xs.delete(r.target)}function ap(e,t,n){const s=vt(e);let r=yt.min(),i=It();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const d=vt(c),m=d.xs.get(h);return m!==void 0?$.resolve(d.Ms.get(m)):d.Pi.getTargetData(u,h)}(s,o,En(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,t,n?r:yt.min(),n?i:It())).next(l=>(wS(s,oI(t),l),{documents:l,Qs:i})))}function wS(e,t,n){let s=e.Os.get(t)||yt.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),e.Os.set(t,s)}class lp{constructor(){this.activeTargetIds=fI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ES{constructor(){this.Mo=new lp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new lp,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="ConnectivityMonitor";class up{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){et(cp,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){et(cp,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo=null;function qc(){return Oo===null?Oo=function(){return 268435456+Math.round(2147483648*Math.random())}():Oo++,"0x"+Oo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl="RestConnection",bS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AS{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===da?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(t,n,s,r,i){const o=qc(),l=this.zo(t,n.toUriEncodedString());et(Xl,`Sending RPC '${t}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(l),h=Tu(u);return this.Jo(t,l,c,s,h).then(d=>(et(Xl,`Received RPC '${t}' ${o}: `,d),d),d=>{throw Ir(Xl,`RPC '${t}' ${o} failed with error: `,d,"url: ",l,"request:",s),d})}Ho(t,n,s,r,i,o){return this.Go(t,n,s,r,i)}jo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Dr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>t[i]=r),s&&s.headers.forEach((r,i)=>t[i]=r)}zo(t,n){const s=bS[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we="WebChannelConnection";class SS extends AS{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,r,i){const o=qc();return new Promise((l,c)=>{const u=new Qg;u.setWithCredentials(!0),u.listenOnce(Jg.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case qo.NO_ERROR:const d=u.getResponseJson();et(we,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),l(d);break;case qo.TIMEOUT:et(we,`RPC '${t}' ${o} timed out`),c(new it(q.DEADLINE_EXCEEDED,"Request time out"));break;case qo.HTTP_ERROR:const m=u.getStatus();if(et(we,`RPC '${t}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const C=function(M){const N=M.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(N)>=0?N:q.UNKNOWN}(T.status);c(new it(C,T.message))}else c(new it(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new it(q.UNAVAILABLE,"Connection failed."));break;default:pt(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{et(we,`RPC '${t}' ${o} completed.`)}});const h=JSON.stringify(r);et(we,`RPC '${t}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(t,n,s){const r=qc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Zg(),l=Yg(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");et(we,`Creating RPC '${t}' stream ${r}: ${h}`,c);const d=o.createWebChannel(h,c);this.I_(d);let m=!1,y=!1;const T=new IS({Yo:x=>{y?et(we,`Not sending because RPC '${t}' stream ${r} is closed:`,x):(m||(et(we,`Opening RPC '${t}' stream ${r} transport.`),d.open(),m=!0),et(we,`RPC '${t}' stream ${r} sending:`,x),d.send(x))},Zo:()=>d.close()}),C=(x,M,N)=>{x.listen(M,B=>{try{N(B)}catch(H){setTimeout(()=>{throw H},0)}})};return C(d,ni.EventType.OPEN,()=>{y||(et(we,`RPC '${t}' stream ${r} transport opened.`),T.o_())}),C(d,ni.EventType.CLOSE,()=>{y||(y=!0,et(we,`RPC '${t}' stream ${r} transport closed`),T.a_(),this.E_(d))}),C(d,ni.EventType.ERROR,x=>{y||(y=!0,Ir(we,`RPC '${t}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),T.a_(new it(q.UNAVAILABLE,"The operation could not be completed")))}),C(d,ni.EventType.MESSAGE,x=>{var M;if(!y){const N=x.data[0];Ot(!!N,16349);const B=N,H=(B==null?void 0:B.error)||((M=B[0])==null?void 0:M.error);if(H){et(we,`RPC '${t}' stream ${r} received error:`,H);const nt=H.status;let st=function(_){const b=ee[_];if(b!==void 0)return Oy(b)}(nt),S=H.message;st===void 0&&(st=q.INTERNAL,S="Unknown error status: "+nt+" with message "+H.message),y=!0,T.a_(new it(st,S)),d.close()}else et(we,`RPC '${t}' stream ${r} received:`,N),T.u_(N)}}),C(l,Xg.STAT_EVENT,x=>{x.stat===Vc.PROXY?et(we,`RPC '${t}' stream ${r} detected buffering proxy`):x.stat===Vc.NOPROXY&&et(we,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Yl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(e){return new xI(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(t,n,s=1e3,r=1.5,i=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&et("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="PersistentStream";class Qy{constructor(t,n,s,r,i,o,l,c){this.Mi=t,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wy(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(zn(n.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{t(()=>{const r=new it(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return et(hp,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(et(hp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RS extends Qy{constructor(t,n,s,r,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=DI(this.serializer,t),s=function(i){if(!("targetChange"in i))return yt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?yt.min():o.readTime?bn(o.readTime):yt.min()}(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=$c(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Mc(c)?{documents:MI(i,c)}:{query:LI(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Ly(i,o.resumeToken);const u=Fc(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(yt.min())>0){l.readTime=ya(i,o.snapshotVersion.toTimestamp());const u=Fc(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const s=UI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=$c(this.serializer),n.removeTarget=t,this.q_(n)}}class CS extends Qy{constructor(t,n,s,r,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ot(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ot(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ot(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=NI(t.writeResults,t.commitTime),s=bn(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=$c(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>OI(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{}class xS extends PS{constructor(t,n,s,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new it(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(t,Uc(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new it(q.UNKNOWN,i.toString())})}Ho(t,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,Uc(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new it(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class VS{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zn(n),this.aa=!1):et("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="RemoteStore";class kS{constructor(t,n,s,r,i){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{nr(this)&&(et(Ys,"Restarting streams for network reachability change."),await async function(c){const u=vt(c);u.Ea.add(4),await io(u),u.Ra.set("Unknown"),u.Ea.delete(4),await il(u)}(this))})}),this.Ra=new VS(s,r)}}async function il(e){if(nr(e))for(const t of e.da)await t(!0)}async function io(e){for(const t of e.da)await t(!1)}function Jy(e,t){const n=vt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),zu(n)?Hu(n):Mr(n).O_()&&qu(n,t))}function ju(e,t){const n=vt(e),s=Mr(n);n.Ia.delete(t),s.O_()&&Xy(n,t),n.Ia.size===0&&(s.O_()?s.L_():nr(n)&&n.Ra.set("Unknown"))}function qu(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Mr(e).Y_(t)}function Xy(e,t){e.Va.Ue(t),Mr(e).Z_(t)}function Hu(e){e.Va=new SI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Mr(e).start(),e.Ra.ua()}function zu(e){return nr(e)&&!Mr(e).x_()&&e.Ia.size>0}function nr(e){return vt(e).Ea.size===0}function Yy(e){e.Va=void 0}async function DS(e){e.Ra.set("Online")}async function OS(e){e.Ia.forEach((t,n)=>{qu(e,t)})}async function NS(e,t){Yy(e),zu(e)?(e.Ra.ha(t),Hu(e)):e.Ra.set("Unknown")}async function MS(e,t,n){if(e.Ra.set("Online"),t instanceof My&&t.state===2&&t.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(e,t)}catch(s){et(Ys,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await va(e,s)}else if(t instanceof Go?e.Va.Ze(t):t instanceof Ny?e.Va.st(t):e.Va.tt(t),!n.isEqual(yt.min()))try{const s=await Gy(e.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(ge.EMPTY_BYTE_STRING,h.snapshotVersion)),Xy(i,c);const d=new is(h.target,c,u,h.sequenceNumber);qu(i,d)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(s){et(Ys,"Failed to raise snapshot:",s),await va(e,s)}}async function va(e,t,n){if(!Nr(t))throw t;e.Ea.add(1),await io(e),e.Ra.set("Offline"),n||(n=()=>Gy(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{et(Ys,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await il(e)})}function Zy(e,t){return t().catch(n=>va(e,n,t))}async function ol(e){const t=vt(e),n=ws(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Cu;for(;LS(t);)try{const r=await _S(t.localStore,s);if(r===null){t.Ta.length===0&&n.L_();break}s=r.batchId,FS(t,r)}catch(r){await va(t,r)}t_(t)&&e_(t)}function LS(e){return nr(e)&&e.Ta.length<10}function FS(e,t){e.Ta.push(t);const n=ws(e);n.O_()&&n.X_&&n.ea(t.mutations)}function t_(e){return nr(e)&&!ws(e).x_()&&e.Ta.length>0}function e_(e){ws(e).start()}async function US(e){ws(e).ra()}async function BS(e){const t=ws(e);for(const n of e.Ta)t.ea(n.mutations)}async function $S(e,t,n){const s=e.Ta.shift(),r=Nu.from(s,t,n);await Zy(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await ol(e)}async function jS(e,t){t&&ws(e).X_&&await async function(s,r){if(function(o){return bI(o)&&o!==q.ABORTED}(r.code)){const i=s.Ta.shift();ws(s).B_(),await Zy(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await ol(s)}}(e,t),t_(e)&&e_(e)}async function fp(e,t){const n=vt(e);n.asyncQueue.verifyOperationInProgress(),et(Ys,"RemoteStore received new credentials");const s=nr(n);n.Ea.add(3),await io(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await il(n)}async function qS(e,t){const n=vt(e);t?(n.Ea.delete(2),await il(n)):t||(n.Ea.add(2),await io(n),n.Ra.set("Unknown"))}function Mr(e){return e.ma||(e.ma=function(n,s,r){const i=vt(n);return i.sa(),new RS(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(e.datastore,e.asyncQueue,{Xo:DS.bind(null,e),t_:OS.bind(null,e),r_:NS.bind(null,e),H_:MS.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),zu(e)?Hu(e):e.Ra.set("Unknown")):(await e.ma.stop(),Yy(e))})),e.ma}function ws(e){return e.fa||(e.fa=function(n,s,r){const i=vt(n);return i.sa(),new CS(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:US.bind(null,e),r_:jS.bind(null,e),ta:BS.bind(null,e),na:$S.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await ol(e)):(await e.fa.stop(),e.Ta.length>0&&(et(Ys,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(t,n,s,r,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,r,i){const o=Date.now()+s,l=new Ku(t,n,o,r,i);return l.start(s),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it(q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gu(e,t){if(zn("AsyncQueue",`${t}: ${e}`),Nr(e))return new it(q.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{static emptySet(t){return new Tr(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ct.comparator(n.key,s.key):(n,s)=>ct.comparator(n.key,s.key),this.keyedMap=si(),this.sortedSet=new Gt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Tr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Tr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this.ga=new Gt(ct.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):pt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,s)=>{t.push(s)}),t}}class xr{constructor(t,n,s,r,i,o,l,c,u){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new xr(t,n,Tr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Za(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class zS{constructor(){this.queries=pp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=vt(n),i=r.queries;r.queries=pp(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new it(q.ABORTED,"Firestore shutting down"))}}function pp(){return new er(e=>vy(e),Za)}async function KS(e,t){const n=vt(e);let s=3;const r=t.query;let i=n.queries.get(r);i?!i.ba()&&t.Da()&&(s=2):(i=new HS,s=t.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Gu(o,`Initialization of query '${fr(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Wu(n)}async function GS(e,t){const n=vt(e),s=t.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(t);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=t.Da()?0:1:!i.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function WS(e,t){const n=vt(e);let s=!1;for(const r of t){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&Wu(n)}function QS(e,t,n){const s=vt(e),r=s.queries.get(t);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(t)}function Wu(e){e.Ca.forEach(t=>{t.next()})}var Hc,mp;(mp=Hc||(Hc={})).Ma="default",mp.Cache="cache";class JS{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const r of t.docChanges)r.type!==3&&s.push(r);t=new xr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=xr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Hc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(t){this.key=t}}class s_{constructor(t){this.key=t}}class XS{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=It(),this.mutatedKeys=It(),this.eu=wy(t),this.tu=new Tr(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new dp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,d)=>{const m=r.get(h),y=tl(this.query,d)?d:null,T=!!m&&this.mutatedKeys.has(m.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;m&&y?m.data.isEqual(y.data)?T!==C&&(s.track({type:3,doc:y}),x=!0):this.su(m,y)||(s.track({type:2,doc:y}),x=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(l=!0)):!m&&y?(s.track({type:0,doc:y}),x=!0):m&&!y&&(s.track({type:1,doc:m}),x=!0,(c||u)&&(l=!0)),x&&(y?(o=o.add(y),i=C?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,r){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((h,d)=>function(y,T){const C=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt(20277,{Rt:x})}};return C(y)-C(T)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new xr(this.query,t.tu,i,o,t.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=It(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return t.forEach(s=>{this.Xa.has(s)||n.push(new s_(s))}),this.Xa.forEach(s=>{t.has(s)||n.push(new n_(s))}),n}cu(t){this.Ya=t.Qs,this.Xa=It();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return xr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qu="SyncEngine";class YS{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class ZS{constructor(t){this.key=t,this.hu=!1}}class tR{constructor(t,n,s,r,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new er(l=>vy(l),Za),this.Iu=new Map,this.Eu=new Set,this.du=new Gt(ct.comparator),this.Au=new Map,this.Ru=new Fu,this.Vu={},this.mu=new Map,this.fu=Pr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eR(e,t,n=!0){const s=c_(e);let r;const i=s.Tu.get(t);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await r_(s,t,n,!0),r}async function nR(e,t){const n=c_(e);await r_(n,t,!0,!1)}async function r_(e,t,n,s){const r=await vS(e.localStore,En(t)),i=r.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await sR(e,t,i,o==="current",r.resumeToken)),e.isPrimaryClient&&n&&Jy(e.remoteStore,r),l}async function sR(e,t,n,s,r){e.pu=(d,m,y)=>async function(C,x,M,N){let B=x.view.ru(M);B.Cs&&(B=await ap(C.localStore,x.query,!1).then(({documents:S})=>x.view.ru(S,B)));const H=N&&N.targetChanges.get(x.targetId),nt=N&&N.targetMismatches.get(x.targetId)!=null,st=x.view.applyChanges(B,C.isPrimaryClient,H,nt);return yp(C,x.targetId,st.au),st.snapshot}(e,d,m,y);const i=await ap(e.localStore,t,!0),o=new XS(t,i.Qs),l=o.ru(i.documents),c=ro.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",r),u=o.applyChanges(l,e.isPrimaryClient,c);yp(e,n,u.au);const h=new YS(t,n,o);return e.Tu.set(t,h),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function rR(e,t,n){const s=vt(e),r=s.Tu.get(t),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!Za(o,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await jc(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&ju(s.remoteStore,r.targetId),zc(s,r.targetId)}).catch(Or)):(zc(s,r.targetId),await jc(s.localStore,r.targetId,!0))}async function iR(e,t){const n=vt(e),s=n.Tu.get(t),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ju(n.remoteStore,s.targetId))}async function oR(e,t,n){const s=dR(e);try{const r=await function(o,l){const c=vt(o),u=$t.now(),h=l.reduce((y,T)=>y.add(T.key),It());let d,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Kn(),C=It();return c.Ns.getEntries(y,h).next(x=>{T=x,T.forEach((M,N)=>{N.isValidDocument()||(C=C.add(M))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,T)).next(x=>{d=x;const M=[];for(const N of l){const B=_I(N,d.get(N.key).overlayedDocument);B!=null&&M.push(new Ss(N.key,B,fy(B.value.mapValue),Tn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,M,l)}).next(x=>{m=x;const M=x.applyToLocalDocumentSet(d,C);return c.documentOverlayCache.saveOverlays(y,x.batchId,M)})}).then(()=>({batchId:m.batchId,changes:Ty(d)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new Gt(At)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,n),await oo(s,r.changes),await ol(s.remoteStore)}catch(r){const i=Gu(r,"Failed to persist write");n.reject(i)}}async function i_(e,t){const n=vt(e);try{const s=await gS(n.localStore,t);t.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Ot(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Ot(o.hu,14607):r.removedDocuments.size>0&&(Ot(o.hu,42227),o.hu=!1))}),await oo(n,s,t)}catch(s){await Or(s)}}function gp(e,t,n){const s=vt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(t);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=vt(o);c.onlineState=l;let u=!1;c.queries.forEach((h,d)=>{for(const m of d.Sa)m.va(l)&&(u=!0)}),u&&Wu(c)}(s.eventManager,t),r.length&&s.Pu.H_(r),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function aR(e,t,n){const s=vt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const r=s.Au.get(t),i=r&&r.key;if(i){let o=new Gt(ct.comparator);o=o.insert(i,Ie.newNoDocument(i,yt.min()));const l=It().add(i),c=new sl(yt.min(),new Map,new Gt(At),o,l);await i_(s,c),s.du=s.du.remove(i),s.Au.delete(t),Ju(s)}else await jc(s.localStore,t,!1).then(()=>zc(s,t,n)).catch(Or)}async function lR(e,t){const n=vt(e),s=t.batch.batchId;try{const r=await mS(n.localStore,t);a_(n,s,null),o_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await oo(n,r)}catch(r){await Or(r)}}async function cR(e,t,n){const s=vt(e);try{const r=await function(o,l){const c=vt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(d=>(Ot(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(s.localStore,t);a_(s,t,n),o_(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await oo(s,r)}catch(r){await Or(r)}}function o_(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function a_(e,t,n){const s=vt(e);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(t);i&&(n?i.reject(n):i.resolve(),r=r.remove(t)),s.Vu[s.currentUser.toKey()]=r}}function zc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(s=>{e.Ru.containsKey(s)||l_(e,s)})}function l_(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(ju(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Ju(e))}function yp(e,t,n){for(const s of n)s instanceof n_?(e.Ru.addReference(s.key,t),uR(e,s)):s instanceof s_?(et(Qu,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||l_(e,s.key)):pt(19791,{wu:s})}function uR(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(et(Qu,"New document in limbo: "+n),e.Eu.add(s),Ju(e))}function Ju(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ct(Kt.fromString(t)),s=e.fu.next();e.Au.set(s,new ZS(n)),e.du=e.du.insert(n,s),Jy(e.remoteStore,new is(En(Du(n.path)),s,"TargetPurposeLimboResolution",Qa.ce))}}async function oo(e,t,n){const s=vt(e),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,t,n).then(u=>{var h;if((u||n)&&s.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){r.push(u);const d=Bu.As(c.targetId,u);i.push(d)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,u){const h=vt(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(u,m=>$.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(d,m.targetId,y)).next(()=>$.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(d,m.targetId,y)))))}catch(d){if(!Nr(d))throw d;et($u,"Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const y=h.Ms.get(m),T=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(m,C)}}}(s.localStore,i))}async function hR(e,t){const n=vt(e);if(!n.currentUser.isEqual(t)){et(Qu,"User change. New user:",t.toKey());const s=await Ky(n.localStore,t);n.currentUser=t,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new it(q.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await oo(n,s.Ls)}}function fR(e,t){const n=vt(e),s=n.Au.get(t);if(s&&s.hu)return It().add(s.key);{let r=It();const i=n.Iu.get(t);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function c_(e){const t=vt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=i_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=fR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=aR.bind(null,t),t.Pu.H_=WS.bind(null,t.eventManager),t.Pu.yu=QS.bind(null,t.eventManager),t}function dR(e){const t=vt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cR.bind(null,t),t}class wa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=rl(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return pS(this.persistence,new hS,t.initialUser,this.serializer)}Cu(t){return new zy(Uu.mi,this.serializer)}Du(t){return new ES}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wa.provider={build:()=>new wa};class pR extends wa{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ot(this.persistence.referenceDelegate instanceof _a,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new JI(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Le.withCacheSize(this.cacheSizeBytes):Le.DEFAULT;return new zy(s=>_a.mi(s,n),this.serializer)}}class Kc{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=hR.bind(null,this.syncEngine),await qS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new zS}()}createDatastore(t){const n=rl(t.databaseInfo.databaseId),s=function(i){return new SS(i)}(t.databaseInfo);return function(i,o,l,c){return new xS(i,o,l,c)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,r,i,o,l){return new kS(s,r,i,o,l)}(this.localStore,this.datastore,t.asyncQueue,n=>gp(this.syncEngine,n,0),function(){return up.v()?new up:new TS}())}createSyncEngine(t,n){return function(r,i,o,l,c,u,h){const d=new tR(r,i,o,l,c,u);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const i=vt(r);et(Ys,"RemoteStore shutting down."),i.Ea.add(5),await io(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Kc.provider={build:()=>new Kc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):zn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="FirestoreClient";class gR{constructor(t,n,s,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Te.UNAUTHENTICATED,this.clientId=Su.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{et(Es,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(et(Es,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Gu(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Zl(e,t){e.asyncQueue.verifyOperationInProgress(),et(Es,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Ky(t.localStore,r),s=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function _p(e,t){e.asyncQueue.verifyOperationInProgress();const n=await yR(e);et(Es,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(s=>fp(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,r)=>fp(t.remoteStore,r)),e._onlineComponents=t}async function yR(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){et(Es,"Using user provided OfflineComponentProvider");try{await Zl(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ir("Error using user provided cache. Falling back to memory cache: "+n),await Zl(e,new wa)}}else et(Es,"Using default OfflineComponentProvider"),await Zl(e,new pR(void 0));return e._offlineComponents}async function u_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(et(Es,"Using user provided OnlineComponentProvider"),await _p(e,e._uninitializedComponentsProvider._online)):(et(Es,"Using default OnlineComponentProvider"),await _p(e,new Kc))),e._onlineComponents}function _R(e){return u_(e).then(t=>t.syncEngine)}async function vR(e){const t=await u_(e),n=t.eventManager;return n.onListen=eR.bind(null,t.syncEngine),n.onUnlisten=rR.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=nR.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=iR.bind(null,t.syncEngine),n}function wR(e,t,n={}){const s=new fs;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new mR({next:m=>{h.Nu(),o.enqueueAndForget(()=>GS(i,d));const y=m.docs.has(l);!y&&m.fromCache?u.reject(new it(q.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new it(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new JS(Du(l.path),h,{includeMetadataChanges:!0,qa:!0});return KS(i,d)}(await vR(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="firestore.googleapis.com",wp=!0;class Ep{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new it(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f_,this.ssl=wp}else this.host=t.host,this.ssl=t.ssl??wp;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Hy;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<WI)throw new it(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}kA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h_(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new it(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new it(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new it(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Xu{constructor(t,n,s,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ep({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new it(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ep(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new EA;switch(s.type){case"firstParty":return new IA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new it(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=vp.get(n);s&&(et("ComponentProvider","Removing Datastore"),vp.delete(n),s.terminate())}(this),Promise.resolve()}}function ER(e,t,n,s={}){var u;e=Xs(e,Xu);const r=Tu(t),i=e._getSettings(),o={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;r&&(QT(`https://${l}`),ZT("Firestore",!0)),i.host!==f_&&i.host!==l&&Ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!Oi(c,o)&&(e._setSettings(c),s.mockUserToken)){let h,d;if(typeof s.mockUserToken=="string")h=s.mockUserToken,d=Te.MOCK_USER;else{h=JT(s.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new it(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Te(m)}e._authCredentials=new TA(new ey(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Yu(this.firestore,t,this._query)}}class ie{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ie(this.firestore,t,this._key)}toJSON(){return{type:ie._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(no(n,ie._jsonSchema))return new ie(t,s||null,new ct(Kt.fromString(n.referencePath)))}}ie._jsonSchemaVersion="firestore/documentReference/1.0",ie._jsonSchema={type:se("string",ie._jsonSchemaVersion),referencePath:se("string")};class Hi extends Yu{constructor(t,n,s){super(t,n,Du(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ie(this.firestore,null,new ct(t))}withConverter(t){return new Hi(this.firestore,t,this._path)}}function sn(e,t,...n){if(e=jn(e),arguments.length===1&&(t=Su.newId()),VA("doc","path",t),e instanceof Xu){const s=Kt.fromString(t,...n);return Nd(s),new ie(e,null,new ct(s))}{if(!(e instanceof ie||e instanceof Hi))throw new it(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Kt.fromString(t,...n));return Nd(s),new ie(e.firestore,e instanceof Hi?e.converter:null,new ct(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="AsyncQueue";class bp{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wy(this,"async_queue_retry"),this._c=()=>{const s=Yl();s&&et(Tp,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Yl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Yl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new fs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Nr(t))throw t;et(Tp,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,zn("INTERNAL UNHANDLED ERROR: ",Ap(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=Ku.createAndSchedule(this,t,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&pt(47125,{Pc:Ap(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Ap(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class al extends Xu{constructor(t,n,s,r){super(t,n,s,r),this.type="firestore",this._queue=new bp,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new bp(t),this._firestoreClient=void 0,await t}}}function TR(e,t){const n=typeof e=="object"?e:zg(),s=typeof e=="string"?e:da,r=eo(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=GT("firestore");i&&ER(r,...i)}return r}function d_(e){if(e._terminated)throw new it(q.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||bR(e),e._firestoreClient}function bR(e){var s,r,i;const t=e._freezeSettings(),n=function(l,c,u,h){return new qA(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h_(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(e._databaseId,((s=e._app)==null?void 0:s.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((i=t.localCache)!=null&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new gR(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ze(ge.fromBase64String(t))}catch(n){throw new it(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ze(ge.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ze._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(no(t,Ze._jsonSchema))return Ze.fromBase64String(t.bytes)}}Ze._jsonSchemaVersion="firestore/bytes/1.0",Ze._jsonSchema={type:se("string",Ze._jsonSchemaVersion),bytes:se("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new it(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new me(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new it(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new it(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return At(this._lat,t._lat)||At(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:An._jsonSchemaVersion}}static fromJSON(t){if(no(t,An._jsonSchema))return new An(t.latitude,t.longitude)}}An._jsonSchemaVersion="firestore/geoPoint/1.0",An._jsonSchema={type:se("string",An._jsonSchemaVersion),latitude:se("number"),longitude:se("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,t._values)}toJSON(){return{type:In._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(no(t,In._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new In(t.vectorValues);throw new it(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}In._jsonSchemaVersion="firestore/vectorValue/1.0",In._jsonSchema={type:se("string",In._jsonSchemaVersion),vectorValues:se("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=/^__.*__$/;class IR{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Ss(t,this.data,this.fieldMask,n,this.fieldTransforms):new so(t,this.data,n,this.fieldTransforms)}}class p_{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Ss(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function m_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt(40011,{Ac:e})}}class Zu{constructor(t,n,s,r,i,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Zu({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ea(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(m_(this.Ac)&&AR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class SR{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||rl(t)}Cc(t,n,s,r=!1){return new Zu({Ac:t,methodName:n,Dc:s,path:me.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function g_(e){const t=e._freezeSettings(),n=rl(e._databaseId);return new SR(e._databaseId,!!t.ignoreUndefinedProperties,n)}function RR(e,t,n,s,r,i={}){const o=e.Cc(i.merge||i.mergeFields?2:0,t,n,r);nh("Data must be an object, but it was:",o,s);const l=y_(s,o);let c,u;if(i.merge)c=new Ge(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=Gc(t,d,n);if(!o.contains(m))throw new it(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);v_(h,m)||h.push(m)}c=new Ge(h),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new IR(new Ue(l),c,u)}class cl extends ao{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof cl}}class th extends ao{_toFieldTransform(t){return new xy(t.path,new Bi)}isEqual(t){return t instanceof th}}class eh extends ao{constructor(t,n){super(t),this.Fc=n}_toFieldTransform(t){const n=new qi(t.serializer,Iy(t.serializer,this.Fc));return new xy(t.path,n)}isEqual(t){return t instanceof eh&&this.Fc===t.Fc}}function CR(e,t,n,s){const r=e.Cc(1,t,n);nh("Data must be an object, but it was:",r,s);const i=[],o=Ue.empty();Is(s,(c,u)=>{const h=sh(t,c,n);u=jn(u);const d=r.yc(h);if(u instanceof cl)i.push(h);else{const m=ul(u,d);m!=null&&(i.push(h),o.set(h,m))}});const l=new Ge(i);return new p_(o,l,r.fieldTransforms)}function PR(e,t,n,s,r,i){const o=e.Cc(1,t,n),l=[Gc(t,s,n)],c=[r];if(i.length%2!=0)throw new it(q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Gc(t,i[m])),c.push(i[m+1]);const u=[],h=Ue.empty();for(let m=l.length-1;m>=0;--m)if(!v_(u,l[m])){const y=l[m];let T=c[m];T=jn(T);const C=o.yc(y);if(T instanceof cl)u.push(y);else{const x=ul(T,C);x!=null&&(u.push(y),h.set(y,x))}}const d=new Ge(u);return new p_(h,d,o.fieldTransforms)}function ul(e,t){if(__(e=jn(e)))return nh("Unsupported field value:",t,e),y_(e,t);if(e instanceof ao)return function(s,r){if(!m_(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=ul(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(e,t)}return function(s,r){if((s=jn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Iy(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=$t.fromDate(s);return{timestampValue:ya(r.serializer,i)}}if(s instanceof $t){const i=new $t(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ya(r.serializer,i)}}if(s instanceof An)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ze)return{bytesValue:Ly(r.serializer,s._byteString)};if(s instanceof ie){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Lu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof In)return function(o,l){return{mapValue:{fields:{[uy]:{stringValue:hy},[pa]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ou(l.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Ru(s)}`)}(e,t)}function y_(e,t){const n={};return ry(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Is(e,(s,r)=>{const i=ul(r,t.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function __(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof $t||e instanceof An||e instanceof Ze||e instanceof ie||e instanceof ao||e instanceof In)}function nh(e,t,n){if(!__(n)||!ny(n)){const s=Ru(n);throw s==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function Gc(e,t,n){if((t=jn(t))instanceof ll)return t._internalPath;if(typeof t=="string")return sh(e,t);throw Ea("Field path arguments must be of type string or ",e,!1,void 0,n)}const xR=new RegExp("[~\\*/\\[\\]]");function sh(e,t,n){if(t.search(xR)>=0)throw Ea(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ll(...t.split("."))._internalPath}catch{throw Ea(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ea(e,t,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new it(q.INVALID_ARGUMENT,l+e+c)}function v_(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(t,n,s,r,i){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new VR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(E_("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VR extends w_{data(){return super.data()}}function E_(e,t){return typeof t=="string"?sh(e,t):t instanceof ll?t._internalPath:t._delegate._internalPath}class kR{convertValue(t,n="none"){switch(vs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(_s(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw pt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Is(t,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(t){var s,r,i;const n=(i=(r=(s=t.fields)==null?void 0:s[pa].arrayValue)==null?void 0:r.values)==null?void 0:i.map(o=>Xt(o.doubleValue));return new In(n)}convertGeoPoint(t){return new An(Xt(t.latitude),Xt(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Xa(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Li(t));default:return null}}convertTimestamp(t){const n=ys(t);return new $t(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Kt.fromString(t);Ot(qy(s),9688,{name:t});const r=new Fi(s.get(1),s.get(3)),i=new ct(s.popFirst(5));return r.isEqual(n)||zn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class ii{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ws extends w_{constructor(t,n,s,r,i,o){super(t,n,s,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Wo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(E_("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new it(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:se("string",Ws._jsonSchemaVersion),bundleSource:se("string","DocumentSnapshot"),bundleName:se("string"),bundle:se("string")};class Wo extends Ws{data(t={}){return super.data(t)}}class Ti{constructor(t,n,s,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new ii(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new Wo(this._firestore,this._userDataWriter,s.key,s,new ii(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new it(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new Wo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ii(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Wo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ii(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:OR(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new it(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ti._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Su.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function OR(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(e){e=Xs(e,ie);const t=Xs(e.firestore,al);return wR(d_(t),e._key).then(n=>MR(t,e,n))}Ti._jsonSchemaVersion="firestore/querySnapshot/1.0",Ti._jsonSchema={type:se("string",Ti._jsonSchemaVersion),bundleSource:se("string","QuerySnapshot"),bundleName:se("string"),bundle:se("string")};class NR extends kR{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ze(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ie(this.firestore,null,n)}}function Ee(e,t,n){e=Xs(e,ie);const s=Xs(e.firestore,al),r=DR(e.converter,t,n);return T_(s,[RR(g_(s),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Tn.none())])}function Nn(e,t,n,...s){e=Xs(e,ie);const r=Xs(e.firestore,al),i=g_(r);let o;return o=typeof(t=jn(t))=="string"||t instanceof ll?PR(i,"updateDoc",e._key,t,n,s):CR(i,"updateDoc",e._key,t),T_(r,[o.toMutation(e._key,Tn.exists(!0))])}function T_(e,t){return function(s,r){const i=new fs;return s.asyncQueue.enqueueAndForget(async()=>oR(await _R(s),r,i)),i.promise}(d_(e),t)}function MR(e,t,n){const s=n.docs.get(t._key),r=new NR(e);return new Ws(e,r,t._key,s,new ii(n.hasPendingWrites,n.fromCache),t.converter)}function Bt(){return new th("serverTimestamp")}function He(e){return new eh("increment",e)}(function(t,n=!0){(function(r){Dr=r})(uA),ms(new qn("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new al(new bA(s.getProvider("auth-internal")),new SA(o,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new it(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fi(u.options.projectId,h)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),wn(Vd,kd,t),wn(Vd,kd,"esm2020")})();var LR="firebase",FR="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn(LR,FR,"app");const b_="@firebase/installations",rh="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=1e4,I_=`w:${rh}`,S_="FIS_v2",UR="https://firebaseinstallations.googleapis.com/v1",BR=60*60*1e3,$R="installations",jR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Zs=new Wa($R,jR,qR);function R_(e){return e instanceof As&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_({projectId:e}){return`${UR}/projects/${e}/installations`}function P_(e){return{token:e.token,requestStatus:2,expiresIn:zR(e.expiresIn),creationTime:Date.now()}}async function x_(e,t){const s=(await t.json()).error;return Zs.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function V_({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function HR(e,{refreshToken:t}){const n=V_(e);return n.append("Authorization",KR(t)),n}async function k_(e){const t=await e();return t.status>=500&&t.status<600?e():t}function zR(e){return Number(e.replace("s","000"))}function KR(e){return`${S_} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const s=C_(e),r=V_(e),i=t.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:S_,appId:e.appId,sdkVersion:I_},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await k_(()=>fetch(s,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:P_(u.authToken)}}else throw await x_("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=/^[cdef][\w-]{21}$/,Wc="";function JR(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=XR(e);return QR.test(n)?n:Wc}catch{return Wc}}function XR(e){return WR(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=new Map;function N_(e,t){const n=hl(e);M_(n,t),YR(n,t)}function M_(e,t){const n=O_.get(e);if(n)for(const s of n)s(t)}function YR(e,t){const n=ZR();n&&n.postMessage({key:e,fid:t}),tC()}let Hs=null;function ZR(){return!Hs&&"BroadcastChannel"in self&&(Hs=new BroadcastChannel("[Firebase] FID Change"),Hs.onmessage=e=>{M_(e.data.key,e.data.fid)}),Hs}function tC(){O_.size===0&&Hs&&(Hs.close(),Hs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="firebase-installations-database",nC=1,tr="firebase-installations-store";let tc=null;function ih(){return tc||(tc=qg(eC,nC,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(tr)}}})),tc}async function Ta(e,t){const n=hl(e),r=(await ih()).transaction(tr,"readwrite"),i=r.objectStore(tr),o=await i.get(n);return await i.put(t,n),await r.done,(!o||o.fid!==t.fid)&&N_(e,t.fid),t}async function L_(e){const t=hl(e),s=(await ih()).transaction(tr,"readwrite");await s.objectStore(tr).delete(t),await s.done}async function fl(e,t){const n=hl(e),r=(await ih()).transaction(tr,"readwrite"),i=r.objectStore(tr),o=await i.get(n),l=t(o);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!o||o.fid!==l.fid)&&N_(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(e){let t;const n=await fl(e.appConfig,s=>{const r=sC(s),i=rC(e,r);return t=i.registrationPromise,i.installationEntry});return n.fid===Wc?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function sC(e){const t=e||{fid:JR(),registrationStatus:0};return F_(t)}function rC(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Zs.create("app-offline"));return{installationEntry:t,registrationPromise:r}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=iC(e,n);return{installationEntry:n,registrationPromise:s}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:oC(e)}:{installationEntry:t}}async function iC(e,t){try{const n=await GR(e,t);return Ta(e.appConfig,n)}catch(n){throw R_(n)&&n.customData.serverCode===409?await L_(e.appConfig):await Ta(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function oC(e){let t=await Ip(e.appConfig);for(;t.registrationStatus===1;)await D_(100),t=await Ip(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await oh(e);return s||n}return t}function Ip(e){return fl(e,t=>{if(!t)throw Zs.create("installation-not-found");return F_(t)})}function F_(e){return aC(e)?{fid:e.fid,registrationStatus:0}:e}function aC(e){return e.registrationStatus===1&&e.registrationTime+A_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC({appConfig:e,heartbeatServiceProvider:t},n){const s=cC(e,n),r=HR(e,n),i=t.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:I_,appId:e.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await k_(()=>fetch(s,l));if(c.ok){const u=await c.json();return P_(u)}else throw await x_("Generate Auth Token",c)}function cC(e,{fid:t}){return`${C_(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ah(e,t=!1){let n;const s=await fl(e.appConfig,i=>{if(!U_(i))throw Zs.create("not-registered");const o=i.authToken;if(!t&&fC(o))return i;if(o.requestStatus===1)return n=uC(e,t),i;{if(!navigator.onLine)throw Zs.create("app-offline");const l=pC(i);return n=hC(e,l),l}});return n?await n:s.authToken}async function uC(e,t){let n=await Sp(e.appConfig);for(;n.authToken.requestStatus===1;)await D_(100),n=await Sp(e.appConfig);const s=n.authToken;return s.requestStatus===0?ah(e,t):s}function Sp(e){return fl(e,t=>{if(!U_(t))throw Zs.create("not-registered");const n=t.authToken;return mC(n)?{...t,authToken:{requestStatus:0}}:t})}async function hC(e,t){try{const n=await lC(e,t),s={...t,authToken:n};return await Ta(e.appConfig,s),n}catch(n){if(R_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await L_(e.appConfig);else{const s={...t,authToken:{requestStatus:0}};await Ta(e.appConfig,s)}throw n}}function U_(e){return e!==void 0&&e.registrationStatus===2}function fC(e){return e.requestStatus===2&&!dC(e)}function dC(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+BR}function pC(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function mC(e){return e.requestStatus===1&&e.requestTime+A_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(e){const t=e,{installationEntry:n,registrationPromise:s}=await oh(t);return s?s.catch(console.error):ah(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(e,t=!1){const n=e;return await _C(n),(await ah(n,t)).token}async function _C(e){const{registrationPromise:t}=await oh(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(e){if(!e||!e.options)throw ec("App Configuration");if(!e.name)throw ec("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ec(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function ec(e){return Zs.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="installations",wC="installations-internal",EC=e=>{const t=e.getProvider("app").getImmediate(),n=vC(t),s=eo(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},TC=e=>{const t=e.getProvider("app").getImmediate(),n=eo(t,B_).getImmediate();return{getId:()=>gC(n),getToken:r=>yC(n,r)}};function bC(){ms(new qn(B_,EC,"PUBLIC")),ms(new qn(wC,TC,"PRIVATE"))}bC();wn(b_,rh);wn(b_,rh,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="analytics",AC="firebase_id",IC="origin",SC=60*1e3,RC="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lh="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je=new bu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},We=new Wa("analytics","Analytics",CC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(e){if(!e.startsWith(lh)){const t=We.create("invalid-gtag-resource",{gtagURL:e});return je.warn(t.message),""}return e}function $_(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function xC(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function VC(e,t){const n=xC("firebase-js-sdk-policy",{createScriptURL:PC}),s=document.createElement("script"),r=`${lh}?l=${e}&id=${t}`;s.src=n?n==null?void 0:n.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function kC(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function DC(e,t,n,s,r,i){const o=s[r];try{if(o)await t[o];else{const c=(await $_(n)).find(u=>u.measurementId===r);c&&await t[c.appId]}}catch(l){je.error(l)}e("config",r,i)}async function OC(e,t,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await $_(n);for(const c of o){const u=l.find(d=>d.measurementId===c),h=u&&t[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(t)),await Promise.all(i),e("event",s,r||{})}catch(i){je.error(i)}}function NC(e,t,n,s){async function r(i,...o){try{if(i==="event"){const[l,c]=o;await OC(e,t,n,l,c)}else if(i==="config"){const[l,c]=o;await DC(e,t,n,s,l,c)}else if(i==="consent"){const[l,c]=o;e("consent",l,c)}else if(i==="get"){const[l,c,u]=o;e("get",l,c,u)}else if(i==="set"){const[l]=o;e("set",l)}else e(i,...o)}catch(l){je.error(l)}}return r}function MC(e,t,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=NC(i,e,t,n),{gtagCore:i,wrappedGtag:window[r]}}function LC(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(lh)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=30,UC=1e3;class BC{constructor(t={},n=UC){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const j_=new BC;function $C(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function jC(e){var o;const{appId:t,apiKey:n}=e,s={method:"GET",headers:$C(n)},r=RC.replace("{app-id}",t),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(o=c.error)!=null&&o.message&&(l=c.error.message)}catch{}throw We.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function qC(e,t=j_,n){const{appId:s,apiKey:r,measurementId:i}=e.options;if(!s)throw We.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw We.create("no-api-key")}const o=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new KC;return setTimeout(async()=>{l.abort()},SC),q_({appId:s,apiKey:r,measurementId:i},o,l,t)}async function q_(e,{throttleEndTimeMillis:t,backoffCount:n},s,r=j_){var l;const{appId:i,measurementId:o}=e;try{await HC(s,t)}catch(c){if(o)return je.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw c}try{const c=await jC(e);return r.deleteThrottleMetadata(i),c}catch(c){const u=c;if(!zC(u)){if(r.deleteThrottleMetadata(i),o)return je.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw c}const h=Number((l=u==null?void 0:u.customData)==null?void 0:l.httpStatus)===503?Ed(n,r.intervalMillis,FC):Ed(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(i,d),je.debug(`Calling attemptFetch again in ${h} millis`),q_(e,d,s,r)}}function HC(e,t){return new Promise((n,s)=>{const r=Math.max(t-Date.now(),0),i=setTimeout(n,r);e.addEventListener(()=>{clearTimeout(i),s(We.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function zC(e){if(!(e instanceof As)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class KC{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function GC(e,t,n,s,r){if(r&&r.global){e("event",n,s);return}else{const i=await t,o={...s,send_to:i};e("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(){if(Ug())try{await Bg()}catch(e){return je.warn(We.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return je.warn(We.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function QC(e,t,n,s,r,i,o){const l=qC(e);l.then(m=>{n[m.measurementId]=m.appId,e.options.measurementId&&m.measurementId!==e.options.measurementId&&je.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>je.error(m)),t.push(l);const c=WC().then(m=>{if(m)return s.getId()}),[u,h]=await Promise.all([l,c]);LC(i)||VC(i,u.measurementId),r("js",new Date);const d=(o==null?void 0:o.config)??{};return d[IC]="firebase",d.update=!0,h!=null&&(d[AC]=h),r("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t){this.app=t}_delete(){return delete bi[this.app.options.appId],Promise.resolve()}}let bi={},Rp=[];const Cp={};let nc="dataLayer",XC="gtag",Pp,H_,xp=!1;function YC(){const e=[];if(nb()&&e.push("This is a browser extension environment."),rb()||e.push("Cookies are not available."),e.length>0){const t=e.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=We.create("invalid-analytics-context",{errorInfo:t});je.warn(n.message)}}function ZC(e,t,n){YC();const s=e.options.appId;if(!s)throw We.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)je.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw We.create("no-api-key");if(bi[s]!=null)throw We.create("already-exists",{id:s});if(!xp){kC(nc);const{wrappedGtag:i,gtagCore:o}=MC(bi,Rp,Cp,nc,XC);H_=i,Pp=o,xp=!0}return bi[s]=QC(e,Rp,Cp,t,Pp,nc,n),new JC(e)}function t2(e=zg()){e=jn(e);const t=eo(e,ba);return t.isInitialized()?t.getImmediate():e2(e)}function e2(e,t={}){const n=eo(e,ba);if(n.isInitialized()){const r=n.getImmediate();if(Oi(t,n.getOptions()))return r;throw We.create("already-initialized")}return n.initialize({options:t})}function n2(e,t,n,s){e=jn(e),GC(H_,bi[e.app.options.appId],t,n,s).catch(r=>je.error(r))}const Vp="@firebase/analytics",kp="0.10.18";function s2(){ms(new qn(ba,(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return ZC(s,r,n)},"PUBLIC")),ms(new qn("analytics-internal",e,"PRIVATE")),wn(Vp,kp),wn(Vp,kp,"esm2020");function e(t){try{const n=t.getProvider(ba).getImmediate();return{logEvent:(s,r,i)=>n2(n,s,r,i)}}catch(n){throw We.create("interop-component-reg-failed",{reason:n})}}}s2();const r2={apiKey:"AIzaSyDXWUfod0b1iucUsp4rBpJ397AyB-EvYs4",authDomain:"maibot-pluginmarket.firebaseapp.com",projectId:"maibot-pluginmarket",storageBucket:"maibot-pluginmarket.firebasestorage.app",messagingSenderId:"992003266389",appId:"1:992003266389:web:cf4f80fa559ca02ef7c1dc",measurementId:"G-VW7EWVKKFQ"},z_=Hg(r2),rn=TR(z_);t2(z_);const Bs=class Bs{constructor(){Vn(this,"userId");Vn(this,"fingerprint");this.fingerprint=this.generateFingerprint(),this.userId=this.getOrCreateUserId()}static getInstance(){return Bs.instance||(Bs.instance=new Bs),Bs.instance}generateFingerprint(){const t=document.createElement("canvas"),n=t.getContext("2d");n&&(n.textBaseline="top",n.font="14px Arial",n.fillText("Browser fingerprint",2,2));const s=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,screen.colorDepth,new Date().getTimezoneOffset(),!!window.sessionStorage,!!window.localStorage,t.toDataURL()].join("|");return this.hashString(s)}hashString(t){let n=0;for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);n=(n<<5)-n+r,n=n&n}return Math.abs(n).toString(36)}getOrCreateUserId(){let t=localStorage.getItem("plugin_market_user_id")||sessionStorage.getItem("plugin_market_user_id");if(!t){const n=Date.now(),s=Math.random().toString(36).substr(2,9),r=this.fingerprint.substr(0,8);t=`user_${n}_${s}_${r}`,localStorage.setItem("plugin_market_user_id",t),sessionStorage.setItem("plugin_market_user_id",t),localStorage.setItem("plugin_market_user_created",new Date().toISOString())}return t}getUserId(){return this.userId}getFingerprint(){return this.fingerprint}getUserSession(){const t=localStorage.getItem("plugin_market_user_created"),n=Date.now();return{userId:this.userId,fingerprint:this.fingerprint,isNewUser:!t||Date.now()-new Date(t).getTime()<24*60*60*1e3,createdAt:t,sessionStart:n}}isSameUser(t){if(this.userId===t)return!0;const n=this.userId.split("_").pop(),s=t.split("_").pop();return n===s}resetUserId(){return localStorage.removeItem("plugin_market_user_id"),sessionStorage.removeItem("plugin_market_user_id"),localStorage.removeItem("plugin_market_user_created"),this.userId=this.getOrCreateUserId(),this.userId}getUserStats(){const t=parseInt(localStorage.getItem("plugin_market_sessions")||"0")+1,n=localStorage.getItem("plugin_market_last_visit");return localStorage.setItem("plugin_market_sessions",t.toString()),localStorage.setItem("plugin_market_last_visit",new Date().toISOString()),{totalSessions:t,lastVisit:n,userAgent:navigator.userAgent,language:navigator.language,timezone:new Date().getTimezoneOffset()}}};Vn(Bs,"instance");let Qc=Bs;const Dp=Qc.getInstance(),$s=class $s{constructor(){Vn(this,"userId");this.userId=Dp.getUserId()}static getInstance(){return $s.instance||($s.instance=new $s),$s.instance}async recordSiteVisit(){var t;try{const n=new Date().toISOString().split("T")[0],s=sn(rn,"site_stats","general"),r=sn(rn,"user_stats",this.userId);console.log("Recording site visit for user:",this.userId);const i=await mn(r),o=!i.exists()||((t=i.data())==null?void 0:t.lastVisitDate)!==n,l=Dp.getUserSession();await Ee(r,{lastVisitDate:n,lastUpdated:Bt(),fingerprint:l.fingerprint,userAgent:navigator.userAgent,isNewUser:l.isNewUser},{merge:!0}),o&&(console.log("First visit today, updating site stats"),(await mn(s)).exists()?await Ee(s,{totalVisits:He(1),dailyVisits:He(1),lastVisitDate:n,lastUpdated:Bt()},{merge:!0}):await Ee(s,{totalVisits:1,dailyVisits:1,lastVisitDate:n,lastUpdated:Bt()})),console.log("Site visit recorded successfully")}catch(n){console.error("Error recording site visit:",n),console.error("Error details:",{userId:this.userId,errorCode:n==null?void 0:n.code,errorMessage:n==null?void 0:n.message})}}async getPluginStats(t){var n;try{const s=sn(rn,"plugin_stats",t),r=await mn(s);if(r.exists()){const i=r.data();return{id:t,likes:i.likes||0,dislikes:i.dislikes||0,clickCount:i.clickCount||0,lastUpdated:((n=i.lastUpdated)==null?void 0:n.toDate())||new Date}}else return await Ee(s,{...{likes:0,dislikes:0,clickCount:0},lastUpdated:Bt()}),{id:t,likes:0,dislikes:0,clickCount:0,lastUpdated:new Date}}catch(s){return console.error("Error getting plugin stats:",s),{id:t,likes:0,dislikes:0,clickCount:0,lastUpdated:new Date}}}async likePlugin(t){var n;try{const s=sn(rn,"plugin_stats",t),r=sn(rn,"user_actions",`${this.userId}_${t}`);(await mn(s)).exists()||await Ee(s,{likes:0,dislikes:0,clickCount:0,lastUpdated:Bt()});const o=await mn(r);if(o.exists()){const l=(n=o.data())==null?void 0:n.action;l==="like"?(await Nn(s,{likes:He(-1),lastUpdated:Bt()}),await Ee(r,{action:null,lastUpdated:Bt()},{merge:!0})):l==="dislike"?(await Nn(s,{likes:He(1),dislikes:He(-1),lastUpdated:Bt()}),await Ee(r,{action:"like",lastUpdated:Bt()},{merge:!0})):(await Nn(s,{likes:He(1),lastUpdated:Bt()}),await Ee(r,{action:"like",lastUpdated:Bt()},{merge:!0}))}else await Nn(s,{likes:He(1),lastUpdated:Bt()}),await Ee(r,{action:"like",lastUpdated:Bt()});console.log(`Plugin ${t} liked successfully`)}catch(s){console.error("Error liking plugin:",s),console.error("Error details:",{userId:this.userId,pluginId:t,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message})}}async dislikePlugin(t){var n;try{const s=sn(rn,"plugin_stats",t),r=sn(rn,"user_actions",`${this.userId}_${t}`);(await mn(s)).exists()||await Ee(s,{likes:0,dislikes:0,clickCount:0,lastUpdated:Bt()});const o=await mn(r);if(o.exists()){const l=(n=o.data())==null?void 0:n.action;l==="dislike"?(await Nn(s,{dislikes:He(-1),lastUpdated:Bt()}),await Ee(r,{action:null,lastUpdated:Bt()},{merge:!0})):l==="like"?(await Nn(s,{likes:He(-1),dislikes:He(1),lastUpdated:Bt()}),await Ee(r,{action:"dislike",lastUpdated:Bt()},{merge:!0})):(await Nn(s,{dislikes:He(1),lastUpdated:Bt()}),await Ee(r,{action:"dislike",lastUpdated:Bt()},{merge:!0}))}else await Nn(s,{dislikes:He(1),lastUpdated:Bt()}),await Ee(r,{action:"dislike",lastUpdated:Bt()});console.log(`Plugin ${t} disliked successfully`)}catch(s){console.error("Error disliking plugin:",s),console.error("Error details:",{userId:this.userId,pluginId:t,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message})}}async recordPluginClick(t,n="homepage"){try{const s=sn(rn,"plugin_stats",t),r=sn(rn,"plugin_clicks",`${t}_${Date.now()}_${Math.random().toString(36).substr(2,5)}`);(await mn(s)).exists()||await Ee(s,{likes:0,dislikes:0,clickCount:0,lastUpdated:Bt()}),await Nn(s,{clickCount:He(1),lastUpdated:Bt()}),await Ee(r,{pluginId:t,userId:this.userId,clickType:n,timestamp:Bt(),userAgent:navigator.userAgent,referrer:document.referrer}),console.log(`Plugin ${t} click recorded successfully`)}catch(s){console.error("Error recording plugin click:",s),console.error("Error details:",{userId:this.userId,pluginId:t,clickType:n,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message})}}async getUserAction(t){var n;try{const s=`${this.userId}_${t}`,r=sn(rn,"user_actions",s),i=await mn(r);if(i.exists()){const o=((n=i.data())==null?void 0:n.action)||null;return console.log("User action found:",o),o}return console.log("No user action found, returning null"),null}catch(s){return console.error("Error getting user action:",s),console.error("Error details:",{userId:this.userId,pluginId:t,actionId:`${this.userId}_${t}`,errorCode:s==null?void 0:s.code,errorMessage:s==null?void 0:s.message}),null}}async getSiteStats(){var t;try{const n=sn(rn,"site_stats","general"),s=await mn(n);if(s.exists()){const r=s.data();return{totalVisits:r.totalVisits||0,dailyVisits:r.dailyVisits||0,lastVisitDate:r.lastVisitDate||"",lastUpdated:((t=r.lastUpdated)==null?void 0:t.toDate())||new Date}}else return{totalVisits:0,dailyVisits:0,lastVisitDate:"",lastUpdated:new Date}}catch(n){return console.error("Error getting site stats:",n),{totalVisits:0,dailyVisits:0,lastVisitDate:"",lastUpdated:new Date}}}async getBatchPluginStats(t){const n={};try{const s=t.map(i=>this.getPluginStats(i));(await Promise.all(s)).forEach(i=>{n[i.id]=i})}catch(s){console.error("Error getting batch plugin stats:",s)}return n}getUserId(){return this.userId}};Vn($s,"instance");let Jc=$s;const os=Jc.getInstance(),i2={class:"card-body flex flex-col h-full"},o2={class:"flex items-start justify-between mb-2"},a2={class:"card-title text-lg font-bold text-primary truncate flex-1 mr-2"},l2={class:"badge badge-outline badge-sm"},c2={class:"flex items-center gap-2 mb-3"},u2={class:"avatar placeholder"},h2={class:"bg-primary text-primary-content rounded-full w-6 h-6"},f2={class:"text-xs"},d2={class:"text-sm text-base-content/70"},p2={class:"text-sm text-base-content/80 mb-3 line-clamp-3 flex-grow"},m2={class:"flex flex-wrap gap-1 mb-3 min-h-[2rem]"},g2={class:"badge badge-primary badge-sm"},y2={class:"text-xs text-base-content/60 mb-3 h-4"},_2={key:0},v2={key:1},w2={class:"flex items-center justify-between mb-3 text-xs text-base-content/60"},E2={class:"flex items-center gap-2"},T2=["disabled"],b2=["disabled"],A2={class:"flex items-center gap-1"},I2={class:"card-actions justify-end mt-auto"},S2=Qe({__name:"PluginCard",props:{plugin:{}},emits:["show-detail"],setup(e){const t=e,n=ne(!1),s=Qt(()=>{var h;return((h=t.plugin.stats)==null?void 0:h.userAction)==="like"}),r=Qt(()=>{var h;return((h=t.plugin.stats)==null?void 0:h.userAction)==="dislike"}),i=Qt(()=>(t.plugin.manifest.keywords||[]).slice(0,3)),o=h=>h.split(" ").map(d=>d.charAt(0)).join("").toUpperCase().slice(0,2),l=async()=>{if(!n.value){n.value=!0;try{await os.likePlugin(t.plugin.id),t.plugin.stats||(t.plugin.stats={likes:0,dislikes:0,clickCount:0}),t.plugin.stats.userAction==="like"?(t.plugin.stats.likes--,t.plugin.stats.userAction=null):t.plugin.stats.userAction==="dislike"?(t.plugin.stats.likes++,t.plugin.stats.dislikes--,t.plugin.stats.userAction="like"):(t.plugin.stats.likes++,t.plugin.stats.userAction="like")}catch(h){console.error("Error handling like:",h)}finally{n.value=!1}}},c=async()=>{if(!n.value){n.value=!0;try{await os.dislikePlugin(t.plugin.id),t.plugin.stats||(t.plugin.stats={likes:0,dislikes:0,clickCount:0}),t.plugin.stats.userAction==="dislike"?(t.plugin.stats.dislikes--,t.plugin.stats.userAction=null):t.plugin.stats.userAction==="like"?(t.plugin.stats.likes--,t.plugin.stats.dislikes++,t.plugin.stats.userAction="dislike"):(t.plugin.stats.dislikes++,t.plugin.stats.userAction="dislike")}catch(h){console.error("Error handling dislike:",h)}finally{n.value=!1}}},u=async(h,d="homepage")=>{try{await os.recordPluginClick(t.plugin.id,d),t.plugin.stats||(t.plugin.stats={likes:0,dislikes:0,clickCount:0}),t.plugin.stats.clickCount++,window.open(h,"_blank","noopener,noreferrer")}catch(m){console.error("Error recording click:",m),window.open(h,"_blank","noopener,noreferrer")}};return Wn(async()=>{try{const h=await os.getUserAction(t.plugin.id);t.plugin.stats&&(t.plugin.stats.userAction=h)}catch(h){console.error("Error getting user action:",h)}}),(h,d)=>{var m,y,T;return ht(),gt("div",{class:"card bg-base-100 shadow-lg card-hover cursor-pointer transform transition-all duration-300 hover:shadow-xl hover:scale-105 h-full",onClick:d[2]||(d[2]=C=>h.$emit("show-detail",h.plugin))},[P("div",i2,[P("div",o2,[P("h2",a2,Et(h.plugin.manifest.name),1),P("div",l2," v"+Et(h.plugin.manifest.version),1)]),P("div",c2,[P("div",u2,[P("div",h2,[P("span",f2,Et(o(h.plugin.manifest.author.name)),1)])]),P("span",d2,Et(h.plugin.manifest.author.name),1)]),P("p",p2,Et(h.plugin.manifest.description),1),P("div",m2,[P("div",g2,Et(h.plugin.categoryDisplay),1),(ht(!0),gt(Ae,null,Qi(i.value,C=>(ht(),gt("div",{key:C,class:"badge badge-ghost badge-sm"},Et(C),1))),128))]),P("div",y2,[P("span",null,": "+Et(h.plugin.manifest.host_application.min_version),1),h.plugin.manifest.host_application.max_version?(ht(),gt("span",_2," - "+Et(h.plugin.manifest.host_application.max_version),1)):(ht(),gt("span",v2," - "))]),P("div",w2,[P("div",E2,[P("button",{onClick:mr(l,["stop"]),class:an(["btn btn-ghost btn-xs gap-1 transition-colors",{"text-success":s.value}]),disabled:n.value},[d[3]||(d[3]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"currentColor",viewBox:"0 0 24 24"},[P("path",{d:"M7.493 18.75c-.425 0-.82-.236-.975-.632A7.48 7.48 0 016 15.375c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75 2.25 2.25 0 012.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23h-.777zM2.331 10.977a11.969 11.969 0 00-.831 4.398 12 12 0 00.52 3.507c.26.85 1.084 1.368 1.973 1.368H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 01-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227z"})],-1)),Fe(" "+Et(((m=h.plugin.stats)==null?void 0:m.likes)||0),1)],10,T2),P("button",{onClick:mr(c,["stop"]),class:an(["btn btn-ghost btn-xs gap-1 transition-colors",{"text-error":r.value}]),disabled:n.value},[d[4]||(d[4]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"currentColor",viewBox:"0 0 24 24"},[P("path",{d:"M15.73 5.25h1.035A7.465 7.465 0 0118 9.375a7.465 7.465 0 01-1.235 4.125h-.148c-.806 0-1.534.446-2.031 1.08a9.04 9.04 0 01-2.861 2.4c-.723.384-1.35.956-1.653 1.715a4.498 4.498 0 00-.322 1.672V21a.75.75 0 01-.75.75 2.25 2.25 0 01-2.25-2.25c0-1.152.26-2.243.723-3.218C7.74 15.724 7.366 15 6.748 15H3.622c-1.026 0-1.945-.694-2.054-1.715A12.134 12.134 0 011.5 12c0-2.848.992-5.464 2.649-7.521C4.537 3.997 5.136 3.75 5.754 3.75h1.317c.483 0 .964.078 1.423.23l3.114 1.04a4.501 4.501 0 001.423.23zM21.669 13.023c.536-1.362.831-2.845.831-4.398 0-1.22-.182-2.398-.52-3.507-.26-.85-1.084-1.368-1.973-1.368H19.1c-.445 0-.72.498-.523.898.591 1.2.924 2.55.924 3.977a8.959 8.959 0 01-1.302 4.666c-.245.403.028.959.5.959h1.053c.832 0 1.612-.453 1.918-1.227z"})],-1)),Fe(" "+Et(((y=h.plugin.stats)==null?void 0:y.dislikes)||0),1)],10,b2)]),P("div",A2,[d[5]||(d[5]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),P("span",null,Et(((T=h.plugin.stats)==null?void 0:T.clickCount)||0),1)])]),P("div",I2,[h.plugin.manifest.homepage_url?(ht(),gt("button",{key:0,onClick:d[0]||(d[0]=mr(C=>u(h.plugin.manifest.homepage_url,"homepage"),["stop"])),class:"btn btn-outline btn-sm transition-all duration-200 hover:scale-105"},[...d[6]||(d[6]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1),Fe("  ",-1)])])):Yt("",!0),h.plugin.manifest.repository_url?(ht(),gt("button",{key:1,onClick:d[1]||(d[1]=mr(C=>u(h.plugin.manifest.repository_url,"repository"),["stop"])),class:"btn btn-primary btn-sm transition-all duration-200 hover:scale-105"},[...d[7]||(d[7]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24"},[P("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1),Fe("  ",-1)])])):Yt("",!0)])])])}}}),R2=bs(S2,[["__scopeId","data-v-8ebd841d"]]),C2={class:"join w-full max-w-md"},P2={class:"relative flex-1"},x2=Qe({__name:"SearchBar",props:{modelValue:{}},emits:["update:modelValue","search"],setup(e,{emit:t}){const n=e,s=t,r=ne(n.modelValue),i=()=>{s("update:modelValue",r.value),s("search",r.value)},o=()=>{r.value="",i()};return ls(()=>n.modelValue,l=>{r.value=l}),(l,c)=>(ht(),gt("div",C2,[P("div",P2,[uu(P("input",{"onUpdate:modelValue":c[0]||(c[0]=u=>r.value=u),type:"text",placeholder:"...",class:"input input-bordered join-item w-full pr-10",onInput:i,onKeyup:qw(i,["enter"])},null,544),[[Fw,r.value]]),c[1]||(c[1]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 absolute right-3 top-1/2 transform -translate-y-1/2 text-base-content/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),r.value?(ht(),gt("button",{key:0,onClick:o,class:"btn btn-outline join-item",title:""},[...c[2]||(c[2]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):Yt("",!0)]))}}),V2={class:"dropdown dropdown-bottom"},k2={tabindex:"0",role:"button",class:"btn btn-outline"},D2={tabindex:"0",class:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-auto min-w-52 max-w-xs overflow-y-auto"},O2=["onClick"],N2={class:"flex-1 text-left"},M2={key:0,class:"badge badge-sm flex-shrink-0 ml-2"},L2=Qe({__name:"CategoryFilter",props:{categories:{},plugins:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,r=Qt(()=>n.modelValue),i=l=>{s("update:modelValue",l)},o=l=>l===""?n.plugins.length:n.plugins.filter(c=>c.categoryDisplay===l).length;return(l,c)=>(ht(),gt("div",V2,[P("div",k2,[c[0]||(c[0]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.707A1 1 0 013 7V4z"})],-1)),Fe(" "+Et(r.value)+" ",1),c[1]||(c[1]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),P("ul",D2,[(ht(!0),gt(Ae,null,Qi(l.categories,u=>(ht(),gt("li",{key:u,class:"w-full"},[P("a",{class:an([{active:u===r.value},"flex items-center justify-between w-full whitespace-nowrap"]),onClick:h=>i(u)},[P("span",N2,Et(u),1),u!==""?(ht(),gt("span",M2,Et(o(u)),1)):Yt("",!0)],10,O2)]))),128))])]))}}),F2=bs(L2,[["__scopeId","data-v-75554bb1"]]),U2={class:"flex flex-col sm:flex-row gap-3 items-start sm:items-center"},B2={class:"flex flex-wrap gap-2 items-center"},$2=["value"],j2={key:0,class:"text-xs text-base-content/60 bg-base-300 px-2 py-1 rounded-full"},q2=Qe({__name:"VersionFilter",props:{plugins:{},modelValue:{}},emits:["update:modelValue","version-changed"],setup(e,{emit:t}){const n=e,s=t,r=ne(n.modelValue),i=(h,d)=>{const m=h.split(".").map(Number),y=d.split(".").map(Number),T=Math.max(m.length,y.length);for(let C=0;C<T;C++){const x=m[C]||0,M=y[C]||0;if(x>M)return 1;if(x<M)return-1}return 0},o=(h,d)=>{const m=h.manifest.host_application.min_version,y=h.manifest.host_application.max_version;return!(i(d,m)<0||y&&i(d,y)>0)},l=Qt(()=>{const h=new Set;return n.plugins.forEach(d=>{const m=d.manifest.host_application.min_version;h.add(m)}),Array.from(h).sort((d,m)=>i(d,m))}),c=Qt(()=>r.value?n.plugins.filter(h=>o(h,r.value)).length:0),u=()=>{s("update:modelValue",r.value),s("version-changed",r.value)};return ls(()=>n.modelValue,h=>{r.value=h}),(h,d)=>(ht(),gt("div",U2,[d[3]||(d[3]=P("label",{class:"text-sm font-medium text-base-content/80 whitespace-nowrap"},"  ",-1)),P("div",B2,[uu(P("select",{"onUpdate:modelValue":d[0]||(d[0]=m=>r.value=m),onChange:u,class:"select select-bordered select-sm w-auto min-w-[120px] focus:outline-none focus:ring-2 focus:ring-primary/50"},[d[1]||(d[1]=P("option",{value:""},"",-1)),(ht(!0),gt(Ae,null,Qi(l.value,m=>(ht(),gt("option",{key:m,value:m},Et(m)+"+ ",9,$2))),128))],544),[[Uw,r.value]]),d[2]||(d[2]=P("div",{class:"tooltip tooltip-right","data-tip":""},[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-base-content/60 cursor-help",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),r.value&&r.value.trim()?(ht(),gt("div",j2,Et(c.value)+"  ",1)):Yt("",!0)]))}}),H2=bs(q2,[["__scopeId","data-v-d2016a3c"]]),z2={class:"flex flex-col items-center justify-center py-12"},K2={class:"text-center space-y-2"},G2={class:"text-lg font-medium text-primary animate-pulse"},W2={key:0,class:"w-64 mt-6"},Q2=Qe({__name:"LoadingSpinner",props:{message:{default:"..."},showProgress:{type:Boolean,default:!1}},setup(e){Aw(r=>({ca4e3296:n.value+"%"}));const t=e,n=ne(0);let s=null;return Wn(()=>{t.showProgress&&(s=setInterval(()=>{n.value<90&&(n.value+=Math.random()*10)},500))}),Wi(()=>{s&&clearInterval(s)}),(r,i)=>(ht(),gt("div",z2,[i[2]||(i[2]=P("div",{class:"relative mb-6"},[P("div",{class:"w-16 h-16 border-4 border-primary/20 border-t-primary rounded-full animate-spin"}),P("div",{class:"absolute inset-2 w-12 h-12 bg-primary/10 rounded-full animate-pulse"}),P("div",{class:"absolute inset-1/2 w-2 h-2 bg-primary rounded-full transform -translate-x-1/2 -translate-y-1/2 animate-ping"})],-1)),P("div",K2,[P("p",G2,Et(r.message),1),i[0]||(i[0]=P("div",{class:"flex space-x-1 justify-center"},[P("div",{class:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{"animation-delay":"0ms"}}),P("div",{class:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{"animation-delay":"150ms"}}),P("div",{class:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{"animation-delay":"300ms"}})],-1))]),r.showProgress?(ht(),gt("div",W2,[...i[1]||(i[1]=[P("div",{class:"w-full bg-base-300 rounded-full h-2"},[P("div",{class:"bg-primary h-2 rounded-full transition-all duration-300 ease-out loading-progress"})],-1)])])):Yt("",!0)]))}}),J2=bs(Q2,[["__scopeId","data-v-56f61c32"]]),X2={class:"relative w-6 h-6 overflow-hidden"},Y2=Qe({__name:"ThemeToggle",emits:["theme-changed"],setup(e,{emit:t}){const n=t,s=ne(!1),r=ne(!1),i=async()=>{r.value=!0,await new Promise(l=>setTimeout(l,150)),s.value=!s.value;const o=s.value?"dark":"light";document.documentElement.setAttribute("data-theme",o),localStorage.setItem("theme",o),n("theme-changed",s.value),setTimeout(()=>{r.value=!1},350)};return Wn(()=>{const o=localStorage.getItem("theme"),l=window.matchMedia("(prefers-color-scheme: dark)").matches,c=o?o==="dark":l;s.value=c;const u=c?"dark":"light";document.documentElement.setAttribute("data-theme",u),n("theme-changed",s.value)}),(o,l)=>(ht(),gt("button",{onClick:i,class:an(["btn btn-circle btn-ghost theme-toggle",{"theme-switching":r.value}]),title:""},[P("div",X2,[(ht(),gt("svg",{xmlns:"http://www.w3.org/2000/svg",class:an(["absolute inset-0 w-6 h-6 transition-all duration-500 ease-in-out sun-icon",{"rotate-90 opacity-0":s.value,"rotate-0 opacity-100":!s.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...l[0]||(l[0]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])],2)),(ht(),gt("svg",{xmlns:"http://www.w3.org/2000/svg",class:an(["absolute inset-0 w-6 h-6 transition-all duration-500 ease-in-out moon-icon",{"rotate-0 opacity-100":s.value,"-rotate-90 opacity-0":!s.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...l[1]||(l[1]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])],2))])],2))}}),Z2=bs(Y2,[["__scopeId","data-v-e034e2d7"]]),tP={class:"modal-container"},eP={class:"modal-header"},nP={class:"header-info"},sP={class:"title-row"},rP={class:"modal-title"},iP={class:"badges"},oP={class:"version-badge"},aP={class:"category-badge"},lP={class:"author-row"},cP={class:"author-avatar"},uP={class:"author-name"},hP={key:0,class:"license-badge"},fP={class:"modal-body"},dP={class:"info-section"},pP={class:"description"},mP={class:"info-section"},gP={class:"version-grid"},yP={class:"version-item"},_P={class:"version-value min-version"},vP={class:"version-item"},wP={class:"version-value max-version"},EP={key:0,class:"info-section"},TP={class:"keywords"},bP={key:1,class:"info-section"},AP={class:"language-info"},IP={class:"language-tag"},SP={key:0,class:"multilingual"},RP={class:"info-section"},CP={class:"plugin-info-grid"},PP={class:"info-item"},xP={class:"info-item"},VP={class:"plugin-id"},kP={class:"modal-footer"},DP=Qe({__name:"PluginDetailModal",props:{plugin:{},show:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,r=h=>h.split(" ").map(d=>d.charAt(0)).join("").toUpperCase().slice(0,2),i=h=>{window.open(h,"_blank","noopener,noreferrer")},o=h=>{h.preventDefault()},l=()=>{document.body.style.overflow="hidden",document.body.style.paddingRight="0px",document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("wheel",o,{passive:!1})},c=()=>{document.body.style.overflow="",document.body.style.paddingRight="",document.removeEventListener("touchmove",o),document.removeEventListener("wheel",o)},u=h=>{h.key==="Escape"&&n.show&&s("close")};return ls(()=>n.show,h=>{h?(l(),document.addEventListener("keydown",u)):(c(),document.removeEventListener("keydown",u))},{immediate:!0}),Wi(()=>{c(),document.removeEventListener("keydown",u)}),(h,d)=>(ht(),Fa(l0,{to:"body"},[qt(yw,{name:"modal",appear:""},{default:Da(()=>{var m;return[h.show?(ht(),gt("div",{key:0,class:"modal-overlay",onClick:d[5]||(d[5]=mr(y=>h.$emit("close"),["self"]))},[P("div",tP,[P("div",{class:"modal-content",onClick:d[4]||(d[4]=mr(()=>{},["stop"]))},[P("header",eP,[P("div",nP,[P("div",sP,[P("h2",rP,Et(h.plugin.manifest.name),1),P("div",iP,[P("span",oP,"v"+Et(h.plugin.manifest.version),1),P("span",aP,Et(h.plugin.categoryDisplay),1)])]),P("div",lP,[P("div",cP,Et(r(h.plugin.manifest.author.name)),1),P("span",uP,Et(h.plugin.manifest.author.name),1),h.plugin.manifest.license?(ht(),gt("span",hP,Et(h.plugin.manifest.license),1)):Yt("",!0)])]),P("button",{class:"close-button",onClick:d[0]||(d[0]=y=>h.$emit("close")),"aria-label":""},[...d[6]||(d[6]=[P("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[P("path",{fill:"none",d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),P("main",fP,[P("section",dP,[d[7]||(d[7]=P("h3",{class:"section-title"}," ",-1)),P("p",pP,Et(h.plugin.manifest.description),1)]),P("section",mP,[d[10]||(d[10]=P("h3",{class:"section-title"}," ",-1)),P("div",gP,[P("div",yP,[d[8]||(d[8]=P("label",null,"",-1)),P("span",_P,Et(h.plugin.manifest.host_application.min_version),1)]),P("div",vP,[d[9]||(d[9]=P("label",null,"",-1)),P("span",wP,Et(h.plugin.manifest.host_application.max_version||""),1)])])]),(m=h.plugin.manifest.keywords)!=null&&m.length?(ht(),gt("section",EP,[d[11]||(d[11]=P("h3",{class:"section-title"}," ",-1)),P("div",TP,[(ht(!0),gt(Ae,null,Qi(h.plugin.manifest.keywords,y=>(ht(),gt("span",{key:y,class:"keyword-tag"},Et(y),1))),128))])])):Yt("",!0),h.plugin.manifest.default_locale?(ht(),gt("section",bP,[d[12]||(d[12]=P("h3",{class:"section-title"}," ",-1)),P("div",AP,[P("span",IP,Et(h.plugin.manifest.default_locale),1),h.plugin.manifest.locales_path?(ht(),gt("span",SP,"  ")):Yt("",!0)])])):Yt("",!0),P("section",RP,[d[15]||(d[15]=P("h3",{class:"section-title"}," ",-1)),P("div",CP,[P("div",PP,[d[13]||(d[13]=P("label",null,"",-1)),P("span",null,Et(h.plugin.manifest.manifest_version),1)]),P("div",xP,[d[14]||(d[14]=P("label",null,"ID",-1)),P("span",VP,Et(h.plugin.id),1)])])])]),P("footer",kP,[P("button",{class:"action-button secondary",onClick:d[1]||(d[1]=y=>h.$emit("close"))},"  "),h.plugin.manifest.homepage_url?(ht(),gt("button",{key:0,class:"action-button tertiary",onClick:d[2]||(d[2]=y=>i(h.plugin.manifest.homepage_url))},[...d[16]||(d[16]=[P("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[P("path",{fill:"none",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),P("span",null,"",-1)])])):Yt("",!0),h.plugin.manifest.repository_url?(ht(),gt("button",{key:1,class:"action-button primary",onClick:d[3]||(d[3]=y=>i(h.plugin.manifest.repository_url))},[...d[17]||(d[17]=[P("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[P("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1),P("span",null,"",-1)])])):Yt("",!0)])])])])):Yt("",!0)]}),_:1})]))}}),OP=bs(DP,[["__scopeId","data-v-f145f416"]]),NP={class:"min-h-screen bg-base-200"},MP={class:"navbar bg-base-100 shadow-lg"},LP={class:"container mx-auto"},FP={class:"flex-1"},UP={class:"flex-none"},BP={class:"container mx-auto px-4 py-8"},$P={class:"hero mb-8 fade-in"},jP={class:"hero-content text-center"},qP={class:"max-w-md slide-up"},HP={class:"stats stats-horizontal shadow scale-in"},zP={class:"stat"},KP={class:"stat-value text-primary"},GP={class:"stat"},WP={class:"stat-value text-secondary"},QP={class:"stat"},JP={class:"stat-value text-accent"},XP={class:"space-y-4 mb-8"},YP={class:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between"},ZP={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center flex-wrap"},tx={class:"flex flex-wrap items-center gap-4 text-sm"},ex={class:"text-base-content/60"},nx={key:0,class:"flex flex-wrap gap-2"},sx={key:0,class:"badge badge-primary badge-lg gap-2 py-3 px-3"},rx={key:1,class:"badge badge-secondary badge-lg gap-2 py-3 px-3"},ix={key:2,class:"badge badge-accent badge-lg gap-2 py-3 px-3"},ox={key:0,class:"flex justify-center"},ax={key:1,class:"alert alert-error"},lx={key:2,class:"text-center py-12"},cx={class:"text-base-content/60 mb-4"},ux={class:"flex flex-wrap gap-2 justify-center"},hx={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-fr"},fx=Qe({__name:"Home",setup(e){const t=ne([]),n=ne(!1),s=ne(""),r=ne(""),i=ne(""),o=ne(""),l=ne(null),c=ne({totalVisits:0,dailyVisits:0}),u=Ic.getInstance(),h=(Z,Y)=>{const bt=Z.split(".").map(Number),ot=Y.split(".").map(Number),dt=Math.max(bt.length,ot.length);for(let te=0;te<dt;te++){const jt=bt[te]||0,Pe=ot[te]||0;if(jt>Pe)return 1;if(jt<Pe)return-1}return 0},d=(Z,Y)=>{const bt=Z.manifest.host_application.min_version,ot=Z.manifest.host_application.max_version;return!(h(Y,bt)<0||ot&&h(Y,ot)>0)},m=Qt(()=>u.getAllCategories()),y=Qt(()=>t.value.length),T=Qt(()=>Math.max(0,m.value.length-1)),C=Qt(()=>i.value!==""||o.value!==""||r.value.trim()!==""),x=Qt(()=>{const Z={category:i.value,version:o.value,searchQuery:r.value};if(t.value.length===0)return[];let Y=t.value;if(Z.category&&Z.category!==""&&(Y=Y.filter(bt=>bt.categoryDisplay===Z.category)),Z.version&&Z.version.trim()&&(Y=Y.filter(bt=>d(bt,Z.version))),Z.searchQuery&&Z.searchQuery.trim()){const bt=Z.searchQuery.toLowerCase();Y=Y.filter(ot=>ot.manifest.name.toLowerCase().includes(bt)||ot.manifest.description.toLowerCase().includes(bt)||ot.manifest.author.name.toLowerCase().includes(bt)||(ot.manifest.keywords||[]).some(dt=>dt.toLowerCase().includes(bt)))}return Y}),M=async Z=>{try{const Y=Z.map(dt=>dt.id),[bt,ot]=await Promise.all([os.getBatchPluginStats(Y),Promise.all(Y.map(dt=>os.getUserAction(dt)))]);Z.forEach((dt,te)=>{const jt=bt[dt.id];dt.stats={likes:(jt==null?void 0:jt.likes)||0,dislikes:(jt==null?void 0:jt.dislikes)||0,clickCount:(jt==null?void 0:jt.clickCount)||0,userAction:ot[te]}})}catch(Y){console.error("Error loading plugin stats:",Y)}},N=async()=>{try{n.value=!0,s.value="";const Z=await u.fetchPlugins();t.value=Z,await M(t.value)}catch(Z){s.value=Z instanceof Error?Z.message:""}finally{n.value=!1}},B=async()=>{try{const Z=await os.getSiteStats();c.value={totalVisits:Z.totalVisits,dailyVisits:Z.dailyVisits}}catch(Z){console.error("Error loading site stats:",Z)}},H=Z=>{r.value=Z,Z.trim()&&(i.value="",o.value="")},nt=Z=>{o.value=Z,Z&&(r.value="")},st=()=>{r.value=""},S=()=>{i.value=""},v=()=>{o.value=""},_=()=>{r.value="",i.value="",o.value=""},b=()=>r.value.trim()?"":o.value&&i.value!==""?`"${i.value}"${o.value}+`:o.value?`${o.value}+`:i.value!==""?`"${i.value}"`:"",R=Z=>{l.value=Z},A=()=>{l.value=null},w=Z=>{console.log(":",Z?"":"")};return Wn(async()=>{try{await os.recordSiteVisit(),await Promise.all([N(),B()])}catch(Z){console.error("Error during initialization:",Z)}}),(Z,Y)=>{const bt=Sm("router-link");return ht(),gt("div",NP,[P("header",MP,[P("div",LP,[P("div",FP,[qt(bt,{to:"/",class:"btn btn-ghost text-xl"},{default:Da(()=>[...Y[3]||(Y[3]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})],-1),Fe("  ",-1)])]),_:1})]),P("div",UP,[qt(Z2,{onThemeChanged:w})])])]),P("main",BP,[P("div",$P,[P("div",jP,[P("div",qP,[Y[7]||(Y[7]=P("h1",{class:"text-4xl font-bold gradient-bg bg-clip-text text-transparent"},"  ",-1)),Y[8]||(Y[8]=P("p",{class:"py-6 text-base-content/70"}," QQ ",-1)),P("div",HP,[P("div",zP,[Y[4]||(Y[4]=P("div",{class:"stat-title"},"",-1)),P("div",KP,Et(y.value),1)]),P("div",GP,[Y[5]||(Y[5]=P("div",{class:"stat-title"},"",-1)),P("div",WP,Et(T.value),1)]),P("div",QP,[Y[6]||(Y[6]=P("div",{class:"stat-title"},"",-1)),P("div",JP,Et(c.value.totalVisits),1)])])])])]),P("div",XP,[P("div",YP,[P("div",ZP,[qt(F2,{modelValue:i.value,"onUpdate:modelValue":Y[0]||(Y[0]=ot=>i.value=ot),categories:m.value,plugins:t.value},null,8,["modelValue","categories","plugins"]),qt(H2,{modelValue:o.value,"onUpdate:modelValue":Y[1]||(Y[1]=ot=>o.value=ot),plugins:t.value,onVersionChanged:nt},null,8,["modelValue","plugins"])]),qt(x2,{modelValue:r.value,"onUpdate:modelValue":Y[2]||(Y[2]=ot=>r.value=ot),onSearch:H},null,8,["modelValue"])]),P("div",tx,[P("div",ex,"  "+Et(x.value.length)+"  ",1),C.value?(ht(),gt("div",nx,[i.value!==""?(ht(),gt("div",sx,[Fe(" : "+Et(i.value)+" ",1),P("button",{onClick:S,class:"btn btn-circle btn-xs btn-primary hover:btn-primary-focus opacity-90 hover:opacity-100"},[...Y[9]||(Y[9]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):Yt("",!0),o.value?(ht(),gt("div",rx,[Fe(" : "+Et(o.value)+"+ ",1),P("button",{onClick:v,class:"btn btn-circle btn-xs btn-secondary hover:btn-secondary-focus opacity-90 hover:opacity-100"},[...Y[10]||(Y[10]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):Yt("",!0),r.value?(ht(),gt("div",ix,[Fe(" : "+Et(r.value)+" ",1),P("button",{onClick:st,class:"btn btn-circle btn-xs btn-accent hover:btn-accent-focus opacity-90 hover:opacity-100"},[...Y[11]||(Y[11]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):Yt("",!0),P("button",{onClick:_,class:"btn btn-ghost btn-sm gap-2 hover:btn-ghost"},[...Y[12]||(Y[12]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Fe("  ",-1)])])])):Yt("",!0)])]),n.value?(ht(),gt("div",ox,[qt(J2,{message:"...",showProgress:!0})])):s.value?(ht(),gt("div",ax,[Y[13]||(Y[13]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),P("span",null,Et(s.value),1),P("button",{onClick:N,class:"btn btn-sm"},"")])):x.value.length===0?(ht(),gt("div",lx,[Y[14]||(Y[14]=P("div",{class:"text-6xl mb-4"},"",-1)),Y[15]||(Y[15]=P("h3",{class:"text-xl font-semibold mb-2"},"",-1)),P("p",cx,Et(b()),1),P("div",ux,[C.value?(ht(),gt("button",{key:0,onClick:_,class:"btn btn-primary"},"  ")):Yt("",!0),r.value?(ht(),gt("button",{key:1,onClick:st,class:"btn btn-outline"},"  ")):Yt("",!0)])])):(ht(),gt("div",hx,[(ht(!0),gt(Ae,null,Qi(x.value,(ot,dt)=>(ht(),gt("div",{key:ot.id,class:"grid-item flex",style:Ki({"animation-delay":dt*.1+"s"})},[qt(R2,{plugin:ot,onShowDetail:R,class:"w-full"},null,8,["plugin"])],4))),128))]))]),l.value?(ht(),Fa(OP,{key:0,plugin:l.value,show:!0,onClose:A},null,8,["plugin"])):Yt("",!0),Y[16]||(Y[16]=P("footer",{class:"footer footer-center p-10 bg-base-200 text-base-content"},[P("aside",null,[P("p",{class:"font-bold"},"  "),P("p",null,"QQ"),P("p",null,"Copyright  2024 - All right reserved")])],-1))])}}}),dx={class:"min-h-screen bg-base-200 flex items-center justify-center"},px={class:"text-center p-8"},mx={class:"mt-12 animate-fade-in-up animation-delay-800"},gx={class:"flex flex-wrap justify-center gap-2"},yx=Qe({__name:"NotFound",setup(e){const t=X1(),n=()=>{t.push("/")},s=()=>{window.history.length>1?t.go(-1):t.push("/")};return(r,i)=>{const o=Sm("router-link");return ht(),gt("div",dx,[P("div",px,[i[8]||(i[8]=na('<div class="relative mb-8" data-v-0ea4392e><div class="absolute inset-0 flex items-center justify-center" data-v-0ea4392e><div class="w-64 h-64 bg-primary/10 rounded-full animate-pulse" data-v-0ea4392e></div></div><div class="absolute inset-0 flex items-center justify-center" data-v-0ea4392e><div class="w-48 h-48 bg-secondary/10 rounded-full animate-pulse animation-delay-500" data-v-0ea4392e></div></div><div class="absolute inset-0 flex items-center justify-center" data-v-0ea4392e><div class="w-32 h-32 bg-accent/10 rounded-full animate-pulse animation-delay-1000" data-v-0ea4392e></div></div><div class="relative z-10 select-none" data-v-0ea4392e><h1 class="text-9xl font-black text-primary/80 leading-none tracking-wider" data-v-0ea4392e> 404 </h1></div><div class="absolute top-4 left-8 w-4 h-4 bg-primary rounded-full animate-bounce animation-delay-300" data-v-0ea4392e></div><div class="absolute top-12 right-12 w-3 h-3 bg-secondary rounded-full animate-bounce animation-delay-700" data-v-0ea4392e></div><div class="absolute bottom-8 left-16 w-2 h-2 bg-accent rounded-full animate-bounce animation-delay-1200" data-v-0ea4392e></div><div class="absolute bottom-4 right-8 w-5 h-5 bg-warning rounded-full animate-bounce animation-delay-1500" data-v-0ea4392e></div></div><div class="max-w-md mx-auto mb-8 space-y-4" data-v-0ea4392e><h2 class="text-3xl font-bold text-base-content mb-4 animate-fade-in-up" data-v-0ea4392e>  </h2><p class="text-lg text-base-content/70 animate-fade-in-up animation-delay-200" data-v-0ea4392e>  </p><p class="text-sm text-base-content/60 animate-fade-in-up animation-delay-400" data-v-0ea4392e> URL </p></div>',2)),P("div",{class:"flex flex-col sm:flex-row gap-4 justify-center items-center animate-fade-in-up animation-delay-600"},[P("button",{onClick:n,class:"btn btn-primary btn-lg gap-2 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105"},[...i[0]||(i[0]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),Fe("  ",-1)])]),P("button",{onClick:s,class:"btn btn-outline btn-lg gap-2 hover:scale-105 transition-all duration-300"},[...i[1]||(i[1]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),Fe("  ",-1)])])]),P("div",mx,[i[7]||(i[7]=P("p",{class:"text-sm text-base-content/60 mb-4"},"",-1)),P("div",gx,[qt(o,{to:"/",class:"link link-primary text-sm hover:underline"},{default:Da(()=>[...i[2]||(i[2]=[Fe("  ",-1)])]),_:1}),i[3]||(i[3]=P("span",{class:"text-base-content/40"},"",-1)),i[4]||(i[4]=P("a",{href:"https://github.com/MaiM-with-u/MaiBot",target:"_blank",rel:"noopener noreferrer",class:"link link-secondary text-sm hover:underline"}," QQ ",-1)),i[5]||(i[5]=P("span",{class:"text-base-content/40"},"",-1)),i[6]||(i[6]=P("a",{href:"https://github.com/DrSmoothl/plugin-repo",target:"_blank",rel:"noopener noreferrer",class:"link link-accent text-sm hover:underline"},"  ",-1))])]),i[9]||(i[9]=na('<div class="mt-16 opacity-50" data-v-0ea4392e><div class="flex justify-center items-center space-x-2 text-base-content/40" data-v-0ea4392e><div class="w-2 h-2 bg-current rounded-full animate-pulse" data-v-0ea4392e></div><div class="w-2 h-2 bg-current rounded-full animate-pulse animation-delay-300" data-v-0ea4392e></div><div class="w-2 h-2 bg-current rounded-full animate-pulse animation-delay-600" data-v-0ea4392e></div></div></div>',1))])])}}}),Op=bs(yx,[["__scopeId","data-v-0ea4392e"]]),_x=Q1({history:I1("/"),routes:[{path:"/",name:"home",component:fx},{path:"/404",name:"not-found",component:Op},{path:"/:pathMatch(.*)*",name:"catch-all",component:Op}]});Kw(iE).use(_x).mount("#app");
